(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{393:function(t,s,a){t.exports=a.p+"assets/img/dtmf.863507e1.png"},394:function(t,s,a){t.exports=a.p+"assets/img/dtmf-plot.5ba09f2f.png"},395:function(t,s,a){t.exports=a.p+"assets/img/dtmf-freq.feb96c81.png"},421:function(t,s,a){"use strict";a.r(s);var n=a(20),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"dtmf-简单应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dtmf-简单应用"}},[t._v("#")]),t._v(" DTMF 简单应用")]),t._v(" "),n("p",[t._v("一般的电话键，在按下的时候会产生一个声音，基本上每个声音由两种主要的音频合成，称为双音多频 (Dual-Tone Multi-Frequency, DTMF)  讯号。")]),t._v(" "),n("p",[t._v("双音多频的拨号键盘是 4×4 的矩阵，每一行代表一个高频，每一列代表一个低频，如下图所示。当我们按下一个键时，就传送一个高频和低频的正弦讯号组合，比如按下 '1' 的时候，会产生 697 和 1209 Hz 的两种音频。\n")]),n("p",{attrs:{align:"center"}},[n("img",{attrs:{src:a(393),width:"360"}})]),n("p"),t._v(" "),n("p",[t._v("这个小单元，要使用上面所学到的快速傅立叶变换来观察按键的频率，从而解出按键的内容。")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("小明按电话键的时候，小英暗中进行侧录，抽样率为 8000 Hz，振幅已调整为 -1~1 的实数，录製档案格式为 wav，存放在 "),n("a",{attrs:{href:"https://drive.google.com/open?id=1nydbzHpsAA0w6vN1_3KLwjGs5mTeC6GP",target:"_blank",rel:"noopener noreferrer"}},[t._v("此连结中"),n("OutboundLink")],1),t._v("，请试着播出来听看看，并下载到自己的电脑。")])]),t._v(" "),n("li",[n("p",[t._v("小英学过一些基本的 FFT 概念，决定要自己进行解码，她使用 octave 处理，试着写了以下一段程式码如下：")])])]),t._v(" "),n("div",{staticClass:"language-matlab line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-matlab"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("y"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("audioread")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dtmf-sample.wav'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 读入音档")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("plot")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("y"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("p",[t._v("执行之后，可以看到以下的图形输出。\n")]),n("p",{attrs:{align:"center"}},[n("img",{attrs:{src:a(394),width:"600"}})]),t._v("\n请你使用 "),n("code",[t._v("help audioread")]),t._v(" 查看 audioread 指令的用法，并且依小英的程式码做看看。"),n("p"),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[t._v("根据上面的图形，小英估测这个电话号码应该有 7 个数字。仔细观察之后，发觉第一个数字的讯号，其样本数应该不到 1000 个。如果取 1024 点来做 FFT 的话，音框的总时间是 1024/8000 秒，所以频率的解析度 "),n("eq",[n("span",{staticClass:"katex"},[n("span",{staticClass:"katex-mathml"},[n("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[n("semantics",[n("mrow",[n("mi",{attrs:{mathvariant:"normal"}},[t._v("Δ")]),n("mi",[t._v("F")]),n("mo",[t._v("=")]),n("mn",[t._v("8000")]),n("mi",{attrs:{mathvariant:"normal"}},[t._v("/")]),n("mn",[t._v("1024")]),n("mo",[t._v("<")]),n("mn",[t._v("8")])],1),n("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\Delta F = 8000/1024 < 8")])],1)],1)],1),n("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[n("span",{staticClass:"base"},[n("span",{staticClass:"strut",staticStyle:{height:"0.68333em","vertical-align":"0em"}}),n("span",{staticClass:"mord"},[t._v("Δ")]),n("span",{staticClass:"mord mathdefault",staticStyle:{"margin-right":"0.13889em"}},[t._v("F")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),n("span",{staticClass:"mrel"},[t._v("=")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),n("span",{staticClass:"base"},[n("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),n("span",{staticClass:"mord"},[t._v("8")]),n("span",{staticClass:"mord"},[t._v("0")]),n("span",{staticClass:"mord"},[t._v("0")]),n("span",{staticClass:"mord"},[t._v("0")]),n("span",{staticClass:"mord"},[t._v("/")]),n("span",{staticClass:"mord"},[t._v("1")]),n("span",{staticClass:"mord"},[t._v("0")]),n("span",{staticClass:"mord"},[t._v("2")]),n("span",{staticClass:"mord"},[t._v("4")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),n("span",{staticClass:"mrel"},[t._v("<")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),n("span",{staticClass:"base"},[n("span",{staticClass:"strut",staticStyle:{height:"0.64444em","vertical-align":"0em"}}),n("span",{staticClass:"mord"},[t._v("8")])])])])]),t._v("，查看上面 DTMF 的规范，显然要分辨各个频率是没有问题的。于是小英决定从第 200 个点开始，连续取 1024 个点来观察其频谱。于是小英又写了一个程式如下：")],1)]),t._v(" "),n("div",{staticClass:"language-matlab line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-matlab"}},[n("code",[t._v("sample_rate "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 抽样速度")]),t._v("\nnstart "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 音框开始的位置")]),t._v("\nN "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 音框总共的点数")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("y"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("audioread")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dtmf-sample.wav'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 读入音档")]),t._v("\ndf "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("              "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% ΔF = 1/T < 8")]),t._v("\nys "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("y")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nstart"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("nstart"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("N"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 取音框")]),t._v("\nysf  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fft")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ys"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("              "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 计算音框的 FFT")]),t._v("\nfnum "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("N"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("N"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("df"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 计算对应的频率点")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("plot")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fnum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("abs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fftshift")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ysf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 画出频谱图")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br")])]),n("p",[t._v("这个程式的执行结果如下："),n("br")]),n("p",{attrs:{align:"center"}},[n("img",{attrs:{src:a(395),width:"600"}})]),n("p"),t._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[t._v("紧接着小英用图形的缩放功能，仔细检查了信号的两个峰值，最后发现应该是 697 和 1336 Hz。由此小英确定这个电话号码的第一个数字应该是 2。请你试着依上面的程式操作，并练习用图形缩效功能，查看小英的判断是否正确。")])]),t._v(" "),n("br"),t._v(" "),n("exercise",{attrs:{num:"5",lang:"zh-CN"}}),t._v("\n接下来，请你试着帮小英完成后面的工作，把电话号码都给解出来，并请把决定频率的程式码和关键图形写成 ODT 档案缴交。\n")],1)}),[],!1,null,null,null);s.default=e.exports}}]);