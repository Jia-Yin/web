(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{381:function(t,s,a){t.exports=a.p+"assets/img/dtmf.3d818b66.png"},382:function(t,s,a){t.exports=a.p+"assets/img/dtmf-plot.5ba09f2f.png"},383:function(t,s,a){t.exports=a.p+"assets/img/dtmf-freq.feb96c81.png"},416:function(t,s,a){"use strict";a.r(s);var n=a(20),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"dtmf-簡單應用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dtmf-簡單應用"}},[t._v("#")]),t._v(" DTMF 簡單應用")]),t._v(" "),n("p",[t._v("一般的電話鍵，在按下的時候會產生一個聲音，基本上每個聲音由兩種主要的音頻合成，稱為雙音多頻 (Dual-Tone Multi-Frequency, DTMF)  訊號。")]),t._v(" "),n("p",[t._v("雙音多頻的撥號鍵盤是 4×4 的矩陣，每一行代表一個高頻，每一列代表一個低頻，如下圖所示。當我們按下一個鍵時，就傳送一個高頻和低頻的正弦訊號組合，比如按下 '1' 的時候，會產生 697 和 1209 Hz 的兩種音頻。\n")]),n("p",{attrs:{align:"center"}},[n("img",{attrs:{src:a(381),width:"360"}})]),n("p"),t._v(" "),n("p",[t._v("這個小單元，要使用上面所學到的快速傅立葉轉換來觀察按鍵的頻率，從而解出按鍵的內容。")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("小明按電話鍵的時候，小英暗中進行側錄，取樣率為 8000 Hz，振幅已調整為 -1~1 的實數，錄製檔案格式為 wav，存放在 "),n("a",{attrs:{href:"https://drive.google.com/open?id=1nydbzHpsAA0w6vN1_3KLwjGs5mTeC6GP",target:"_blank",rel:"noopener noreferrer"}},[t._v("此連結中"),n("OutboundLink")],1),t._v("，請試著播出來聽看看，並下載到自己的電腦。")])]),t._v(" "),n("li",[n("p",[t._v("小英學過一些基本的 FFT 概念，決定要自己進行解碼，她使用 octave 處理，試著寫了以下一段程式碼如下：")])])]),t._v(" "),n("div",{staticClass:"language-matlab line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-matlab"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("y"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("audioread")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dtmf-sample.wav'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 讀入音檔")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("plot")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("y"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("p",[t._v("執行之後，可以看到以下的圖形輸出。\n")]),n("p",{attrs:{align:"center"}},[n("img",{attrs:{src:a(382),width:"600"}})]),t._v("\n請你使用 "),n("code",[t._v("help audioread")]),t._v(" 查看 audioread 指令的用法，並且依小英的程式碼做看看。"),n("p"),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[t._v("根據上面的圖形，小英估測這個電話號碼應該有 7 個數字。仔細觀察之後，發覺第一個數字的訊號，其樣本數應該不到 1000 個。如果取 1024 點來做 FFT 的話，音框的總時間是 1024/8000 秒，所以頻率的解析度 "),n("eq",[n("span",{staticClass:"katex"},[n("span",{staticClass:"katex-mathml"},[n("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML"}},[n("semantics",[n("mrow",[n("mi",{attrs:{mathvariant:"normal"}},[t._v("Δ")]),n("mi",[t._v("F")]),n("mo",[t._v("=")]),n("mn",[t._v("8000")]),n("mi",{attrs:{mathvariant:"normal"}},[t._v("/")]),n("mn",[t._v("1024")]),n("mo",[t._v("<")]),n("mn",[t._v("8")])],1),n("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("\\Delta F = 8000/1024 < 8")])],1)],1)],1),n("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[n("span",{staticClass:"base"},[n("span",{staticClass:"strut",staticStyle:{height:"0.68333em","vertical-align":"0em"}}),n("span",{staticClass:"mord"},[t._v("Δ")]),n("span",{staticClass:"mord mathdefault",staticStyle:{"margin-right":"0.13889em"}},[t._v("F")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),n("span",{staticClass:"mrel"},[t._v("=")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),n("span",{staticClass:"base"},[n("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),n("span",{staticClass:"mord"},[t._v("8")]),n("span",{staticClass:"mord"},[t._v("0")]),n("span",{staticClass:"mord"},[t._v("0")]),n("span",{staticClass:"mord"},[t._v("0")]),n("span",{staticClass:"mord"},[t._v("/")]),n("span",{staticClass:"mord"},[t._v("1")]),n("span",{staticClass:"mord"},[t._v("0")]),n("span",{staticClass:"mord"},[t._v("2")]),n("span",{staticClass:"mord"},[t._v("4")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}}),n("span",{staticClass:"mrel"},[t._v("<")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2777777777777778em"}})]),n("span",{staticClass:"base"},[n("span",{staticClass:"strut",staticStyle:{height:"0.64444em","vertical-align":"0em"}}),n("span",{staticClass:"mord"},[t._v("8")])])])])]),t._v("，查看上面 DTMF 的規範，顯然要分辨各個頻率是沒有問題的。於是小英決定從第 200 個點開始，連續取 1024 個點來觀察其頻譜。於是小英又寫了一個程式如下：")],1)]),t._v(" "),n("div",{staticClass:"language-matlab line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-matlab"}},[n("code",[t._v("sample_rate "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 取樣速度")]),t._v("\nnstart "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 音框開始的位置")]),t._v("\nN "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 音框總共的點數")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("y"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("audioread")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dtmf-sample.wav'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 讀入音檔")]),t._v("\ndf "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("              "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% ΔF = 1/T < 8")]),t._v("\nys "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("y")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nstart"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("nstart"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("N"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 取音框")]),t._v("\nysf  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fft")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ys"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("              "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 計算音框的 FFT")]),t._v("\nfnum "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("N"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("N"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("df"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 計算對應的頻率點")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("plot")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fnum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("abs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fftshift")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ysf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("% 畫出頻譜圖")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br")])]),n("p",[t._v("這個程式的執行結果如下："),n("br")]),n("p",{attrs:{align:"center"}},[n("img",{attrs:{src:a(383),width:"600"}})]),n("p"),t._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[t._v("緊接著小英用圖形的縮放功能，仔細檢查了信號的兩個峰值，最後發現應該是 697 和 1336 Hz。由此小英確定這個電話號碼的第一個數字應該是 2。請你試著依上面的程式操作，並練習用圖形縮效功能，查看小英的判斷是否正確。")])]),t._v(" "),n("br"),t._v(" "),n("exercise",{attrs:{num:"5"}}),t._v("\n接下來，請你試著幫小英完成後面的工作，把電話號碼都給解出來，並請把決定頻率的程式碼和關鍵圖形寫成 ODT 檔案繳交。\n")],1)}),[],!1,null,null,null);s.default=e.exports}}]);