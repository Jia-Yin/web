(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{408:function(t,e,r){var content=r(478);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(31).default)("04d2dbe3",content,!0,{sourceMap:!1})},477:function(t,e,r){"use strict";var o=r(408);r.n(o).a},478:function(t,e,r){(t.exports=r(30)(!1)).push([t.i,"h1[data-v-385a82aa]{font-size:140%}.container-fluid[data-v-385a82aa]{margin-top:24px;padding:10px}.scontent[data-v-385a82aa]{padding:6px 50px}.subbtn[data-v-385a82aa]{margin:24px auto}.btn[data-v-385a82aa]{width:50%}.vue-codemirror[data-v-385a82aa]{border:1px solid #eee}",""])},512:function(t,e,r){"use strict";r.r(e);r(7),r(4),r(3),r(1),r(5),r(41);var o=r(10),l=(r(22),r(0)),n=r(391),c=r(390),m=r(11),d=r(59);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var f,v={mixins:[n.validationMixin],data:function(){var t;return t={tabIndex:0,rows:[],tdcases:[],tdscores:[],curcase:{Input:"",Output:""},curscore:{tdscore:null,tdcases:[],curcase:{Input:"",Output:""}},tdpattern:null,error:null,datalang:null,datacode:null,thisProblemForm:{problemid:null,answercode:null,answerlang:null,ansconvert:null,creator:null,description:null,sampleinput:null,sampleoutput:null,samples:null,testdata:null,name:null,type:"testdata",style:"TESTCASE",testsets:null,title:null},schools:[{text:"學校",value:null},"中原大學"],depts:[{text:"開課科系",value:null},"電機工程學系"],statuses:[{text:"開放狀態",value:null},{text:"開放",value:!0},{text:"不開放",value:!1}],answerlangs:[{text:"程式語言",value:null},{text:"C",value:"c"},{text:"C++",value:"cpp"},{text:"Python 3",value:"py"}],datalangs:[{text:"程式語言",value:null},{text:"C",value:"c"},{text:"C++",value:"cpp"},{text:"Python 3",value:"py"}],regisError:null,disable:!1,registerForm:{name:null,email:null,stdID:null,dept:null,grade:null}},Object(l.a)(t,"depts",[{text:"科系",value:null},"電機工程學系","電資學士班","其他"]),Object(l.a)(t,"grades",[{text:"年級",value:null},"大一","大二","大三","大四","研究所","其他"]),t},validations:{thisProblemForm:{problemid:{required:c.required},answercode:{required:c.required},ansconvert:{required:c.required},answerlang:{required:c.required},creator:{required:c.required},description:{required:c.required},sampleinput:{required:c.required},sampleoutput:{required:c.required},samples:{required:c.required},testdata:{required:c.required},name:{required:c.required},style:{required:c.required},id:{required:c.required}}},mounted:function(){this.setProblemForm(this.path.problem)},methods:{setProblemForm:function(t){console.log("thisProblemForm = ",this.thisProblemForm),console.log("path.proble = ",this.path.problem),this.thisProblemForm.answercode=JSON.parse('"'.concat(t.answercode)+'"'),this.thisProblemForm.answerlang=t.answerlang,this.thisProblemForm.creator=t.creator,this.thisProblemForm.description=t.description,this.thisProblemForm.samples=JSON.parse(t.samples),this.thisProblemForm.sampleinput=this.thisProblemForm.samples[0].Input,this.thisProblemForm.sampleoutput=this.thisProblemForm.samples[0].Output,this.thisProblemForm.testdata=JSON.parse(t.testdata),this.thisProblemForm.name=t.name,this.thisProblemForm.title=t.name,this.thisProblemForm.style=JSON.parse(t.testdata).Style,this.thisProblemForm.id=t.id,this.setTab(this.thisProblemForm)},setTab:function(t){if("TESTCASE"==t.style){this.thisProblemForm.type="testdata",this.tabIndex=0;for(var i=0;i<t.testdata.TestSets.length;i++){var e={tdscore:t.testdata.TestSets[i].Score,tdcases:t.testdata.TestSets[i].TestCases,curcase:{Input:"",Output:""}};this.tdscores.push(e)}console.log("tdscores  = ",this.tdscores)}else"PATTERN"==t.style?(this.thisProblemForm.type="pattern",this.tabIndex=1,this.tdpattern=t.testdata.DataPattern):"DATACODE"==t.style&&(this.thisProblemForm.type="datacode",this.tabIndex=2,this.datalang=t.testdata.DataLang,this.datacode=t.testdata.DataCode)},delItem:function(t,e){this.tdscores[t].tdcases.splice(e,1)},delScoreItem:function(t){this.tdscores.splice(t,1)},addTdCase:function(t){""!=this.tdscores[t].curcase.Input||""!=this.tdscores[t].curcase.Output?(this.tdscores[t].tdcases.push(this.tdscores[t].curcase),this.tdscores[t].curcase={Input:"",Output:""},console.log(this.tdscores[t].tdcases)):alert("testcas 沒有輸入值")},addTdScore:function(){null!=this.curscore.tdscore?(this.curscore.tdscore=parseInt(this.curscore.tdscore),this.tdscores.push(this.curscore),this.curscore={tdscore:null,tdcases:[],curcase:{Input:"",Output:""}},console.log(this.tdscores)):alert("score 沒有輸入值")},setTypeT:function(){this.thisProblemForm.type="testdata",this.thisProblemForm.style="TESTCASE"},setTypeP:function(){this.thisProblemForm.type="pattern",this.thisProblemForm.style="PATTERN"},setTypeD:function(){this.thisProblemForm.type="datacode",this.thisProblemForm.style="DATACODE"},addTestdata:function(){document.createElement("tr");this.rows.push({Input:"",Output:""})},removeElement:function(t){this.rows.splice(t,1)},onSubmit:function(){this.disable=!0,console.log("ProblemForm",this.thisProblemForm),console.log("Answer Code",this.thisProblemForm.answercode);var t=JSON.stringify(this.thisProblemForm.answercode).slice(1,-1);console.log("Answer Code JSON",t);var e=[{Input:this.thisProblemForm.sampleinput,Output:this.thisProblemForm.sampleoutput}],r=JSON.stringify(e);if(console.log("Json samples",r),console.log("types=",this.thisProblemForm.type),console.log("Style = ",this.thisProblemForm.style),"TESTCASE"==this.thisProblemForm.style){this.testsets=[];for(var i=0;i<this.tdscores.length;i++)this.testsets.push({Score:this.tdscores[i].tdscore,TestCases:this.tdscores[i].tdcases});console.log("TestSets = "+JSON.stringify(this.testsets));var o={Style:this.thisProblemForm.style,TestSets:this.testsets};this.thisProblemForm.testdata=JSON.stringify(o),console.log("testdata = "+this.thisProblemForm.testdata)}else if("PATTERN"==this.thisProblemForm.style){console.log("pattern = "+this.tdpattern);o={Style:this.thisProblemForm.style,DataPattern:this.tdpattern};this.thisProblemForm.testdata=JSON.stringify(o),console.log("testdata = "+this.thisProblemForm.testdata)}else if("DATACODE"==this.thisProblemForm.style){console.log("data = ",this.datalang,this.datacode);o={Style:this.thisProblemForm.style,DataLang:this.datalang,DataCode:this.datacode};this.thisProblemForm.testdata=JSON.stringify(o)}var l={answercode:JSON.stringify(this.thisProblemForm.answercode).slice(1,-1),answerlang:this.thisProblemForm.answerlang,creator:this.thisProblemForm.creator,description:this.thisProblemForm.description,samples:JSON.stringify([{Input:this.thisProblemForm.sampleinput,Output:this.thisProblemForm.sampleoutput}]),testdata:this.thisProblemForm.testdata,name:this.thisProblemForm.name,id:this.thisProblemForm.id};console.log("AnswerCode",l.answercode),console.log("DataCode",this.thisProblemForm.testdata),this.editProblem(l)},editProblem:(f=Object(o.a)(regeneratorRuntime.mark((function t(data){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.c.collection("problems").doc(data.id).set(data).then((function(){console.log("write FS successful"),e.$router.push("/admin/problem")})).catch((function(t){console.log("Write Error: ",t)}));case 2:case"end":return t.stop()}}),t)}))),function(t){return f.apply(this,arguments)})},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(source,!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(d.b)({path:function(t){return t.person.path},saveCodes:function(t){return t.person.saveCodes}}),{user:function(){return this.$store.getters.getUser.name}})},P=(r(477),r(16)),component=Object(P.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("b-alert",{staticStyle:{"margin-top":"20px"},attrs:{show:t.regisError,dismissible:"",variant:"danger"}},[t._v(t._s(t.regisError))]),t._v(" "),r("h1",[t._v("編輯題目")]),t._v(" "),r("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("b-form-group",{attrs:{id:"group-name"}},[r("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"name",placeholder:"*題目名稱",size:"sm",required:"required"},model:{value:t.$v.thisProblemForm.name.$model,callback:function(e){t.$set(t.$v.thisProblemForm.name,"$model",e)},expression:"$v.thisProblemForm.name.$model"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"group-description"}},[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"description",placeholder:"題目說明",size:"sm"},model:{value:t.$v.thisProblemForm.description.$model,callback:function(e){t.$set(t.$v.thisProblemForm.description,"$model",e)},expression:"$v.thisProblemForm.description.$model"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"group-answerlang"}},[r("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"answerlang",options:t.answerlangs,size:"sm"},model:{value:t.$v.thisProblemForm.answerlang.$model,callback:function(e){t.$set(t.$v.thisProblemForm.answerlang,"$model",e)},expression:"$v.thisProblemForm.answerlang.$model"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"group-answercode"}},[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"answercode",placeholder:"正確程式碼，好像要轉json格式",size:"sm"},model:{value:t.thisProblemForm.answercode,callback:function(e){t.$set(t.thisProblemForm,"answercode",e)},expression:"thisProblemForm.answercode"}})],1),t._v(" "),r("b-form-group",[r("b-row",[r("b-col",[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"sampleinput",placeholder:"sample input",size:"sm"},model:{value:t.$v.thisProblemForm.sampleinput.$model,callback:function(e){t.$set(t.$v.thisProblemForm.sampleinput,"$model",e)},expression:"$v.thisProblemForm.sampleinput.$model"}})],1),t._v(" "),r("b-col",[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"sampleoutput",placeholder:"sample output",size:"sm"},model:{value:t.$v.thisProblemForm.sampleoutput.$model,callback:function(e){t.$set(t.$v.thisProblemForm.sampleoutput,"$model",e)},expression:"$v.thisProblemForm.sampleoutput.$model"}})],1)],1)],1),t._v(" "),r("b-card",{staticStyle:{padding:"10px"},attrs:{"no-body":""}},[r("b-tabs",{attrs:{"content-class":"mt-3"},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[r("b-tab",{attrs:{title:"TESTCASE",active:""},on:{click:t.setTypeT}},[t._l(t.tdscores,(function(e,o){return r("b-form-group",{key:o},[r("b-card",{attrs:{"no-body":"","border-variant":"secondary"}},[r("b-card-header",{attrs:{"header-text-variant":"black",align:"center;"}},[r("h5",[r("b-row",{attrs:{"align-h":"center"}},[r("b-col",{attrs:{cols:"2"}},[r("b-form-input",{staticStyle:{background:"lightgray"},attrs:{type:"number",width:"50px;",placeholder:"score"},model:{value:e.tdscore,callback:function(r){t.$set(e,"tdscore",r)},expression:"item.tdscore"}})],1),t._v(" "),r("b-col",{attrs:{cols:"2"}},[t._v("\n                      分\n                      "),r("b-button",{staticStyle:{width:"50px"},attrs:{pill:"",variant:"outline-secondary"},on:{click:function(e){return t.delScoreItem(o)}}},[r("fa",{attrs:{icon:"trash-alt"}})],1)],1)],1)],1)]),t._v(" "),r("b-card-text",{staticStyle:{margin:"10px 20px"}},[t._l(e.tdcases,(function(e,l){return r("b-form-group",{key:l},[r("b-row",[r("b-col",{attrs:{md:"5"}},[r("b-form-textarea",{staticStyle:{background:"lightgray"},model:{value:e.Input,callback:function(r){t.$set(e,"Input",r)},expression:"itemCase.Input"}})],1),t._v(" "),r("b-col",{attrs:{md:"5"}},[r("b-form-textarea",{staticStyle:{background:"lightgray"},model:{value:e.Output,callback:function(r){t.$set(e,"Output",r)},expression:"itemCase.Output"}})],1),t._v(" "),r("b-col",{attrs:{md:"2"}},[r("b-button",{attrs:{pill:"",variant:"outline-success"},on:{click:function(e){return t.delItem(o,l)}}},[r("fa",{attrs:{icon:"trash-alt"}})],1)],1)],1)],1)})),t._v(" "),r("b-form-group",[r("b-row",[r("b-col",{attrs:{md:"5"}},[r("b-form-textarea",{attrs:{placeholder:"Input"},model:{value:e.curcase.Input,callback:function(r){t.$set(e.curcase,"Input",r)},expression:"item.curcase.Input"}})],1),t._v(" "),r("b-col",{attrs:{md:"5"}},[r("b-form-textarea",{attrs:{placeholder:"Output"},model:{value:e.curcase.Output,callback:function(r){t.$set(e.curcase,"Output",r)},expression:"item.curcase.Output"}})],1),t._v(" "),r("b-col",{attrs:{md:"2"}},[r("b-button",{attrs:{pill:"",variant:"outline-success"},on:{click:function(e){return t.addTdCase(o)}}},[r("fa",{attrs:{icon:"plus"}})],1)],1)],1)],1)],2)],1)],1)})),t._v(" "),r("b-form-group",[r("b-row",[r("b-col",{attrs:{md:"10"}},[r("b-form-Input",{attrs:{type:"number",placeholder:"score"},model:{value:t.curscore.tdscore,callback:function(e){t.$set(t.curscore,"tdscore",e)},expression:"curscore.tdscore"}})],1),t._v(" "),r("b-col",{attrs:{md:"2"}},[r("b-button",{attrs:{pill:"",variant:"outline-success"},on:{click:t.addTdScore}},[r("fa",{attrs:{icon:"plus"}})],1)],1)],1)],1)],2),t._v(" "),r("b-tab",{attrs:{title:"PATTERN"},on:{click:t.setTypeP}},[r("b-form-group",[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"tdpattern",placeholder:"輸入測資格式(pattern)",size:"sm"},model:{value:t.tdpattern,callback:function(e){t.tdpattern=e},expression:"tdpattern"}})],1)],1),t._v(" "),r("b-tab",{attrs:{title:"DATACODE"},on:{click:t.setTypeD}},[r("b-form-group",{attrs:{id:"group-datalang"}},[r("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"datalang",options:t.datalangs,size:"sm"},model:{value:t.datalang,callback:function(e){t.datalang=e},expression:"datalang"}})],1),t._v(" "),r("b-form-group",[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"datacode",placeholder:"輸入測資產生程式",size:"sm"},model:{value:t.datacode,callback:function(e){t.datacode=e},expression:"datacode"}})],1)],1)],1)],1),t._v(" "),r("b-button",{staticClass:"subbtn",attrs:{pill:"",block:"",type:"submit",variant:"outline-primary",disabled:t.disable}},[t._v("\n      修改題目\n      "),t.disable?r("b-spinner",{staticStyle:{width:"1.5rem",height:"1.5rem"},attrs:{label:"Loading...",variant:"light"}}):t._e()],1)],1),t._v(" "),r("h1",[t._v(t._s(t.error))])],1)}),[],!1,null,"385a82aa",null);e.default=component.exports}}]);