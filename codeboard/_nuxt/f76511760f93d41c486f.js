(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{442:function(e,t,r){var content=r(521);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(33).default)("b96e9720",content,!0,{sourceMap:!1})},520:function(e,t,r){"use strict";var o=r(442);r.n(o).a},521:function(e,t,r){(e.exports=r(32)(!1)).push([e.i,"h1[data-v-d49b3e92]{font-size:140%}.container-fluid[data-v-d49b3e92]{margin-top:24px;padding:10px}.scontent[data-v-d49b3e92]{padding:6px 50px}.subbtn[data-v-d49b3e92]{margin:24px auto}.btn[data-v-d49b3e92]{width:50%}.vue-codemirror[data-v-d49b3e92]{border:1px solid #eee}",""])},574:function(e,t,r){"use strict";r.r(t);r(24);var o=r(0),l=r(425),n=r(424),c=(r(11),{mixins:[l.validationMixin],data:function(){var e;return e={rows:[],tdcases:[],tdscores:[],curcase:{Input:"",Output:""},curscore:{tdscore:null,tdcases:[],curcase:{Input:"",Output:""}},tdpattern:null,error:null,datalang:null,datacode:null,newProblemForm:{problemid:null,answercode:null,answerlang:null,ansconvert:null,creator:null,description:null,sampleInput:null,sampleOutput:null,samples:null,testdata:null,name:null,type:"testdata",style:"TESTCASE",testsets:null,title:null},schools:[{text:"學校",value:null},"中原大學"],depts:[{text:"開課科系",value:null},"電機工程學系"],statuses:[{text:"開放狀態",value:null},{text:"開放",value:!0},{text:"不開放",value:!1}],answerlangs:[{text:"程式語言",value:null},{text:"C",value:"c"},{text:"C++",value:"cpp"},{text:"Python 3",value:"py"}],datalangs:[{text:"程式語言",value:null},{text:"C",value:"c"},{text:"C++",value:"cpp"},{text:"Python 3",value:"py"}],regisError:null,disable:!1,registerForm:{name:null,email:null,stdID:null,dept:null,grade:null}},Object(o.a)(e,"depts",[{text:"科系",value:null},"電機工程學系","電資學士班","其他"]),Object(o.a)(e,"grades",[{text:"年級",value:null},"大一","大二","大三","大四","研究所","其他"]),e},validations:{newProblemForm:{problemid:{required:n.required},answercode:{required:n.required},ansconvert:{required:n.required},answerlang:{required:n.required},creator:{required:n.required},description:{required:n.required},sampleinput:{required:n.required},sampleoutput:{required:n.required},samples:{required:n.required},testdata:{required:n.required},name:{required:n.required},style:{required:n.required}}},mounted:function(){this.newProblemForm.creator=this.$store.state.user.name},methods:{delItem:function(e,t){this.tdscores[e].tdcases.splice(t,1)},addTdCase:function(e){""!=this.tdscores[e].curcase.Input||""!=this.tdscores[e].curcase.Output?(this.tdscores[e].tdcases.push(this.tdscores[e].curcase),this.tdscores[e].curcase={Input:"",Output:""},console.log(this.tdscores[e].tdcases)):alert("testcas 沒有輸入值")},addTdScore:function(){null!=this.curscore.tdscore?(this.curscore.tdscore=parseInt(this.curscore.tdscore),this.tdscores.push(this.curscore),this.curscore={tdscore:null,tdcases:[],curcase:{Input:"",Output:""}},console.log(this.tdscores)):alert("score 沒有輸入值")},setTypeT:function(){this.newProblemForm.type="testdata",this.newProblemForm.style="TESTCASE"},setTypeP:function(){this.newProblemForm.type="pattern",this.newProblemForm.style="PATTERN"},setTypeD:function(){this.newProblemForm.type="datacode",this.newProblemForm.style="DATACODE"},addTestdata:function(){document.createElement("tr");this.rows.push({Input:"",Output:""})},removeElement:function(e){this.rows.splice(e,1)},onSubmit:function(){var e=this;this.disable=!0,console.log("ProblemForm",this.newProblemForm),console.log("Answer Code",this.newProblemForm.answercode);var t=JSON.stringify(this.newProblemForm.answercode).slice(1,-1);console.log("Answer Code JSON",t);var r=[{Input:this.newProblemForm.sampleinput,Output:this.newProblemForm.sampleoutput}],o=JSON.stringify(r);if(console.log("Json samples",o),console.log("types=",this.newProblemForm.type),console.log("Style = ",this.newProblemForm.style),"TESTCASE"==this.newProblemForm.style){this.testsets=[];for(var i=0;i<this.tdscores.length;i++)this.testsets.push({Score:this.tdscores[i].tdscore,TestCases:this.tdscores[i].tdcases});console.log("TestSets = "+JSON.stringify(this.testsets));var l={Style:this.newProblemForm.style,TestSets:this.testsets};this.newProblemForm.testdata=JSON.stringify(l),console.log("testdata = "+this.newProblemForm.testdata)}else if("PATTERN"==this.newProblemForm.style){console.log("pattern = "+this.tdpattern);l={Style:this.newProblemForm.style,DataPattern:this.tdpattern};this.newProblemForm.testdata=JSON.stringify(l),console.log("testdata = "+this.newProblemForm.testdata)}else if("DATACODE"==this.newProblemForm.style){console.log("data = ",this.datalang,this.datacode);l={Style:this.newProblemForm.style,DataLang:this.datalang,DataCode:this.datacode};this.newProblemForm.testdata=JSON.stringify(l)}var n={answercode:JSON.stringify(this.newProblemForm.answercode).slice(1,-1),answerlang:this.newProblemForm.answerlang,creator:this.newProblemForm.creator,description:this.newProblemForm.description,samples:JSON.stringify([{Input:this.newProblemForm.sampleinput,Output:this.newProblemForm.sampleoutput}]),testdata:this.newProblemForm.testdata,name:this.newProblemForm.name};console.log("AnswerCode",n.answercode),console.log("DataCode",this.newProblemForm.testdata),this.$store.dispatch("admin/newData",{dkey:"problems",dvalue:n}).then((function(){alert("建立成功"),e.$router.push("/admin/problem")})).catch((function(){alert("伺服器發生錯誤，請稍後再試")}))}},computed:{user:function(){return this.$store.getters.getUser.name}}}),m=(r(520),r(17)),component=Object(m.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-alert",{staticStyle:{"margin-top":"20px"},attrs:{show:e.regisError,dismissible:"",variant:"danger"}},[e._v(e._s(e.regisError))]),e._v(" "),r("h1",[e._v("新增題目")]),e._v(" "),r("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("b-form-group",{attrs:{id:"group-name"}},[r("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"name",placeholder:"*題目名稱",size:"sm",required:"required"},model:{value:e.$v.newProblemForm.name.$model,callback:function(t){e.$set(e.$v.newProblemForm.name,"$model",t)},expression:"$v.newProblemForm.name.$model"}})],1),e._v(" "),r("b-form-group",{attrs:{id:"group-description"}},[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"description",placeholder:"題目說明",size:"sm"},model:{value:e.$v.newProblemForm.description.$model,callback:function(t){e.$set(e.$v.newProblemForm.description,"$model",t)},expression:"$v.newProblemForm.description.$model"}})],1),e._v(" "),r("b-form-group",{attrs:{id:"group-answerlang"}},[r("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"answerlang",options:e.answerlangs,size:"sm"},model:{value:e.$v.newProblemForm.answerlang.$model,callback:function(t){e.$set(e.$v.newProblemForm.answerlang,"$model",t)},expression:"$v.newProblemForm.answerlang.$model"}})],1),e._v(" "),r("b-form-group",{attrs:{id:"group-answercode"}},[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"answercode",placeholder:"正確程式碼，好像要轉json格式",size:"sm"},model:{value:e.newProblemForm.answercode,callback:function(t){e.$set(e.newProblemForm,"answercode",t)},expression:"newProblemForm.answercode"}})],1),e._v(" "),r("b-form-group",[r("b-row",[r("b-col",[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"sampleinput",placeholder:"sample input",size:"sm"},model:{value:e.$v.newProblemForm.sampleinput.$model,callback:function(t){e.$set(e.$v.newProblemForm.sampleinput,"$model",t)},expression:"$v.newProblemForm.sampleinput.$model"}})],1),e._v(" "),r("b-col",[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"sampleoutput",placeholder:"sample output",size:"sm"},model:{value:e.$v.newProblemForm.sampleoutput.$model,callback:function(t){e.$set(e.$v.newProblemForm.sampleoutput,"$model",t)},expression:"$v.newProblemForm.sampleoutput.$model"}})],1)],1)],1),e._v(" "),r("b-card",{staticStyle:{padding:"10px"},attrs:{"no-body":""}},[r("b-tabs",{attrs:{"content-class":"mt-3"}},[r("b-tab",{attrs:{title:"TESTCASE",active:""},on:{click:e.setTypeT}},[e._l(e.tdscores,(function(t,o){return r("b-form-group",{key:o},[r("b-card",{attrs:{"no-body":"","border-variant":"secondary"}},[r("b-card-header",{attrs:{"header-text-variant":"black",align:"center;"}},[r("h5",[r("b-row",{attrs:{"align-h":"center"}},[r("b-col",{attrs:{cols:"2"}},[r("b-form-input",{staticStyle:{background:"lightgray"},attrs:{type:"number",width:"50px;",placeholder:"score"},model:{value:t.tdscore,callback:function(r){e.$set(t,"tdscore",r)},expression:"item.tdscore"}})],1),e._v(" "),r("b-col",{attrs:{cols:"2"}},[e._v("\n                      分\n                      "),r("b-button",{staticStyle:{width:"50px"},attrs:{pill:"",variant:"outline-secondary"},on:{click:function(t){return e.delScoreItem(o)}}},[r("fa",{attrs:{icon:"trash-alt"}})],1)],1)],1)],1)]),e._v(" "),r("b-card-text",{staticStyle:{margin:"10px 20px"}},[e._l(t.tdcases,(function(t,l){return r("b-form-group",{key:l},[r("b-row",[r("b-col",{attrs:{md:"5"}},[r("b-form-textarea",{staticStyle:{background:"lightgray"},model:{value:t.Input,callback:function(r){e.$set(t,"Input",r)},expression:"itemCase.Input"}})],1),e._v(" "),r("b-col",{attrs:{md:"5"}},[r("b-form-textarea",{staticStyle:{background:"lightgray"},model:{value:t.Output,callback:function(r){e.$set(t,"Output",r)},expression:"itemCase.Output"}})],1),e._v(" "),r("b-col",{attrs:{md:"2"}},[r("b-button",{attrs:{pill:"",variant:"outline-success"},on:{click:function(t){return e.delItem(o,l)}}},[r("fa",{attrs:{icon:"trash-alt"}})],1)],1)],1)],1)})),e._v(" "),r("b-form-group",[r("b-row",[r("b-col",{attrs:{md:"5"}},[r("b-form-textarea",{attrs:{placeholder:"Input"},model:{value:t.curcase.Input,callback:function(r){e.$set(t.curcase,"Input",r)},expression:"item.curcase.Input"}})],1),e._v(" "),r("b-col",{attrs:{md:"5"}},[r("b-form-textarea",{attrs:{placeholder:"Output"},model:{value:t.curcase.Output,callback:function(r){e.$set(t.curcase,"Output",r)},expression:"item.curcase.Output"}})],1),e._v(" "),r("b-col",{attrs:{md:"2"}},[r("b-button",{attrs:{pill:"",variant:"outline-success"},on:{click:function(t){return e.addTdCase(o)}}},[r("fa",{attrs:{icon:"plus"}})],1)],1)],1)],1)],2)],1)],1)})),e._v(" "),r("b-form-group",[r("b-row",[r("b-col",{attrs:{md:"10"}},[r("b-form-Input",{attrs:{type:"number",placeholder:"score"},model:{value:e.curscore.tdscore,callback:function(t){e.$set(e.curscore,"tdscore",t)},expression:"curscore.tdscore"}})],1),e._v(" "),r("b-col",{attrs:{md:"2"}},[r("b-button",{attrs:{pill:"",variant:"outline-success"},on:{click:e.addTdScore}},[r("fa",{attrs:{icon:"plus"}})],1)],1)],1)],1)],2),e._v(" "),r("b-tab",{attrs:{title:"PATTERN"},on:{click:e.setTypeP}},[r("b-form-group",[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"tdpattern",placeholder:"輸入測資格式(pattern)",size:"sm"},model:{value:e.tdpattern,callback:function(t){e.tdpattern=t},expression:"tdpattern"}})],1)],1),e._v(" "),r("b-tab",{attrs:{title:"DATACODE"},on:{click:e.setTypeD}},[r("b-form-group",{attrs:{id:"group-datalang"}},[r("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"datalang",options:e.datalangs,size:"sm"},model:{value:e.datalang,callback:function(t){e.datalang=t},expression:"datalang"}})],1),e._v(" "),r("b-form-group",[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"datacode",placeholder:"輸入測資產生程式",size:"sm"},model:{value:e.datacode,callback:function(t){e.datacode=t},expression:"datacode"}})],1)],1)],1)],1),e._v(" "),r("b-button",{staticClass:"subbtn",attrs:{pill:"",block:"",type:"submit",variant:"outline-primary",disabled:e.disable}},[e._v("\n      建立題目\n      "),e.disable?r("b-spinner",{staticStyle:{width:"1.5rem",height:"1.5rem"},attrs:{label:"Loading...",variant:"light"}}):e._e()],1)],1),e._v(" "),r("h1",[e._v(e._s(e.error))])],1)}),[],!1,null,"d49b3e92",null);t.default=component.exports}}]);