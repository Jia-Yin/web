(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{772:function(e,t,n){var content=n(847);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(42).default)("aa6f8548",content,!0,{sourceMap:!1})},846:function(e,t,n){"use strict";n(772)},847:function(e,t,n){(t=n(41)(!1)).push([e.i,".section[data-v-2bbed5ee]{flex:2 2 0;margin-top:24px;padding:10px;border:1px solid #d3d3d3}.scontent[data-v-2bbed5ee]{padding:6px 50px}",""]),e.exports=t},909:function(e,t,n){"use strict";n.r(t);n(53);var r=n(11),o=(n(3),n(2),n(5),n(181),n(13)),l={data:function(){return{file:null,submits:{},keys:[],nockeys:[],total:null,status:"",noclen:0,users:null,ukeys:[]}},computed:{},methods:{twod:function(e){return e<=9?"0"+e:e},curtime:function(){var e=new Date;return""+e.getFullYear()+this.twod(e.getMonth()+1)+this.twod(e.getDate())+this.twod(e.getHours())+this.twod(e.getMinutes())+this.twod(e.getSeconds())},ConvertFSTimestamp:function(e){if(!e||!e.seconds)return e;var t=1e3*e.seconds+(e.nanoseconds||0)/1e6,n=new Date(t);return""+n.getFullYear()+this.twod(n.getMonth()+1)+this.twod(n.getDate())+this.twod(n.getHours())+this.twod(n.getMinutes())+this.twod(n.getSeconds())},ctime:function(e){return this.ConvertFSTimestamp(this.submits[e].timestamp)},UploadUsers:function(){var e=this,t=new FileReader;t.onload=function(t){var n=t.target.result;e.users=JSON.parse(n),e.ukeys=Object.keys(e.users)},t.readAsText(this.file)},handleFileUpload:function(){var e=this,t=new FileReader;t.onload=function(t){var n=t.target.result;e.submits=JSON.parse(n),e.keys=Object.keys(e.submits),e.nockeys=e.keys.filter((function(t){return!e.submits[t].created})),e.total=e.keys.length,e.noclen=e.nockeys.length},t.readAsText(this.file)},saveStringToFile:function(e,data){var t=new Blob([data],{type:"text/plain;charset=utf-8"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(t,e);else{var n=window.document.createElement("a");n.href=window.URL.createObjectURL(t),n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},writeUser:function(e,t){return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.c.collection("users").doc(e).update({solved:t.solved,submits:t.submits,timestamp:t.timestamp}).then((function(t){console.log("Update "+e+" Success!")})).catch((function(t){console.log("Error "+e+" "+t)}));case 2:case"end":return n.stop()}}),n)})))()},writeUserSummary:function(){for(var i=0;i<this.ukeys.length;i++){var e=this.ukeys[i],t=this.users[e];this.writeUser(e,t)}},exportUserSummary:function(){for(var e={},t=this,n=this.keys.sort((function(a,b){return t.submits[a].created>t.submits[b].created?1:-1})),i=0;i<n.length;i++){var r=n[i],o=this.submits[r],l=o.user,c=o.problem,d="AC"===o.status?1:0,m=o.created+"/"+d+"/"+r;e[l]||(e[l]={solved:[],submits:{},timestamp:"19000101120000"}),e[l].submits[c]||(e[l].submits[c]=[]),e[l].submits[c].push(m),1===d&&e[l].solved.indexOf(c)<0&&e[l].solved.push(c),o.created>e[l].timestamp&&(e[l].timestamp=o.created)}this.saveStringToFile("newUserSummary.json",JSON.stringify(e))},exportSubmits:function(){for(var e={},i=0;i<this.keys.length;i++){var t=this.keys[i],n=this.submits[t];this.nockeys.indexOf(t)>=0&&(n.created=this.ctime(t),delete n.timestamp),e[t]=n}this.saveStringToFile("newSubmits.json",JSON.stringify(e))}}},c=(n(846),n(29)),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("section",{staticClass:"section"},[n("p",[n("b-form-file",{staticClass:"mx-4",staticStyle:{display:"inline-block",width:"300px"},attrs:{placeholder:"選擇檔案匯入","drop-placeholder":"把檔案拖到這裡來..."},on:{input:function(t){return e.handleFileUpload()}},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),e._v(" "),n("p",[n("b-button",{on:{click:e.exportUserSummary}},[e._v("Export User Summary")])],1),e._v(" "),n("p",[e._v("Total: "+e._s(e.total))]),e._v(" "),n("p",[e._v("Without created: "+e._s(e.noclen))]),e._v(" "),n("ol",e._l(e.nockeys,(function(t,r){return n("li",{key:r},[e._v("\n        "+e._s(t)+" ==> "+e._s(e.ctime(t))+"\n        "),n("br"),e._v("\n        "+e._s(e.submits[t])+"\n      ")])})),0)]),e._v(" "),n("section",{staticClass:"section"},[n("p",[e._v("\n      USERS\n      "),n("b-form-file",{staticClass:"mx-4",staticStyle:{display:"inline-block",width:"300px"},attrs:{placeholder:"選擇檔案匯入","drop-placeholder":"把檔案拖到這裡來..."},on:{input:function(t){return e.UploadUsers()}},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),e._v(" "),n("p",[n("b-button",{on:{click:e.writeUserSummary}},[e._v("Write User Summary")])],1),e._v(" "),n("ol",e._l(e.ukeys,(function(t,r){return n("li",{key:r},[e._v("\n        User = "+e._s(t)+"\n        "),n("br"),e._v("\n        Solved ==> "+e._s(e.users[t].solved)+"\n        "),n("br"),e._v("\n        Submits ==> "+e._s(e.users[t].submits)+"\n        "),n("br"),e._v("\n        Timestamp ==> "+e._s(e.users[t].timestamp)+"\n        "),n("br"),e._v(" "),n("br")])})),0)])])}),[],!1,null,"2bbed5ee",null);t.default=component.exports}}]);