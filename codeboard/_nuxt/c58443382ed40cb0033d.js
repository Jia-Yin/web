(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{341:function(r,o,t){var content=t(405);"string"==typeof content&&(content=[[r.i,content,""]]),content.locals&&(r.exports=content.locals);(0,t(28).default)("0d883836",content,!0,{sourceMap:!1})},404:function(r,o,t){"use strict";var e=t(341);t.n(e).a},405:function(r,o,t){(r.exports=t(27)(!1)).push([r.i,".card[data-v-1d8e7f93]{margin:30px 10px;padding:10px 10px 0}.card-title[data-v-1d8e7f93]{margin-bottom:24px}.btn[data-v-1d8e7f93]{width:50%;margin:24px auto}.alert[data-v-1d8e7f93]{margin-top:30px;margin-bottom:0}input[data-v-1d8e7f93]{margin-top:6px}",""])},429:function(r,o,t){"use strict";t.r(o);var e=t(321),n=t(320),l={name:"loginPage",mixins:[e.validationMixin],middleware:["notAuthenticated"],data:function(){return{disable:!1,loginError:null,loginForm:{email:null,password:null}}},validations:{loginForm:{email:{required:n.required,email:n.email},password:{required:n.required}}},methods:{onSubmit:function(){var r=this;this.$v.loginForm.$touch(),this.$v.loginForm.$anyError||(this.disable=!0,this.loginError=null,this.$store.dispatch("login",this.loginForm).then((function(o){"email-not-verified"===o?r.loginError="Email信箱尚未驗證":"verify-error"===o?r.loginError="帳號或密碼有誤":"admin"===o.role?r.$router.push("/admin"):r.$router.push("/user"),r.disable=!1})).catch((function(o){console.log(o.code),"auth/user-not-found"==o.code?r.loginError="該信箱並未註冊":"auth/user-disabled"==o.code?r.loginError="該信箱被停權，如有問題請聯絡管理員":r.loginError="帳號或密碼有誤",r.disable=!1})))}}},d=(t(404),t(15)),component=Object(d.a)(l,(function(){var r=this,o=r.$createElement,t=r._self._c||o;return t("div",[t("b-container",[t("b-col",{attrs:{md:"6","offset-md":"3"}},[t("b-alert",{attrs:{show:r.loginError,dismissible:"",variant:"danger"}},[r._v(r._s(r.loginError))]),r._v(" "),t("b-card",{attrs:{title:"歡迎回來！"}},[t("b-form",{on:{submit:function(o){return o.preventDefault(),r.onSubmit(o)}}},[t("b-form-group",{attrs:{id:"group-username"}},[t("b-form-input",{attrs:{id:"username",placeholder:"信箱",state:r.$v.loginForm.email.$dirty?!r.$v.loginForm.email.$error:null,size:"sm"},model:{value:r.$v.loginForm.email.$model,callback:function(o){r.$set(r.$v.loginForm.email,"$model",o)},expression:"$v.loginForm.email.$model"}})],1),r._v(" "),t("b-form-group",{attrs:{id:"group-password"}},[t("b-form-input",{attrs:{id:"password",type:"password",state:r.$v.loginForm.password.$dirty?!r.$v.loginForm.password.$error:null,placeholder:"密碼",size:"sm"},model:{value:r.$v.loginForm.password.$model,callback:function(o){r.$set(r.$v.loginForm.password,"$model",o)},expression:"$v.loginForm.password.$model"}})],1),r._v(" "),t("b-button",{attrs:{pill:"",block:"",type:"submit",variant:"outline-primary",disabled:r.disable}},[r._v("\n            登入\n            "),r.disable?t("b-spinner",{staticStyle:{width:"1.3rem",height:"1.3rem"}}):r._e()],1),r._v(" "),t("p",{attrs:{align:"center"}},[t("nuxt-link",{attrs:{to:"/forgetPassword"}},[r._v("忘記密碼")])],1)],1)],1)],1)],1)],1)}),[],!1,null,"1d8e7f93",null);o.default=component.exports}}]);