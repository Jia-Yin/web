(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{442:function(t,e,r){var content=r(521);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(33).default)("077ca84e",content,!0,{sourceMap:!1})},520:function(t,e,r){"use strict";var o=r(442);r.n(o).a},521:function(t,e,r){(t.exports=r(32)(!1)).push([t.i,"h1[data-v-5679810a]{font-size:140%}.container-fluid[data-v-5679810a]{margin-top:24px;padding:10px}.scontent[data-v-5679810a]{padding:6px 50px}.subbtn[data-v-5679810a]{margin:24px auto}.btn[data-v-5679810a]{width:50%}.vue-codemirror[data-v-5679810a]{border:1px solid #eee}",""])},574:function(t,e,r){"use strict";r.r(e);r(24);var o=r(0),l=r(425),n=r(424),c=(r(11),{mixins:[l.validationMixin],data:function(){var t;return t={rows:[],tdcases:[],tdscores:[],curcase:{Input:"",Output:""},curscore:{tdscore:null,tdcases:[],curcase:{Input:"",Output:""}},tdpattern:null,error:null,datalang:null,datacode:null,newProblemForm:{problemid:null,answercode:null,answerlang:null,ansconvert:null,creator:null,description:null,sampleInput:null,sampleOutput:null,samples:null,testdata:null,name:null,type:"testdata",style:"TESTCASE",testsets:null,title:null},schools:[{text:"學校",value:null},"中原大學"],depts:[{text:"開課科系",value:null},"電機工程學系"],statuses:[{text:"開放狀態",value:null},{text:"開放",value:!0},{text:"不開放",value:!1}],answerlangs:[{text:"程式語言",value:null},{text:"C",value:"c"},{text:"C++",value:"cpp"},{text:"Python 3",value:"py"}],datalangs:[{text:"程式語言",value:null},{text:"C",value:"c"},{text:"C++",value:"cpp"},{text:"Python 3",value:"py"}],regisError:null,disable:!1,registerForm:{name:null,email:null,stdID:null,dept:null,grade:null}},Object(o.a)(t,"depts",[{text:"科系",value:null},"電機工程學系","電資學士班","其他"]),Object(o.a)(t,"grades",[{text:"年級",value:null},"大一","大二","大三","大四","研究所","其他"]),t},validations:{newProblemForm:{problemid:{required:n.required},answercode:{required:n.required},ansconvert:{required:n.required},answerlang:{required:n.required},creator:{required:n.required},description:{required:n.required},sampleinput:{required:n.required},sampleoutput:{required:n.required},samples:{required:n.required},testdata:{required:n.required},name:{required:n.required},style:{required:n.required}}},mounted:function(){this.newProblemForm.creator=this.$store.state.user.name},methods:{delItem:function(t,e){this.tdscores[t].tdcases.splice(e,1)},addTdCase:function(t){""!=this.tdscores[t].curcase.Input||""!=this.tdscores[t].curcase.Output?(this.tdscores[t].tdcases.push(this.tdscores[t].curcase),this.tdscores[t].curcase={Input:"",Output:""},console.log(this.tdscores[t].tdcases)):alert("testcas 沒有輸入值")},addTdScore:function(){null!=this.curscore.tdscore?(this.curscore.tdscore=parseInt(this.curscore.tdscore),this.tdscores.push(this.curscore),this.curscore={tdscore:null,tdcases:[],curcase:{Input:"",Output:""}},console.log(this.tdscores)):alert("score 沒有輸入值")},setTypeT:function(){this.newProblemForm.type="testdata",this.newProblemForm.style="TESTCASE"},setTypeP:function(){this.newProblemForm.type="pattern",this.newProblemForm.style="PATTERN"},setTypeD:function(){this.newProblemForm.type="datacode",this.newProblemForm.style="DATACODE"},setTypeF:function(){this.newProblemForm.type="datacode",this.newProblemForm.style="DATAFUNC"},addTestdata:function(){document.createElement("tr");this.rows.push({Input:"",Output:""})},removeElement:function(t){this.rows.splice(t,1)},onSubmit:function(){var t=this;this.disable=!0,console.log("ProblemForm",this.newProblemForm),console.log("Answer Code",this.newProblemForm.answercode);var e=JSON.stringify(this.newProblemForm.answercode).slice(1,-1);console.log("Answer Code JSON",e);var r=[{Input:this.newProblemForm.sampleinput,Output:this.newProblemForm.sampleoutput}],o=JSON.stringify(r);if(console.log("Json samples",o),console.log("types=",this.newProblemForm.type),console.log("Style = ",this.newProblemForm.style),"TESTCASE"==this.newProblemForm.style){this.testsets=[];for(var i=0;i<this.tdscores.length;i++)this.testsets.push({Score:this.tdscores[i].tdscore,TestCases:this.tdscores[i].tdcases});console.log("TestSets = "+JSON.stringify(this.testsets));var l={Style:this.newProblemForm.style,TestSets:this.testsets};this.newProblemForm.testdata=JSON.stringify(l),console.log("testdata = "+this.newProblemForm.testdata)}else if("PATTERN"==this.newProblemForm.style){console.log("pattern = "+this.tdpattern);l={Style:this.newProblemForm.style,DataPattern:this.tdpattern};this.newProblemForm.testdata=JSON.stringify(l),console.log("testdata = "+this.newProblemForm.testdata)}else if("DATACODE"==this.newProblemForm.style){console.log("data = ",this.datalang,this.datacode);l={Style:this.newProblemForm.style,DataLang:this.datalang,DataCode:this.datacode};this.newProblemForm.testdata=JSON.stringify(l)}else if("DATAFUNC"==this.newProblemForm.style){console.log("data = ",this.datalang,this.datacode);l={Style:this.newProblemForm.style,DataLang:this.datalang,DataCode:this.datacode};this.newProblemForm.testdata=JSON.stringify(l)}var n={answercode:JSON.stringify(this.newProblemForm.answercode).slice(1,-1),answerlang:this.newProblemForm.answerlang,creator:this.newProblemForm.creator,description:this.newProblemForm.description,samples:JSON.stringify([{Input:this.newProblemForm.sampleinput,Output:this.newProblemForm.sampleoutput}]),testdata:this.newProblemForm.testdata,name:this.newProblemForm.name};console.log("AnswerCode",n.answercode),console.log("DataCode",this.newProblemForm.testdata),this.$store.dispatch("admin/newData",{dkey:"problems",dvalue:n}).then((function(){alert("建立成功"),t.$router.push("/admin/problem")})).catch((function(){alert("伺服器發生錯誤，請稍後再試")}))}},computed:{user:function(){return this.$store.getters.getUser.name}}}),m=(r(520),r(17)),component=Object(m.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("b-alert",{staticStyle:{"margin-top":"20px"},attrs:{show:t.regisError,dismissible:"",variant:"danger"}},[t._v(t._s(t.regisError))]),t._v(" "),r("h1",[t._v("新增題目")]),t._v(" "),r("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("b-form-group",{attrs:{id:"group-name"}},[r("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"name",placeholder:"*題目名稱",size:"sm",required:"required"},model:{value:t.$v.newProblemForm.name.$model,callback:function(e){t.$set(t.$v.newProblemForm.name,"$model",e)},expression:"$v.newProblemForm.name.$model"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"group-description"}},[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"description",placeholder:"題目說明",size:"sm"},model:{value:t.$v.newProblemForm.description.$model,callback:function(e){t.$set(t.$v.newProblemForm.description,"$model",e)},expression:"$v.newProblemForm.description.$model"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"group-answerlang"}},[r("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"answerlang",options:t.answerlangs,size:"sm"},model:{value:t.$v.newProblemForm.answerlang.$model,callback:function(e){t.$set(t.$v.newProblemForm.answerlang,"$model",e)},expression:"$v.newProblemForm.answerlang.$model"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"group-answercode"}},[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"answercode",placeholder:"正確程式碼，好像要轉json格式",size:"sm"},model:{value:t.newProblemForm.answercode,callback:function(e){t.$set(t.newProblemForm,"answercode",e)},expression:"newProblemForm.answercode"}})],1),t._v(" "),r("b-form-group",[r("b-row",[r("b-col",[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"sampleinput",placeholder:"sample input",size:"sm"},model:{value:t.$v.newProblemForm.sampleinput.$model,callback:function(e){t.$set(t.$v.newProblemForm.sampleinput,"$model",e)},expression:"$v.newProblemForm.sampleinput.$model"}})],1),t._v(" "),r("b-col",[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"sampleoutput",placeholder:"sample output",size:"sm"},model:{value:t.$v.newProblemForm.sampleoutput.$model,callback:function(e){t.$set(t.$v.newProblemForm.sampleoutput,"$model",e)},expression:"$v.newProblemForm.sampleoutput.$model"}})],1)],1)],1),t._v(" "),r("b-card",{staticStyle:{padding:"10px"},attrs:{"no-body":""}},[r("b-tabs",{attrs:{"content-class":"mt-3"}},[r("b-tab",{attrs:{title:"TESTCASE",active:""},on:{click:t.setTypeT}},[t._l(t.tdscores,(function(e,o){return r("b-form-group",{key:o},[r("b-card",{attrs:{"no-body":"","border-variant":"secondary"}},[r("b-card-header",{attrs:{"header-text-variant":"black",align:"center;"}},[r("h5",[r("b-row",{attrs:{"align-h":"center"}},[r("b-col",{attrs:{cols:"2"}},[r("b-form-input",{staticStyle:{background:"lightgray"},attrs:{type:"number",width:"50px;",placeholder:"score"},model:{value:e.tdscore,callback:function(r){t.$set(e,"tdscore",r)},expression:"item.tdscore"}})],1),t._v(" "),r("b-col",{attrs:{cols:"2"}},[t._v("\n                      分\n                      "),r("b-button",{staticStyle:{width:"50px"},attrs:{pill:"",variant:"outline-secondary"},on:{click:function(e){return t.delScoreItem(o)}}},[r("fa",{attrs:{icon:"trash-alt"}})],1)],1)],1)],1)]),t._v(" "),r("b-card-text",{staticStyle:{margin:"10px 20px"}},[t._l(e.tdcases,(function(e,l){return r("b-form-group",{key:l},[r("b-row",[r("b-col",{attrs:{md:"5"}},[r("b-form-textarea",{staticStyle:{background:"lightgray"},model:{value:e.Input,callback:function(r){t.$set(e,"Input",r)},expression:"itemCase.Input"}})],1),t._v(" "),r("b-col",{attrs:{md:"5"}},[r("b-form-textarea",{staticStyle:{background:"lightgray"},model:{value:e.Output,callback:function(r){t.$set(e,"Output",r)},expression:"itemCase.Output"}})],1),t._v(" "),r("b-col",{attrs:{md:"2"}},[r("b-button",{attrs:{pill:"",variant:"outline-success"},on:{click:function(e){return t.delItem(o,l)}}},[r("fa",{attrs:{icon:"trash-alt"}})],1)],1)],1)],1)})),t._v(" "),r("b-form-group",[r("b-row",[r("b-col",{attrs:{md:"5"}},[r("b-form-textarea",{attrs:{placeholder:"Input"},model:{value:e.curcase.Input,callback:function(r){t.$set(e.curcase,"Input",r)},expression:"item.curcase.Input"}})],1),t._v(" "),r("b-col",{attrs:{md:"5"}},[r("b-form-textarea",{attrs:{placeholder:"Output"},model:{value:e.curcase.Output,callback:function(r){t.$set(e.curcase,"Output",r)},expression:"item.curcase.Output"}})],1),t._v(" "),r("b-col",{attrs:{md:"2"}},[r("b-button",{attrs:{pill:"",variant:"outline-success"},on:{click:function(e){return t.addTdCase(o)}}},[r("fa",{attrs:{icon:"plus"}})],1)],1)],1)],1)],2)],1)],1)})),t._v(" "),r("b-form-group",[r("b-row",[r("b-col",{attrs:{md:"10"}},[r("b-form-Input",{attrs:{type:"number",placeholder:"score"},model:{value:t.curscore.tdscore,callback:function(e){t.$set(t.curscore,"tdscore",e)},expression:"curscore.tdscore"}})],1),t._v(" "),r("b-col",{attrs:{md:"2"}},[r("b-button",{attrs:{pill:"",variant:"outline-success"},on:{click:t.addTdScore}},[r("fa",{attrs:{icon:"plus"}})],1)],1)],1)],1)],2),t._v(" "),r("b-tab",{attrs:{title:"PATTERN"},on:{click:t.setTypeP}},[r("b-form-group",[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"tdpattern",placeholder:"輸入測資格式(pattern)",size:"sm"},model:{value:t.tdpattern,callback:function(e){t.tdpattern=e},expression:"tdpattern"}})],1)],1),t._v(" "),r("b-tab",{attrs:{title:"DATACODE"},on:{click:t.setTypeD}},[r("b-form-group",{attrs:{id:"group-datalang"}},[r("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"datalang",options:t.datalangs,size:"sm"},model:{value:t.datalang,callback:function(e){t.datalang=e},expression:"datalang"}})],1),t._v(" "),r("b-form-group",[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"datacode",placeholder:"輸入測資產生程式",size:"sm"},model:{value:t.datacode,callback:function(e){t.datacode=e},expression:"datacode"}})],1)],1),t._v(" "),r("b-tab",{attrs:{title:"DATAFUNC"},on:{click:t.setTypeF}},[r("b-form-group",{attrs:{id:"group-datalang"}},[r("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"datalang",options:t.datalangs,size:"sm"},model:{value:t.datalang,callback:function(e){t.datalang=e},expression:"datalang"}})],1),t._v(" "),r("b-form-group",[r("b-form-textarea",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"datafunc",placeholder:"輸入測資產生程式",size:"sm"},model:{value:t.datacode,callback:function(e){t.datacode=e},expression:"datacode"}})],1)],1)],1)],1),t._v(" "),r("b-button",{staticClass:"subbtn",attrs:{pill:"",block:"",type:"submit",variant:"outline-primary",disabled:t.disable}},[t._v("\n      建立題目\n      "),t.disable?r("b-spinner",{staticStyle:{width:"1.5rem",height:"1.5rem"},attrs:{label:"Loading...",variant:"light"}}):t._e()],1)],1),t._v(" "),r("h1",[t._v(t._s(t.error))])],1)}),[],!1,null,"5679810a",null);e.default=component.exports}}]);