(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{328:function(e,t,r){var content=r(382);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(30).default)("52773d63",content,!0,{sourceMap:!1})},381:function(e,t,r){"use strict";var n=r(328);r.n(n).a},382:function(e,t,r){(e.exports=r(29)(!1)).push([e.i,"section[data-v-09f8b464]{margin-top:24px}input[data-v-09f8b464]{display:inline-block;width:80%}",""])},418:function(e,t,r){"use strict";r.r(t);r(21),r(24),r(40);var n,o,c=r(10),l=r(28),d=r(11),h={data:function(){return{theuser:null,readpara:null,readans:null,writepara:null,writeans:null}},mounted:(o=Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$store.state.admin.submits){e.next=3;break}return e.next=3,this.$store.dispatch("admin/getAllSubmits");case 3:if(this.$store.state.admin.users){e.next=6;break}return e.next=6,this.$store.dispatch("admin/getCollection","users");case 6:if(this.$store.state.admin.problems){e.next=9;break}return e.next=9,this.$store.dispatch("admin/getCollection","problems");case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),computed:{problems:function(){return this.$store.state.admin.problems&&this.$store.state.admin.problems.map((function(p){return p.id}))},users:function(){return this.$store.state.admin.users&&this.$store.state.admin.users.map((function(u){return u.id}))},submits:function(){return this.$store.state.admin.submits}},methods:{existed:function(e,t){for(var i=0;i<e.length;i++){if(e[i]===t)return!0}return!1},createSummary:function(){console.log("Create Summary");for(var e={},t=[],r={},n=[],o=[],c=0;c<this.submits.length;c++){var l=this.submits[c];if(this.existed(this.users,l.user)&&this.existed(this.problems,l.problem)){var h=0;"AC"===l.status&&(h=1,this.existed(t,l.user)||t.push(l.user),e[l.user]?this.existed(e[l.user],l.problem)||e[l.user].push(l.problem):e[l.user]=[l.problem]);var m=l.user+"/"+l.problem;this.existed(n,m)||n.push(m);var f=l.created+"/"+h+"/"+l.id;r[m]?this.existed(r[m],f)||r[m].push(f):r[m]=[f]}else o.push(l.id)}t.forEach((function(t){var data={type:"solved",user:t,solved:e[t]};d.c.collection("summary").add(data)})),n.forEach((function(e){var t=e.split("/"),data={type:"submits",user:t[0],problem:t[1],submits:r[e]};d.c.collection("summary").add(data)})),o.forEach((function(e){d.c.collection("submits").doc(e).delete()}))},twod:function(e){return e<=9?"0"+e:e},subtime:function(e){var t=new Date;return e&&(t=new Date(e)),""+t.getFullYear()+this.twod(t.getMonth()+1)+this.twod(t.getDate())+this.twod(t.getHours())+this.twod(t.getMinutes())+this.twod(t.getSeconds())},writeToFS:function(){},readFromFS:(n=Object(c.a)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,r="",e.next=4,d.c.collection("courses").doc(this.readpara).get().then((function(e){r=e.data().groups,t.readans=r}));case 4:d.c.collection("groups").where(l.firestore.FieldPath.documentId(),"in",r).get().then((function(e){var r=[];e.docs.forEach((function(e){r.push(e.data().name)})),console.log("GROUPS",r),t.readans=r}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}},m=(r(381),r(15)),component=Object(m.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("hr"),e._v(" "),r("section",[r("h2",[e._v("Set User")]),e._v(" "),r("b-form-input",{model:{value:e.theuser,callback:function(t){e.theuser=t},expression:"theuser"}})],1),e._v(" "),r("section",[r("h2",[e._v("Read from Firestore")]),e._v(" "),r("b-form-input",{model:{value:e.readpara,callback:function(t){e.readpara=t},expression:"readpara"}}),e._v(" "),r("button",{on:{click:e.readFromFS}},[e._v("Read")]),e._v(" "),r("h4",[e._v("Results: "+e._s(e.readans))])],1),e._v(" "),r("section",[r("h2",[e._v("Write to Firestore.")]),e._v(" "),r("b-form-input",{model:{value:e.writepara,callback:function(t){e.writepara=t},expression:"writepara"}}),e._v(" "),r("button",{on:{click:e.writeToFS}},[e._v("Write")]),e._v(" "),r("h4",[e._v("Results: "+e._s(e.writeans))])],1)])}),[],!1,null,"09f8b464",null);t.default=component.exports}}]);