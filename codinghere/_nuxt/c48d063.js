(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{1110:function(e,t,r){var content=r(1310);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(57).default)("ad377684",content,!0,{sourceMap:!1})},1309:function(e,t,r){"use strict";r(1110)},1310:function(e,t,r){(t=r(56)(!1)).push([e.i,".dcenter[data-v-2d64cfd1]{text-align:center}.notice[data-v-2d64cfd1]{color:#00f;width:600px;margin:36px auto}.exit[data-v-2d64cfd1]{margin:0;width:100px;position:fixed;bottom:0;right:0}",""]),e.exports=t},1429:function(e,t,r){"use strict";r.r(t);r(36),r(27),r(9),r(20),r(29),r(46),r(87);var n=r(0),c=(r(49),r(7)),o=r(26),m=r(121);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var x={data:function(){return{contest:!1,showExit:!1,userpass:!1,codeseg:!1,entercode:"",rightcode:!1,examdata:null,localeText:{Exam_Exit:"離開",Exam_Confirm:"確定要離開考場嗎？",Exam_WaitOpen:"等待老師開題中...",Exam_Passcode:"通關密碼",Exam_Warning:"注意：同學在作答過程中，請勿嘗試各種系統切換鍵，如果因此導致作答系統當掉，未作答部份則不予計分，謝謝您的合作！",SYS_OK:"確定"}}},created:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.localeText=e.$updateLocaleText(e.localeText);case 1:case"end":return t.stop()}}),t)})))()},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(m.b)({tick:function(e){return e.params&&e.params.tick},listen:function(e){return e.vparams&&e.vparams.listen}})),methods:{exit:function(){this.$router.push("/exit")},findUserInUserList:function(e){for(var t=this.$user("name"),r=e.trim().replace(/\s+/g,",").split(","),i=0;i<r.length;i++){var element=r[i];if(t.indexOf(element)>=0)return!0}return!1},processCmd:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var n,c,m,data,l,x,d,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:console.log("ProcessCmd"),n=t.$user(),c=n.courses,m=n.id,data=null,r.t0=regeneratorRuntime.keys(e);case 6:if((r.t1=r.t0()).done){r.next=23;break}if(l=r.t1.value,!c||!c[l]||"startExam"!==e[l].cmd||"exam"!==e[l].examtype){r.next=12;break}return(data=e[l]).courseid=l,r.abrupt("break",23);case 12:if("startExam"!==e[l].cmd||"contest"!==e[l].examtype){r.next=21;break}return r.next=15,o.d.collection("contests").doc(l).get();case 15:if(!(x=r.sent).data().players||!x.data().players[m]){r.next=21;break}return(data=e[l]).contestid=l,t.contest=!0,r.abrupt("break",23);case 21:r.next=6;break;case 23:if(data){r.next=25;break}return r.abrupt("return");case 25:if(t.examdata=data,!t.contest){r.next=37;break}if(d=n.contests,!data.userlimit||!t.findUserInUserList(data.userlimit)){r.next=30;break}return r.abrupt("return",t.startContest());case 30:if(!d||!d[data.contestid]){r.next=33;break}return t.$router.push("/afterexam?taken=1"),r.abrupt("return");case 33:if(data.checkcode){r.next=35;break}return r.abrupt("return",t.startContest());case 35:r.next=45;break;case 37:if(f=n.exams,!data.userlimit||!t.findUserInUserList(data.userlimit)){r.next=40;break}return r.abrupt("return",t.startExam());case 40:if(!f||!f[data.examid]){r.next=43;break}return t.$router.push("/afterexam?taken=1"),r.abrupt("return");case 43:if(data.checkcode){r.next=45;break}return r.abrupt("return",t.startExam());case 45:t.rightcode=data.checkcode,t.codeseg=!0;case 47:case"end":return r.stop()}}),r)})))()},codecheck:function(){this.rightcode===this.entercode.trim()&&(this.contest?this.startContest():this.startExam())},startContest:function(){this.$store.commit("setVParam",{name:"contest",value:this.examdata}),this.$router.push("/exam/startContest?case=exam")},startExam:function(){this.$store.commit("setVParam",{name:"exam",value:this.examdata}),"contest"===this.examdata.examtype?this.$router.push("/exam/courseContest?case=exam"):this.$router.push("/exam/startExam?case=exam")}},watch:{listen:function(e){this.processCmd(e)}}},d=(r(1309),r(55)),component=Object(d.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"my-4"},[r("b-button",{staticClass:"exit",attrs:{size:"sm"},on:{click:function(t){e.showExit=!0}}},[e._v(e._s(e.localeText.Exam_Exit))]),e._v(" "),r("b-modal",{attrs:{title:"Confirm"},on:{ok:e.exit},model:{value:e.showExit,callback:function(t){e.showExit=t},expression:"showExit"}},[e._v("\n        "+e._s(e.localeText.Exam_Confirm)+"\n    ")]),e._v(" "),r("p",{staticClass:"mt-5",attrs:{align:"center"}},[e._v(e._s(e.localeText.Exam_WaitOpen))]),e._v(" "),e.codeseg?r("div",{staticClass:"dcenter"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.entercode,expression:"entercode"}],staticClass:"mr-2 mt-3",attrs:{type:"text",placeholder:e.localeText.Exam_Passcode},domProps:{value:e.entercode},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.codecheck(t)},input:function(t){t.target.composing||(e.entercode=t.target.value)}}}),e._v(" "),r("button",{attrs:{variant:"outline-success",size:"sm"},on:{click:e.codecheck}},[e._v("\n            "+e._s(e.localeText.SYS_OK)+"\n        ")])]):r("div",{staticClass:"notice"},[e._v("\n        "+e._s(e.localeText.Exam_Warning)+"\n    ")])],1)}),[],!1,null,"2d64cfd1",null);t.default=component.exports}}]);