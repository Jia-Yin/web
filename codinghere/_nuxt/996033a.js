(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1082:function(e,t,r){"use strict";r(912)},1083:function(e,t,r){(t=r(60)(!1)).push([e.i,".container[data-v-109b0aa4]{margin:30px auto;padding:10px}input[data-v-109b0aa4]{width:50%;margin:20px auto}button[data-v-109b0aa4]{width:50%;margin:48px auto}",""]),e.exports=t},1151:function(e,t,r){"use strict";r.r(t);r(49);var n=r(8),l=r(32),o={middleware:"no_authentication",data:function(){return{email:"",localeTexts:{zh:{email:"姓名或電子郵件",query:"查詢"},en:{email:"Name or Email",query:"Query"}},localeText:null}},created:function(){this.setLocaleText()},computed:{locale:function(){return this.$store.state.params.locale}},methods:{exit:function(){this.$router.push("/exit")},resetPassword:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.c.sendPasswordResetEmail(e.remail);case 3:e.info={title:e.localeText.resetEmailTitle,message:e.localeText.resetEmailMsg},e.infoAlert=!0,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},setLocaleText:function(){"en"===this.locale?this.localeText=this.localeTexts.en:this.localeText=this.localeTexts.zh},login:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var form,r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return form=e.form,t.prev=1,t.next=4,l.c.signInWithEmailAndPassword(form.email,form.password);case 4:if(!(r=l.c.currentUser)){t.next=28;break}if(!r.emailVerified){t.next=24;break}return t.next=9,l.d.collection("users").doc(r.uid).get();case 9:if(!(n=t.sent).exists){t.next=21;break}return(o=n.data()).id=n.id,o.realrole=o.role,e.$store.commit("setData",{name:"user",value:o}),t.next=17,e.$store.dispatch("getCollection","system");case 17:e.$user("locale")&&e.$store.commit("setParam",{name:"locale",value:e.$user("locale")}),e.$router.push("/user"),t.next=22;break;case 21:e.$router.push("/reregister");case 22:t.next=26;break;case 24:e.$store.commit("setData",{name:"user",value:null}),e.emailAlert=!0;case 26:t.next=29;break;case 28:e.$store.commit("setData",{name:"user",value:null});case 29:t.next=35;break;case 31:t.prev=31,t.t0=t.catch(1),e.info={title:e.localeText.login,message:t.t0.message},e.infoAlert=!0;case 35:case"end":return t.stop()}}),t,null,[[1,31]])})))()}},watch:{locale:function(e){this.setLocaleText()}}},c=(r(1082),r(55)),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-input",{attrs:{type:"text",placeholder:e.localeText.email},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),r("b-button",{staticClass:"w-25 mx-auto",attrs:{block:"",pill:"",variant:"outline-primary"},on:{click:e.login}},[e._v("\n        "+e._s(e.localeText.query)+"\n    ")])],1)}),[],!1,null,"109b0aa4",null);t.default=component.exports},912:function(e,t,r){var content=r(1083);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(61).default)("1817bc7b",content,!0,{sourceMap:!1})}}]);