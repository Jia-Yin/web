(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1012:function(e,t,l){"use strict";l(888)},1013:function(e,t,l){(t=l(59)(!1)).push([e.i,".container-fluid[data-v-7b517717]{width:90%;margin:30px auto}.localeButton[data-v-7b517717]{text-align:right}section[data-v-7b517717]{background:green;color:#fff;text-align:center;margin:16px 0;padding:3px}li[data-v-7b517717]{margin:8px 0}button[data-v-7b517717]{min-width:100px}",""]),e.exports=t},1055:function(e,t,l){"use strict";l.r(t);l(9),l(12),l(38),l(18),l(11),l(156),l(28),l(7),l(80),l(26),l(45),l(15),l(105),l(364);var n=l(27),o=(l(54),l(14)),r=l(0),c=l(79),d=l(226),f=l(46);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(object);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,l)}return t}var v={data:function(){return{infoAlert:!1,info:{title:"",message:""},locales:{zh:"中文"},newLang:{text:"",value:""},localeTable:{localeContents:[],totalRows:1,filter:null,editable:!1,fields:[],file:null,fileContents:null,fileimport:!1},judgers:{http:[],https:[]},newhttp:null,newhttps:null,localeText:{Site_NewsManagement:"訊息管理",Site_LangsManagement:"語系管理",Site_JudgeManagement:"評判管理",Site_SiteNews:"平台訊息",Site_SupportLocales:"支援語系",Site_LocaleContents:"語系內容",Site_LocaleFilterLabel:"過濾器",Site_LocaleFilterHint:"搜尋關鍵字",Site_LocaleFilterClear:"清除",Site_LocaleField:"欄位名稱",Site_LocaleUpdateOK:"語系更新完成",Site_Edit:"編輯",Site_Add:"新增",Site_LocaleExport:"匯出",Site_LocaleImport:"匯入",Site_NewLangValue:"語言代碼",Site_Update:"更新",Site_NewLangText:"語言名稱",Site_Judggers:"評判器設定"},courseNews:"",siteNews:""}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(c.b)({user:function(e){return e.user},locale:function(e){return e.user.locale},system:function(e){return e.system}})),created:function(){this.system.locales&&this.locale in this.system.locales.support&&(this.localeText=d.a.updateParams(this.system.locales[this.locale],this.localeText)),this.system.locales&&this.system.locales.support&&(this.locales=JSON.parse(JSON.stringify(this.system.locales.support))),this.prepareLocaleContents(),this.system.judgers&&(this.judgers=JSON.parse(JSON.stringify(this.system.judgers)))},mounted:function(){this.localeTable.totalRows=this.localeTable.localeContents.length},methods:{deletehttp:function(e){this.judgers.http.splice(e,1)},inserthttp:function(){this.judgers.http.push(this.newhttp),this.newhttp=null},deletehttps:function(e){this.judgers.https.splice(e,1)},inserthttps:function(){this.judgers.https.push(this.newhttps),this.newhttps=null},judgers_update:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l=JSON.parse(JSON.stringify(e.judgers)),t.next=4,f.d.collection("system").doc("judgers").set(l);case 4:e.$store.commit("setObjItem",{obj:"system",name:"judgers",value:l}),e.infoAlert=!0,e.info={title:e.localeText.Site_Judggers,message:e.localeText.Site_LocaleUpdateOK},t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("Error",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},localeTable_export:function(){var e=this.localeTable.fields.map((function(e){return e.key})),t=[e].concat(Object(n.a)(this.localeTable.localeContents.map((function(t){var data=[];return e.forEach((function(e){return data.push(t[e])})),data})))).map((function(e){return e.join(",")})).join("\n"),l=new Blob([t],{type:"text/plain;charset=utf-8"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(l,"localeContents.csv");else{var o=window.document.createElement("a");o.href=window.URL.createObjectURL(l),o.download="localeContents.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o)}},handleFileUpload:function(){var e=this,t=new FileReader;t.onload=function(t){for(var l=[],n=t.target.result.split("\n"),o=n[0].split(","),i=1;i<n.length;i++){for(var r=n[i].split(","),c={},d=0;d<o.length;d++){var f=r[d]||"";c[o[d].trim()]=f.trim()}l.push(c)}e.localeTable.fileContents=l},t.readAsText(this.localeTable.file)},localeTable_import:function(){this.localeTable.localeContents=this.localeTable.fileContents},localeTable_add:function(){var e={field:"Field"};for(var t in this.system.locales.support)e[t]="";this.localeTable.localeContents.push(e)},localeTable_getLangObj:function(e){var t={};return this.localeTable.localeContents.forEach((function(l){l[e]&&""!=l[e].trim()&&(t[l.field]=l[e].trim())})),t},localeTable_update:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var l,n,o,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n in t.prev=0,l={},e.system.locales.support)o=e.localeTable_getLangObj(n),l[n]=o;return t.next=5,f.d.collection("system").doc("locales").update(l);case 5:r=JSON.parse(JSON.stringify(e.system.locales.support)),(c=JSON.parse(JSON.stringify(l))).support=r,e.$store.commit("setObjItem",{obj:"system",name:"locales",value:c}),e.localeText=d.a.updateParams(e.system.locales[e.locale],e.localeText),e.infoAlert=!0,e.info={title:e.localeText.Site_SupportLocales,message:e.localeText.Site_LocaleUpdateOK},t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.log("Error",t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()},prepareLocaleContents:function(){var e=[],t=[];if(this.localeTable.fields.push({key:"field",label:this.localeText.Site_LocaleField,sortable:!0}),this.system.locales.support)for(var l in this.system.locales.support){this.localeTable.fields.push({key:l,label:this.system.locales.support[l]});var n=this.system.locales[l];if(n)for(var o in n)if(t.indexOf(o)>=0){var r=t.indexOf(o);console.assert(r>=0,{field:o,exists:t}),e[r][l]=n[o]}else{t.push(o);var c={field:o};for(var d in this.system.locales.support)c[d]="";c[l]=n[o],e.push(c)}}this.localeTable.localeContents=e},delLang:function(e){this.$delete(this.locales,e)},addLang:function(){this.$set(this.locales,this.newLang.value,this.newLang.text)},updateLocaleSupport:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var l,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.system.locales){t.next=6;break}return t.next=4,f.d.collection("system").doc("locales").update({support:e.locales});case 4:t.next=8;break;case 6:return t.next=8,f.d.collection("system").doc("locales").set({support:e.locales});case 8:l=JSON.parse(JSON.stringify(e.system.locales)),n=JSON.parse(JSON.stringify(e.locales)),l.support=n,e.$store.commit("setObjItem",{obj:"system",name:"locales",value:l}),e.infoAlert=!0,e.info={title:e.localeText.Site_SupportLocales,message:e.system.locales},e.prepareLocaleContents(),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),console.log("Error",t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))()}}},h=(l(1012),l(70)),component=Object(h.a)(v,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("b-container",{attrs:{fluid:""}},[l("b-modal",{attrs:{title:e.info.title},model:{value:e.infoAlert,callback:function(t){e.infoAlert=t},expression:"infoAlert"}},[e._v(e._s(e.info.message)+"\n    ")]),e._v(" "),l("b-tabs",{attrs:{"content-class":"mt-3"}},[l("b-tab",{attrs:{title:e.localeText.Site_NewsManagement}},[l("section",[e._v(e._s(e.localeText.Site_SiteNews))]),e._v(" "),l("b-button",{attrs:{size:"sm",pill:"",variant:"primary"}},[e._v("\n                "+e._s(e.localeText.Site_Update)+"\n            ")])],1),e._v(" "),l("b-tab",{attrs:{title:e.localeText.Site_LangsManagement}},[l("section",[e._v(e._s(e.localeText.Site_SupportLocales))]),e._v(" "),l("ul",[e._l(e.locales,(function(text,t,n){return l("li",{key:"lang"+n},[e._v("\n                    "+e._s(text)+" ("+e._s(t)+")   \n                    "),l("b-link",{on:{click:function(l){return e.delLang(t)}}},[l("b-icon",{attrs:{icon:"x"}})],1)],1)})),e._v(" "),l("input",{directives:[{name:"model",rawName:"v-model",value:e.newLang.text,expression:"newLang.text"}],attrs:{placeholder:e.localeText.Site_NewLangText},domProps:{value:e.newLang.text},on:{input:function(t){t.target.composing||e.$set(e.newLang,"text",t.target.value)}}}),e._v(" "),l("input",{directives:[{name:"model",rawName:"v-model",value:e.newLang.value,expression:"newLang.value"}],attrs:{placeholder:e.localeText.Site_NewLangValue},domProps:{value:e.newLang.value},on:{input:function(t){t.target.composing||e.$set(e.newLang,"value",t.target.value)}}}),e._v(" "),l("b-button",{attrs:{size:"sm",pill:"",variant:"outline-primary"},on:{click:e.addLang}},[l("b-icon",{attrs:{icon:"plus"}})],1),e._v(" "),l("b-button",{attrs:{size:"sm",pill:"",variant:"primary"},on:{click:e.updateLocaleSupport}},[e._v("\n                    "+e._s(e.localeText.Site_Update)+"\n                ")])],2),e._v(" "),l("section",[e._v(e._s(e.localeText.Site_LocaleContents))]),e._v(" "),l("b-form-group",{staticClass:"mb-2",attrs:{label:e.localeText.Site_LocaleFilterLabel,"label-for":"filter-input","label-cols-sm":"1","label-align-sm":"left","label-size":"sm"}},[l("b-input-group",{attrs:{size:"sm"}},[l("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:e.localeText.Site_LocaleFilterHint},model:{value:e.localeTable.filter,callback:function(t){e.$set(e.localeTable,"filter",t)},expression:"localeTable.filter"}}),e._v(" "),l("b-input-group-append",[l("b-button",{on:{click:function(t){e.localeTable.filter=""}}},[e._v(e._s(e.localeText.Site_LocaleFilterClear))])],1)],1)],1),e._v(" "),l("b-table",{attrs:{striped:"",hover:"","sticky-header":"",small:"",bordered:"","head-row-variant":"info",items:e.localeTable.localeContents,fields:e.localeTable.fields,filter:e.localeTable.filter},scopedSlots:e._u([e.localeTable.editable?{key:"cell()",fn:function(t){var n=t.item,o=t.field.key;return[l("b-form-input",{model:{value:n[o],callback:function(t){e.$set(n,o,t)},expression:"item[key]"}})]}}:null],null,!0)}),e._v(" "),l("b-modal",{on:{ok:e.localeTable_import},model:{value:e.localeTable.fileimport,callback:function(t){e.$set(e.localeTable,"fileimport",t)},expression:"localeTable.fileimport"}},[l("b-form-file",{attrs:{size:"sm",state:Boolean(e.localeTable.file),accept:".csv",placeholder:"選擇檔案匯入"},on:{input:function(t){return e.handleFileUpload()}},model:{value:e.localeTable.file,callback:function(t){e.$set(e.localeTable,"file",t)},expression:"localeTable.file"}})],1),e._v(" "),l("div",{staticClass:"localeButton"},[l("b-button",{attrs:{size:"sm",pill:"",variant:"info"},on:{click:function(t){e.localeTable.editable=!e.localeTable.editable}}},[e._v(e._s(e.localeText.Site_Edit))]),e._v(" "),l("b-button",{attrs:{size:"sm",pill:"",variant:"info"},on:{click:e.localeTable_add}},[e._v(e._s(e.localeText.Site_Add))]),e._v(" "),l("b-button",{attrs:{size:"sm",pill:"",variant:"warning"},on:{click:e.localeTable_export}},[e._v(e._s(e.localeText.Site_LocaleExport))]),e._v(" "),l("b-button",{attrs:{size:"sm",pill:"",variant:"warning"},on:{click:function(t){e.localeTable.fileimport=!0}}},[e._v(e._s(e.localeText.Site_LocaleImport))]),e._v(" "),l("b-button",{attrs:{size:"sm",pill:"",variant:"success"},on:{click:e.localeTable_update}},[e._v(e._s(e.localeText.Site_Update))])],1)],1),e._v(" "),l("b-tab",{attrs:{title:e.localeText.Site_JudgeManagement}},[l("section",[e._v(e._s(e.localeText.Site_Judggers))]),e._v("\n            HTTP\n            "),e._l(e.judgers.http,(function(t,n){return l("div",{key:n,staticClass:"item"},[e._v("\n                "+e._s(n+1)+". (\n                "),l("b-link",{on:{click:function(t){return e.deletehttp(n)}}},[l("b-icon",{attrs:{icon:"trash"}})],1),e._v("\n                )   "+e._s(t)+"\n            ")],1)})),e._v(" "),l("div",{staticClass:"new"},[l("input",{directives:[{name:"model",rawName:"v-model",value:e.newhttp,expression:"newhttp"}],attrs:{size:"50",placeholder:"New WS Server"},domProps:{value:e.newhttp},on:{input:function(t){t.target.composing||(e.newhttp=t.target.value)}}}),e._v(" "),l("b-button",{attrs:{size:"sm",variant:"outline-success"},on:{click:function(t){return e.inserthttp()}}},[e._v("新增")])],1),e._v(" "),l("hr"),e._v("\n            HTTPS\n            "),e._l(e.judgers.https,(function(t,n){return l("div",{key:n+1e3,staticClass:"item"},[e._v("\n                "+e._s(n+1)+". (\n                "),l("b-link",{on:{click:function(t){return e.deletehttps(n)}}},[l("b-icon",{attrs:{icon:"trash"}})],1),e._v("\n                )   "+e._s(t)+"\n            ")],1)})),e._v(" "),l("div",{staticClass:"new"},[l("input",{directives:[{name:"model",rawName:"v-model",value:e.newhttps,expression:"newhttps"}],attrs:{size:"50",placeholder:"New WS Server"},domProps:{value:e.newhttps},on:{input:function(t){t.target.composing||(e.newhttps=t.target.value)}}}),e._v(" "),l("b-button",{attrs:{size:"sm",variant:"outline-success"},on:{click:function(t){return e.inserthttps()}}},[e._v("新增")])],1),e._v(" "),l("hr"),e._v(" "),l("div",{staticStyle:{"text-align":"center"}},[l("b-button",{attrs:{size:"sm",pill:"",center:"",variant:"primary"},on:{click:e.judgers_update}},[e._v("\n                    "+e._s(e.localeText.Site_Update)+"\n                ")])],1)],2)],1)],1)}),[],!1,null,"7b517717",null);t.default=component.exports},888:function(e,t,l){var content=l(1013);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(60).default)("81ba4f3a",content,!0,{sourceMap:!1})}}]);