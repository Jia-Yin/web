(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1026:function(e,t,n){"use strict";n(887)},1027:function(e,t,n){(t=n(59)(!1)).push([e.i,".tabs[data-v-fef5e74c]{margin-right:60px}.container-fluid[data-v-fef5e74c]{margin:16px}",""]),e.exports=t},1062:function(e,t,n){"use strict";n.r(t);var r=n(0),o=(n(54),n(14)),c=n(226),l=n(79),d=n(852),f=n(853),h=n(854),m=n(855),v=n(848),j=(n(840),n(227)),O=n.n(j);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var C={asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.store,r=n.state.params.problem,t.abrupt("return",{pstr:r});case 3:case"end":return t.stop()}}),t)})))()},data:function(){var e;return e={problem:null,pgKey:"Coding",passText:"Pass",failText:"Fail",tabIndex:0,mycode:"",lang:"c",langs:"c,cpp,py",chnlabel:"X",judging:!1,channel:null},Object(r.a)(e,"chnlabel",null),Object(r.a)(e,"result",null),Object(r.a)(e,"pass",!1),Object(r.a)(e,"correctHint","Pass"),Object(r.a)(e,"localeText",{Coding_Problem:"問題",Coding_Code:"程式",Coding_Result:"結果",Coding_Reference:"參考"}),e},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(l.b)({user:function(e){return e.user},locale:function(e){return e.user.locale},system:function(e){return e.system}})),components:{CodePanel:d.default,SubmitResult:m.default,Question:f.default,CCheetSheet:h.default},created:function(){this.system.locales&&this.locale in this.system.locales.support&&(this.localeText=c.a.updateParams(this.system.locales[this.locale],this.localeText)),this.problem=this.decode(this.pgKey,this.pstr)},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.state.system&&e.$store.state.system.judgers&&v.a.checkServer(e.$store.state.system.judgers).then((function(t){e.channel=t.best.channel;var n=e.channel.toUpperCase();"WSS"===n.substr(0,3)?e.chnlabel=n.substr(6,1):e.chnlabel=n.substr(5,1)}));case 1:case"end":return t.stop()}}),t)})))()},methods:{decode:function(e,t){return new O.a(e).decrypt(t)},checkPass:function(){this.judging=!1},checkFail:function(){this.judging=!1},submit:function(){var e=this;if(!this.judging&&this.channel){this.judging=!0;var t={answerCode:this.problem.answerCode,answerLang:this.problem.answerLang,dataCode:this.problem.dataCode,dataLang:this.problem.dataLang,sourceCode:this.mycode,sourceLang:this.lang};console.log("Cdata",t),v.a.judgeProgtest(this.channel,t).then((function(t){e.result=t,e.tabIndex=2,e.judging=!1,console.log("Result",t),"AC"==t.RunStatus&&(e.pass=!0)})).catch((function(t){e.judging=!1,console.log("Judge Error:",t)}))}},setLang:function(e){this.lang=e}}},w=(n(1026),n(70)),component=Object(w.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("b-tabs",{attrs:{card:""},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("b-tab",{attrs:{title:e.localeText.Coding_Problem}},[n("Question",{attrs:{problem:e.problem}})],1),e._v(" "),n("b-tab",{attrs:{title:e.localeText.Coding_Code}},[n("CodePanel",{attrs:{height:600,submit:e.submit,judging:e.judging,langs:e.langs,channel:e.chnlabel},on:{langChanged:e.setLang},model:{value:e.mycode,callback:function(t){e.mycode=t},expression:"mycode"}})],1),e._v(" "),n("b-tab",{attrs:{title:e.localeText.Coding_Result}},[n("SubmitResult",{attrs:{result:e.result}})],1),e._v(" "),n("b-tab",{attrs:{title:e.localeText.Coding_Reference}},[n("CCheetSheet")],1)],1)],1)}),[],!1,null,"fef5e74c",null);t.default=component.exports;installComponents(component,{Question:n(853).default,CodePanel:n(852).default,SubmitResult:n(855).default,CCheetSheet:n(854).default})},840:function(e,t,n){"use strict";n(9),n(12),n(22),n(87),n(842),n(15);var r={pad:function(e){return("0"+e).slice(-2)},mmss:function(e){var t=Math.floor(e/60);return e%=60,"".concat(this.pad(t),":").concat(this.pad(e))},hhmmss:function(e){var t=Math.floor(e/60);e%=60;var n=Math.floor(t/60);return t%=60,"".concat(this.pad(n),":").concat(this.pad(t),":").concat(this.pad(e))},getToday:function(){var e=new Date,dd=String(e.getDate()).padStart(2,"0"),t=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+t+dd},getNow:function(){var e=new Date;return""+e.getFullYear()+this.pad(e.getMonth()+1)+this.pad(e.getDate())+this.pad(e.getHours())+this.pad(e.getMinutes())+this.pad(e.getSeconds())},obj2arr:function(e){var t=[],n=Object.keys(e);return n.sort(),n.forEach((function(n){t.push(Object.assign({id:n},e[n]))})),t},arr2obj:function(e){var t={};return e.forEach((function(e){var n=JSON.parse(JSON.stringify(e)),r=e.id;delete n.id,t[r]=n})),t}};t.a=r},848:function(e,t,n){"use strict";n(38),n(28),n(7),n(20),n(26),n(49);var r=n(865),o=n.n(r),c={checkServer:function(e){return console.log("Servers to Check:",e),new Promise((function(t,n){var r="ws://",c=e.http;"https:"==document.location.protocol&&(c=e.https,r="wss://");var l=c.length,d=100,f=null,h=0,m=!1;window.setTimeout((function(){return m=!0}),2e3);for(var v=[],j=function(i){var e=r+c[i],j=e+"/submit",O=Math.random();console.log("Check:",j);var y=new o.a(j,{packMessage:function(data){return data.content},unpackMessage:function(data){return data},attachRequestId:function(data,e){return Object.assign({id:e},data)},extractRequestId:function(data){return O}});y.open().then((function(){return y.sendRequest({content:"HELLO:"+c[i]},{requestId:O})})).then((function(r){console.log("My Response from:",r);var o=r.split("#"),j=parseInt(o[1],10);if(v.push({server:c[i],busy:j}),j<d)d=j,f=e;else if(j===d){Math.random()<.4&&(f=e)}if(h++,m||h===l||3===h)return d<99?void t({best:{channel:f+"/submit",busy:d},available:v}):void n("Judger not available!")})).catch((function(e){if(h++,m||h===l||3===h)return d<99?void t({best:{channel:f+"/submit",busy:d},available:v}):void n("Judger not available!")}))},i=0;i<l;i++)j(i)}))},judgeFunctest:function(e,code){var content={sourcecode:code,sourcelang:"cpp",testdata:{style:"RUN",testsets:[{testcases:[{input:""}]}]}};return new Promise((function(t,n){if(e){var r=Math.random(),c=new o.a(e,{packMessage:function(data){return"CODE:"+JSON.stringify(data.content)},unpackMessage:function(data){return data},attachRequestId:function(data,e){return Object.assign({id:e},data)},extractRequestId:function(data){return r}});c.open().then((function(){return c.sendRequest({content:content},{requestId:r})})).then((function(e){try{var r=JSON.parse(e).RunStatus;if(r.indexOf('["AC"]')>=0)return void t("AC");if(r.indexOf("Wrong")>=0){var o=r.replace(/\\n/g,"\n");return o=(o=o.replace('["',"")).replace('"]',""),void t(o)}return void t(r)}catch(e){return console.log("Error:",e),void n(e)}})).catch((function(e){console.log("Error:",e),n(e)}))}else n("Null judger.")}))},judgeProgtest:function(e,t){var n=Math.random();return new Promise((function(r,c){if(e){var l=new o.a(e,{packMessage:function(data){return"CODE:"+JSON.stringify(data.content)},unpackMessage:function(data){return data},attachRequestId:function(data,e){return Object.assign({id:e},data)},extractRequestId:function(data){return n}});l.open().then((function(){return l.sendRequest({content:t},{requestId:n})})).then((function(e){try{return void r(JSON.parse(e))}catch(e){return console.log("Error:",e),void c(e)}})).catch((function(e){console.log("Error:",e),c(e)}))}else c("Null judger.")}))}};t.a=c},887:function(e,t,n){var content=n(1027);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(60).default)("e76eb7fe",content,!0,{sourceMap:!1})}}]);