(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1014:function(e,t,r){"use strict";r(879)},1015:function(e,t,r){(t=r(59)(!1)).push([e.i,".container[data-v-469fd9f7]{margin:30px auto;padding:10px}form[data-v-469fd9f7]{max-width:600px;margin:0 auto}input[data-v-469fd9f7]{margin-top:36px}button[data-v-469fd9f7]{width:50%;margin:36px auto}",""]),e.exports=t},1061:function(e,t,r){"use strict";r.r(t);r(54);var o=r(14),l=r(46),n={middleware:"no_authentication",data:function(){return{emailAlert:!1,infoAlert:!1,info:{title:"",message:""},resetPass:!1,remail:"",loginForm:{email:"",password:""},localeTexts:{zh:{email:"電子郵件",password:"密碼",login:"登入",forgot:"忘記密碼",register:"註冊",emailVerify:"電子郵件尚未確認，按下可重送確認信件",verifyTitle:"密碼檢查",verifyFail:"檢查未通過",resetEmailTitle:"密碼重設",resetEmailMsg:"重設郵件已送出！",resetEmailText:"請填入註冊時所用的 Email，系統會寄送重設密碼的連結到你的 Email 信箱。"},en:{email:"Email",password:"Password",login:"Login",forgot:"Forgot Password",register:"Register",emailVerify:"Email Not Verified! Click to resend the email!",verifyTitle:"Password Check",verifyFail:"Invalid User/Password",resetEmailTitle:"Reset password",resetEmailMsg:"Reset email for password has been sent!",resetEmailText:"Fill in the registered Email, the system will send a reset email for you."}},localeText:null}},created:function(){this.setLocaleText()},computed:{locale:function(){return this.$store.state.params.locale}},methods:{resetPassword:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.c.sendPasswordResetEmail(e.remail);case 3:e.info={title:e.localeText.resetEmailTitle,message:e.localeText.resetEmailMsg},e.infoAlert=!0,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},setLocaleText:function(){"en"===this.locale?this.localeText=this.localeTexts.en:this.localeText=this.localeTexts.zh},sendEmail:function(){l.c.currentUser.sendEmailVerification(),this.doLogout()},doLogout:function(){this.$store.dispatch("logout"),this.emailAlert=!1},login:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("login",e.loginForm);case 3:if("OK"!=(r=t.sent)){t.next=17;break}return t.prev=5,t.next=8,e.$store.dispatch("getCollection","system");case 8:e.$store.state.user&&e.$store.state.user.locale&&e.$store.commit("setParam",{name:"locale",value:e.$store.state.user.locale}),e.$router.push("/user"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),console.log("Error",t.t0);case 15:t.next=18;break;case 17:"EmailNotVerified"==r&&(e.emailAlert=!0);case 18:t.next=24;break;case 20:t.prev=20,t.t1=t.catch(0),e.info={title:e.localeText.verifyTitle,message:e.localeText.verifyFail},e.infoAlert=!0;case 24:case"end":return t.stop()}}),t,null,[[0,20],[5,12]])})))()}},watch:{locale:function(e){this.setLocaleText()}}},c=(r(1014),r(70)),component=Object(c.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-modal",{attrs:{title:e.info.title},model:{value:e.infoAlert,callback:function(t){e.infoAlert=t},expression:"infoAlert"}},[e._v(e._s(e.info.message)+"\n    ")]),e._v(" "),r("b-modal",{attrs:{title:e.localeText.resetEmailTitle},on:{ok:e.resetPassword},model:{value:e.resetPass,callback:function(t){e.resetPass=t},expression:"resetPass"}},[e._v("\n      "+e._s(e.localeText.resetEmailText)+"\n        "),r("b-input",{model:{value:e.remail,callback:function(t){e.remail=t},expression:"remail"}})],1),e._v(" "),r("b-alert",{attrs:{variant:"danger",dismissible:""},on:{dismissed:e.doLogout},model:{value:e.emailAlert,callback:function(t){e.emailAlert=t},expression:"emailAlert"}},[r("b-button",{attrs:{variant:"success"},on:{click:e.sendEmail}},[e._v("\n            "+e._s(e.localeText.emailVerify)+"\n        ")])],1),e._v(" "),r("b-form",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.email,expression:"loginForm.email"}],staticClass:"form-control form-control-md",attrs:{type:"email",placeholder:e.localeText.email},domProps:{value:e.loginForm.email},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"email",t.target.value)}}}),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.password,expression:"loginForm.password"}],staticClass:"form-control form-control-md",attrs:{type:"password",placeholder:e.localeText.password},domProps:{value:e.loginForm.password},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"password",t.target.value)}}}),e._v(" "),r("b-button",{attrs:{block:"",pill:"",variant:"outline-primary"},on:{click:e.login}},[e._v("\n            "+e._s(e.localeText.login)+"\n        ")]),e._v(" "),r("p",{staticClass:"mt-4",attrs:{align:"center"}},[r("b-link",{attrs:{to:"/register"}},[e._v("\n                "+e._s(e.localeText.register)+"\n            ")]),e._v("\n                 \n            "),r("b-link",{on:{click:function(t){e.resetPass=!0}}},[e._v("\n                "+e._s(e.localeText.forgot)+"\n            ")])],1)],1)],1)}),[],!1,null,"469fd9f7",null);t.default=component.exports},879:function(e,t,r){var content=r(1015);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(60).default)("ed6eb540",content,!0,{sourceMap:!1})}}]);