(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1074:function(t,e,n){var content=n(1161);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(57).default)("d2a0a41a",content,!0,{sourceMap:!1})},1160:function(t,e,n){"use strict";n(1074)},1161:function(t,e,n){(e=n(56)(!1)).push([t.i,'[data-v-64395ec6] h1{color:#00f;font-family:"Arial";font-size:120%;text-decoration:underline;margin:24px 0}[data-v-64395ec6] h2{color:#ff4500;font-size:100%;margin:16px 0 8px}',""]),t.exports=e},1398:function(t,e,n){"use strict";n.r(e);n(10),n(30),n(27),n(79),n(87),n(368),n(49);var r=n(7),o=n(26),c={data:function(){return{infoAlert:!1,info:{title:"",message:""},locales:{zh:"中文"},startDate:"",endDate:"",probSets:{},localeText:{DataMan_Submits:"提交記錄",DataMan_Problems:"題庫內容",DataMan_SynError:"語法錯誤規則",DataMan_StatusMsg:"評判狀態訊息",DataMan_StartDate:"開始日期",DataMan_EndDate:"結束日期",SYS_Export:"匯出",SYS_Download:"下載"}}},created:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.d.collection("problems").get();case 2:if(!(n=e.sent).empty){for(r={},i=0;i<n.docs.length;i++)"STAT"!==(c=n.docs[i]).id&&(r[c.id]=c.data());t.probSets=r}case 4:case"end":return e.stop()}}),e)})))()},methods:{getSubmits:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.d.collection("submits").where("created",">",t.startDate).where("created","<",t.endDate+"240000").get();case 2:if(n=e.sent,r={},!n.empty)for(i=0;i<n.docs.length;i++)r[n.docs[i].id]=n.docs[i].data();return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()},getProblems:function(data){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="problems_".concat(data.name,".json"),e.next=3,t.downloadFile(JSON.stringify(data),n);case 3:case"end":return e.stop()}}),e)})))()},downloadFile:function(data,t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Blob([data],{type:"text/plain;charset=utf-8"}),window.navigator.msSaveOrOpenBlob?window.navigator.msSaveBlob(n,t):((r=window.document.createElement("a")).href=window.URL.createObjectURL(n),r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r));case 2:case"end":return e.stop()}}),e)})))()},exportSubmits:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.startDate&&""!==t.endDate){e.next=2;break}return e.abrupt("return");case 2:return n="submits_".concat(t.startDate,"_").concat(t.endDate,".json"),e.next=5,t.getSubmits();case 5:return data=e.sent,e.next=8,t.downloadFile(JSON.stringify(data),n);case 8:case"end":return e.stop()}}),e)})))()}}},l=(n(1160),n(55)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{attrs:{fluid:""}},[n("b-modal",{attrs:{title:t.info.title},model:{value:t.infoAlert,callback:function(e){t.infoAlert=e},expression:"infoAlert"}},[t._v(t._s(t.info.message)+"\n    ")]),t._v(" "),n("div",[n("h1",[t._v(t._s(t.localeText.DataMan_Submits))]),t._v(" "),n("div",{staticClass:"d-flex justify-content-start"},[n("span",[t._v(t._s(t.localeText.SYS_Download))]),t._v(" "),n("b-input",{staticClass:"w-25 ml-3",attrs:{size:"sm",placeholder:t.localeText.DataMan_StartDate},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v(" "),n("b-input",{staticClass:"w-25 ml-3",attrs:{size:"sm",placeholder:t.localeText.DataMan_EndDate},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),t._v(" "),n("b-button",{staticClass:"ml-3",attrs:{size:"sm",variant:"success"},on:{click:t.exportSubmits}},[t._v(t._s(t.localeText.SYS_Export))])],1)]),t._v(" "),n("div",[n("h1",[t._v(t._s(t.localeText.DataMan_Problems))]),t._v(" "),t._l(t.probSets,(function(e,r,o){return n("div",{key:"a"+r},[n("span",[t._v(t._s(o+1)+". "+t._s(e.name))]),t._v(" "),n("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:"success"},on:{click:function(n){return t.getProblems(e)}}},[t._v(t._s(t.localeText.SYS_Export))])],1)}))],2),t._v(" "),n("div",[n("h1",[t._v(t._s(t.localeText.DataMan_SynError))]),t._v(" "),n("b-link",{attrs:{to:"/admin/dataman/synerror"}},[t._v(t._s(t.localeText.DataMan_SynError))])],1),t._v(" "),n("div",[n("h1",[t._v(t._s(t.localeText.DataMan_StatusMsg))]),t._v(" "),n("b-link",{attrs:{to:"/admin/dataman/status_msg"}},[t._v(t._s(t.localeText.DataMan_StatusMsg))])],1)],1)}),[],!1,null,"64395ec6",null);e.default=component.exports}}]);