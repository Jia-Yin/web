(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{1059:function(e,t,r){var content=r(1254);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(61).default)("4da4d5e4",content,!0,{sourceMap:!1})},1253:function(e,t,r){"use strict";r(1059)},1254:function(e,t,r){(t=r(60)(!1)).push([e.i,'[data-v-8eeb64b6] h1{color:#00f;font-family:"Arial";font-size:120%;margin:24px 0;padding-bottom:3px;border-bottom:1px solid #000}[data-v-8eeb64b6] h2{color:#ff4500;font-size:110%;margin:16px 0 8px}.container[data-v-8eeb64b6]{margin:30px;max-width:800px;text-align:justify}',""]),e.exports=t},1324:function(e,t,r){"use strict";r.r(t);r(29),r(28),r(104),r(49);var n=r(8),o=r(844),c=r(32),l={data:function(){return{infoAlert:!1,info:{},pgNews:null,nocourse:!0,selected:null,showCodebox:!1,enterCode:null,coursesAll:{},showCourses:!1,ncourses:null,localeText:{UserCourse_NoCourse:"尚未選擇任何課程",UserCourse_NoNews:"沒有課程訊息"}}},created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.localeText=e.$updateLocaleText(e.localeText),(r=e.$system("setting"))&&r.pgNews&&(e.pgNews=e.$copyObject(r.pgNews)),e.updateCoursesAll();case 4:case"end":return t.stop()}}),t)})))()},methods:{updateCoursesAll:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,i,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={},n=["courses","teach","assist"],i=0;case 3:if(!(i<n.length)){t.next=20;break}if(o=n[i],!e.$user(o)){t.next=17;break}t.t0=regeneratorRuntime.keys(e.$user(o));case 7:if((t.t1=t.t0()).done){t.next=17;break}if("playground"!=(c=t.t1.value)){t.next=11;break}return t.abrupt("continue",7);case 11:if(r[c]){t.next=15;break}return t.next=14,e.$store.dispatch("getCourse",c);case 14:r[c]=t.sent;case 15:t.next=7;break;case 17:i++,t.next=3;break;case 20:e.coursesAll=r;case 21:case"end":return t.stop()}}),t)})))()},selectCourse:function(e,t){this.selected&&this.$set(this.ncourses[this.selected.key],"variant",null),this.selected={key:e,course:t},this.$set(this.ncourses[this.selected.key],"variant","danger"),this.showCodebox=!0},enrollCourse:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,l,d,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.selected.course.enrollCode!=e.enterCode){t.next=21;break}return e.info={title:"Select Course",message:"OK"},r={},e.$user("courses")&&(r=e.$copyObject(e.$user("courses"))),r[e.selected.key]={name:e.selected.course.name},t.next=7,c.d.collection("users").doc(e.$user("id")).update({courses:r,updated:o.a.getNow()});case 7:return e.$store.commit("setObjItem",{obj:"user",name:"courses",value:r}),n=3,e.selected.course.queueNumber&&(n=e.selected.course.queueNumber),l="queue"+(1+Math.floor(Math.random()*n)),d="S_"+e.$user("id"),(f={})[d]={name:e.$user("name"),stdID:e.$user("stdID")},t.next=16,c.d.collection("courses").doc(e.selected.key).collection("tasks").doc(l).update(f);case 16:e.updateCoursesAll(),e.infoAlert=!0,e.showCourses=!1,t.next=23;break;case 21:e.info={title:"Select Course",message:"Fail"},e.infoAlert=!0;case 23:case"end":return t.stop()}}),t)})))()},addNewCourse:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ncourses){t.next=6;break}return t.next=3,e.$store.dispatch("getCourse","LIST");case 3:for(r in e.ncourses=t.sent,e.ncourses.playground&&delete e.ncourses.playground,e.$user("courses"))e.ncourses[r]&&delete e.ncourses[r];case 6:e.showCourses=!0;case 7:case"end":return t.stop()}}),t)})))()}}},d=(r(1253),r(55)),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-modal",{attrs:{title:e.info.title},model:{value:e.infoAlert,callback:function(t){e.infoAlert=t},expression:"infoAlert"}},[e._v(e._s(e.info.message)+"\n    ")]),e._v(" "),e.pgNews?r("div",{domProps:{innerHTML:e._s(e.$md.render(e.$selectUserLocaleText(e.pgNews)))}}):r("div",[e._v(e._s(e.localeText.UserCourse_NoNews))]),e._v(" "),e.coursesAll?r("div",{staticClass:"mt-5"},e._l(e.coursesAll,(function(t,n){return r("div",{key:n},[r("h1",[e._v(e._s(t.name))]),e._v(" "),t.news?r("div",{domProps:{innerHTML:e._s(e.$md.render(e.$selectUserLocaleText(t.news)))}}):r("div",[e._v(e._s(e.localeText.UserCourse_NoNews))])])})),0):e._e(),e._v(" "),r("p",{staticClass:"my-5",attrs:{align:"center"}},[r("b-button",{attrs:{pill:"",variant:"success"},on:{click:e.addNewCourse}},[e._v("Add New Course")])],1),e._v(" "),e.showCourses?r("div",[r("b-row",{staticClass:"mt-2"},[r("b-col",{attrs:{cols:"5"}},e._l(e.ncourses,(function(t,n,o){return r("div",{key:n},[r("span",{staticClass:"mr-2"},[e._v(e._s(o+1)+".")]),r("b-link",{class:"text-"+t.variant,on:{click:function(r){return e.selectCourse(n,t)}}},[e._v(e._s(t.name))])],1)})),0),e._v(" "),e.showCodebox?r("b-col",[r("p",[e._v("Enroll Code: "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.enterCode,expression:"enterCode"}],domProps:{value:e.enterCode},on:{input:function(t){t.target.composing||(e.enterCode=t.target.value)}}})]),e._v(" "),r("p",{attrs:{align:"center"}},[r("b-button",{attrs:{variant:"success",size:"sm"},on:{click:e.enrollCourse}},[e._v("Enroll")])],1)]):e._e()],1)],1):e._e()],1)}),[],!1,null,"8eeb64b6",null);t.default=component.exports},844:function(e,t,r){"use strict";r(10),r(14),r(22),r(103),r(9),r(845),r(27),r(15);var n=r(227),o=r.n(n),c={pad:function(e){return("0"+e).slice(-2)},mmss:function(e){var t=Math.floor(e/60);return e%=60,"".concat(this.pad(t),":").concat(this.pad(e))},hhmmss:function(e){var t=Math.floor(e/60);e%=60;var r=Math.floor(t/60);return t%=60,"".concat(this.pad(r),":").concat(this.pad(t),":").concat(this.pad(e))},getToday:function(){var e=new Date,dd=String(e.getDate()).padStart(2,"0"),t=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+t+dd},getNow:function(){var e=new Date;return""+e.getFullYear()+this.pad(e.getMonth()+1)+this.pad(e.getDate())+this.pad(e.getHours())+this.pad(e.getMinutes())+this.pad(e.getSeconds())},obj2arr:function(e){var t=[],r=Object.keys(e);return r.sort(),r.forEach((function(r){t.push(Object.assign({id:r},e[r]))})),t},arr2obj:function(e){var t={};return e.forEach((function(e){var r=JSON.parse(JSON.stringify(e)),n=e.id;delete r.id,t[n]=r})),t},getOptions:function(e){var t=[];return e.split("#@@#").forEach((function(e){var s=e.split("#@");t.push({text:s[0],value:s[1]})})),t},findIdPos:function(e,t){if(!e)return-1;for(var r=0;r<e.length;r++)if(t==e[r].id)return r;return-1},encode:function(e,t){return new o.a(e).encrypt(t)},decode:function(e,t){return new o.a(e).decrypt(t)}};t.a=c},845:function(e,t,r){"use strict";var n=r(7),o=r(846).start;n({target:"String",proto:!0,forced:r(847)},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},846:function(e,t,r){var n=r(50),o=r(228),c=r(52),l=Math.ceil,d=function(e){return function(t,r,d){var f,v,h=String(c(t)),m=h.length,x=void 0===d?" ":String(d),w=n(r);return w<=m||""==x?h:(f=w-m,(v=o.call(x,l(f/x.length))).length>f&&(v=v.slice(0,f)),e?h+v:v+h)}};e.exports={start:d(!1),end:d(!0)}},847:function(e,t,r){var n=r(127);e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)}}]);