(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{1109:function(e,t,r){var content=r(1309);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(57).default)("3ac68648",content,!0,{sourceMap:!1})},1308:function(e,t,r){"use strict";r(1109)},1309:function(e,t,r){(t=r(56)(!1)).push([e.i,"[data-v-12f9adb0] table td{padding:6px}.container-fluid[data-v-12f9adb0]{margin-top:30px}.pdescription[data-v-12f9adb0]{width:100%;height:300px}.titleLabel[data-v-12f9adb0]{width:100px;margin:0 16px 24px 0;text-align:right}.titleLabel[data-v-12f9adb0],[data-v-12f9adb0] h1{display:inline-block}[data-v-12f9adb0] h1{color:#ff4500;font-size:110%;margin:12px 0 6px}",""]),e.exports=t},1392:function(e,t,r){"use strict";r.r(t);r(156),r(86),r(27),r(9),r(42),r(856),r(20),r(29),r(46),r(49);var o=r(7),n=r(26),l=r(913),c=r(855),m=(r(867),r(859)),d=r(860),f={components:{ProblemEditor:l.default,ProblemTable:m.default,ProblemSelector:d.default},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$content,t.next=3,r("playground").fetch();case 3:return o=t.sent,t.abrupt("return",{playground:o});case 5:case"end":return t.stop()}}),t)})))()},data:function(){return{course:{},curPSet:{},curPSetID:null,editMode:!1,problemTab:0,pgKey:"CHProblem",lastPID:0,problems:[],pgproblems:[],pgselected:null,psselected:null,pmText:"新增",infoAlert:!1,info:{title:"",message:""},problem:{title:null,description:null,answerLang:"c",answerCode:"",dataLang:"py",dataCode:"",cmpMode:null,timeLimit:null,memoryLimit:null,outputLimit:null,tags:""},localeText:{AdminProblem_Playground:"練習廣場",AdminProblem_ProbEdit:"題目編修",AdminProblem_ProbList:"題庫管理",Common_Edit:"編輯",Common_Copy:"複製"}}},computed:{cid:function(){return this.$route.params.id}},created:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,l,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.localeText=e.$updateLocaleText(e.localeText),t.next=3,e.$store.dispatch("getCourse",e.cid);case 3:if(e.course=t.sent,r=e.course.problemSets,1!==(o=Object.keys(r)).length){t.next=13;break}return e.curPSetID=o[0],e.curPSet=r[e.curPSetID],t.next=11,n.d.collection("problems").doc(e.curPSetID).get();case 11:(l=t.sent).exists&&(m=l.data().problems)&&(e.problems=c.a.obj2arr(m),e.lastPID=e.problems.length);case 13:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{selectDone:function(e){this.unitForm.probs=e,this.selUnitProb=!1},openDataFunc:function(){var e=this.$router.resolve({path:"/teacher/datafunc"});window.open(e.href,"_blank")},pmReset:function(){this.editMode=!1,this.pmText="新增"},updateProblem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o,l,m,d,f,h,P,x,v;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.d.collection("problems").doc(t.curPSetID).get();case 2:if((o=r.sent).exists||console.log("No Problem Set: ",t.curPSetID),l=o.data(),m=l.problems,t.problemMap?(t.problems=c.a.obj2arr(m),t.lastPID=t.problems.length):(t.problems=[],t.lastPID=0),!t.editMode){r.next=19;break}return d=t.$copyObject(e),d=t.copyAndTags2Arr(d),(f=c.a.findIdPos(t.problems,d.id))>=0&&t.problems.splice(f,1,d),h=c.a.arr2obj(t.problems),r.next=15,n.d.collection("problems").doc(t.curPSetID).update({problems:h});case 15:t.infoAlert=!0,t.info={title:"Update",message:"OK"},r.next=30;break;case 19:return t.lastPID+=1,P=t.curPSetID+t.lastPID.toString().padStart(3,"0"),(x=t.$copyObject(e)).id=P,x=t.copyAndTags2Arr(x),t.problems.push(x),v=c.a.arr2obj(t.problems),r.next=28,n.d.collection("problems").doc(t.curPSetID).update({problems:v});case 28:t.infoAlert=!0,t.info={title:"Create",message:"OK"};case 30:case"end":return r.stop()}}),r)})))()},copyProblem:function(e){this.problem=e,this.editMode=!1,this.pmText="新增",this.problemTab=2},editProblem:function(e){this.problem=e,this.editMode=!0,this.pmText="更新",this.problemTab=2},copyAndTags2Arr:function(e){var t=this.$copyObject(e);if(t.tags&&!(t.tags instanceof Array)){var r=t.tags.trim();r.length>0?(r=r.replace(","," "),t.tags=r.split(/\s+/)):delete t.tags}return t}}},h=(r(1308),r(55)),component=Object(h.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-modal",{attrs:{title:e.info.title},model:{value:e.infoAlert,callback:function(t){e.infoAlert=t},expression:"infoAlert"}},[e._v(e._s(e.info.message))]),e._v(" "),r("b-tabs",{attrs:{"content-class":"mt-3"},model:{value:e.problemTab,callback:function(t){e.problemTab=t},expression:"problemTab"}},[r("h1",[e._v(e._s(e.curPSet.name))]),e._v(" "),r("b-tab",{attrs:{title:e.localeText.AdminProblem_ProbList}},[e.problems.length>0?r("problem-table",{attrs:{problems:e.problems,showID:"",showFilter:"",showDetail:"",editProblem:e.editProblem,copyProblem:e.copyProblem}}):r("div",[r("p",[e._v("Currently there is no problems.")])])],1),e._v(" "),r("b-tab",{attrs:{title:e.localeText.AdminProblem_ProbEdit}},[r("div",{staticClass:"mb-3 d-flex justify-content-between"},[r("b-button",{attrs:{flex:"",size:"sm",variant:"success"},on:{click:e.openDataFunc}},[e._v("DOC")])],1),e._v(" "),r("problem-editor",{attrs:{problem:e.problem,okText:e.pmText},on:{OK:e.updateProblem,Reset:e.pmReset}})],1)],1)],1)}),[],!1,null,"12f9adb0",null);t.default=component.exports;installComponents(component,{ProblemTable:r(859).default,ProblemEditor:r(913).default})}}]);