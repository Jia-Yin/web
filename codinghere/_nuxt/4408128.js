(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1009:function(e,t,r){"use strict";r(888)},1010:function(e,t,r){(t=r(59)(!1)).push([e.i,"[data-v-1436f093] h1{color:#ff4500;font-size:110%;margin:12px 0 6px}",""]),e.exports=t},1011:function(e,t,r){"use strict";r(889)},1012:function(e,t,r){(t=r(59)(!1)).push([e.i,"[data-v-05acfe91] .itemList{margin:12px 0}.container-fluid[data-v-05acfe91]{margin-top:30px}.pdescription[data-v-05acfe91]{width:100%;height:300px}.titleLabel[data-v-05acfe91]{display:inline-block;width:100px;margin:0 16px 24px 0;text-align:right}[data-v-05acfe91] h1{color:#ff4500;font-size:110%;margin:12px 0 6px}",""]),e.exports=t},1013:function(e,t,r){"use strict";r(890)},1014:function(e,t,r){(t=r(59)(!1)).push([e.i,"[data-v-a3f1f08a] table td{padding:6px}.container-fluid[data-v-a3f1f08a]{margin-top:30px}.pdescription[data-v-a3f1f08a]{width:100%;height:300px}.titleLabel[data-v-a3f1f08a]{width:100px;margin:0 16px 24px 0;text-align:right}.titleLabel[data-v-a3f1f08a],[data-v-a3f1f08a] h1{display:inline-block}[data-v-a3f1f08a] h1{color:#ff4500;font-size:110%;margin:12px 0 6px}",""]),e.exports=t},1057:function(e,t,r){"use strict";r.r(t);r(156),r(28),r(7),r(41),r(80),r(841),r(20),r(26),r(45),r(105),r(364);var o=r(0),n=(r(54),r(14)),l=r(79),c=r(226),m=r(46),f=r(875),d=r(840),h=(r(850),r(861)),v=r(905);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var P={components:{ProblemEditor:f.default,ProblemTable:h.default,ProblemSelector:v.default},asyncData:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$content,t.next=3,r("playground").fetch();case 3:return o=t.sent,t.abrupt("return",{playground:o});case 5:case"end":return t.stop()}}),t)})))()},data:function(){return{editMode:!1,problemTab:0,pgKey:"CHProblem",lastPID:0,problems:[],pgproblems:[],pgselected:null,psselected:null,pmText:"新增",infoAlert:!1,info:{title:"",message:""},locales:[{zh:"中文"}],problem:{title:null,description:null,answerLang:"c",answerCode:"",dataLang:"py",dataCode:"",cmpMode:null,timeLimit:null,memoryLimit:null,outputLimit:null,tags:""},localeText:{AdminProblem_Playground:"練習廣場",AdminProblem_ProbEdit:"題目編修",AdminProblem_ProbList:"題庫管理",Common_Edit:"編輯",Common_Copy:"複製"}}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(l.b)({user:function(e){return e.user},locale:function(e){return e.user.locale},system:function(e){return e.system}})),created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,o,n,l,f,i,h,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.system.locales&&e.locale in e.system.locales.support)for(r in e.localeText=c.a.updateParams(e.system.locales[e.locale],e.localeText),e.locales=[],e.system.locales.support)e.locales.push({key:r,label:e.system.locales.support[r]});return t.next=3,m.d.collection("problems").doc("BASE").get();case 3:if(o=t.sent,n=o.data(),o.exists&&(e.problems=d.a.obj2arr(n),e.lastPID=e.problems.length),!e.playground){t.next=23;break}l=e.playground.DATA,f=d.a.decode(e.pgKey,l),i=0;case 10:if(!(i<f.length)){t.next=23;break}h=f[i].id,v=0;case 13:if(!(v<e.problems.length)){t.next=20;break}if(e.problems[v].id!=h){t.next=17;break}return e.pgproblems.push(e.problems[v]),t.abrupt("break",20);case 17:v++,t.next=13;break;case 20:i++,t.next=10;break;case 23:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{openDataFunc:function(){var e=this.$router.resolve({path:"/admin/datafunc"});window.open(e.href,"_blank")},pmReset:function(){this.editMode=!1,this.pmText="新增",this.problemTab=3},updateProblem:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var o,i,n,l,c,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.editMode){r.next=18;break}o=JSON.parse(JSON.stringify(e)),o=t.copyAndTags2Arr(o),i=0;case 4:if(!(i<t.problems.length)){r.next=11;break}if(t.problems[i].id!=o.id){r.next=8;break}return t.problems.splice(i,1,o),r.abrupt("break",11);case 8:i++,r.next=4;break;case 11:return n=d.a.arr2obj(t.problems),r.next=14,m.d.collection("problems").doc("BASE").set(n);case 14:t.infoAlert=!0,t.info={title:"Update",message:"OK"},r.next=29;break;case 18:return t.lastPID+=1,l="BASE"+t.lastPID.toString().padStart(3,"0"),(c=JSON.parse(JSON.stringify(e))).id=l,c=t.copyAndTags2Arr(c),t.problems.push(c),f=d.a.arr2obj(t.problems),r.next=27,m.d.collection("problems").doc("BASE").set(f);case 27:t.infoAlert=!0,t.info={title:"Create",message:"OK"};case 29:case"end":return r.stop()}}),r)})))()},copyProblem:function(e){this.problem=e,this.editMode=!1,this.pmText="新增",this.problemTab=2},editProblem:function(e){this.problem=e,this.editMode=!0,this.pmText="更新",this.problemTab=2},copyAndTags2Arr:function(e){var t=JSON.parse(JSON.stringify(e));if(t.tags&&!(t.tags instanceof Array)){var r=t.tags.trim();r.length>0?(r=r.replace(","," "),t.tags=r.split(/\s+/)):delete t.tags}return t},PGProblemGenerate:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r='{\n    "KEY": "'+e.pgKey+'",\n    "DATA": "'+d.a.encode(e.pgKey,JSON.stringify(e.pgproblems))+'"\n}',"playground.json",o=new Blob([r],{type:"text/plain;charset=utf-8"}),window.navigator.msSaveOrOpenBlob?window.navigator.msSaveBlob(o,"playground.json"):((n=window.document.createElement("a")).href=window.URL.createObjectURL(o),n.download="playground.json",document.body.appendChild(n),n.click(),document.body.removeChild(n));case 4:case"end":return t.stop()}}),t)})))()}}},w=(r(1013),r(70)),component=Object(w.a)(P,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-modal",{attrs:{title:e.info.title},model:{value:e.infoAlert,callback:function(t){e.infoAlert=t},expression:"infoAlert"}},[e._v(e._s(e.info.message))]),e._v(" "),r("b-tabs",{attrs:{"content-class":"mt-3"},model:{value:e.problemTab,callback:function(t){e.problemTab=t},expression:"problemTab"}},[e.user&&"admin"==e.user.role?r("b-tab",{attrs:{title:e.localeText.AdminProblem_Playground}},[r("problem-selector",{attrs:{oriProblems:e.problems,selProblems:e.pgproblems,selText:"Playground",OKText:"Generate",OK:e.PGProblemGenerate}}),e._v(" "),r("hr")],1):e._e(),e._v(" "),r("b-tab",{attrs:{title:e.localeText.AdminProblem_ProbList}},[r("h1",{staticClass:"mb-3"},[e._v("Set = BASE")]),e._v(" "),e.problems.length>0?r("problem-table",{attrs:{problems:e.problems,showID:"",showFilter:"",showDetail:"",editProblem:e.editProblem,copyProblem:e.copyProblem}}):r("div",[r("p",[e._v("Currently there is no problems.")])])],1),e._v(" "),r("b-tab",{attrs:{title:e.localeText.AdminProblem_ProbEdit}},[r("div",{staticClass:"mb-3 d-flex justify-content-between"},[r("h1",[e._v("Set = BASE")]),e._v(" "),r("b-button",{attrs:{flex:"",size:"sm",variant:"success"},on:{click:e.openDataFunc}},[e._v("DOC")])],1),e._v(" "),r("problem-editor",{attrs:{problem:e.problem,okText:e.pmText},on:{OK:e.updateProblem,Reset:e.pmReset}})],1)],1)],1)}),[],!1,null,"a3f1f08a",null);t.default=component.exports;installComponents(component,{ProblemSelector:r(905).default,ProblemTable:r(861).default,ProblemEditor:r(875).default})},861:function(e,t,r){"use strict";r.r(t);r(156),r(54);var o=r(14),n=r(0),l=r(79),c=r(226),m=(r(46),r(840));r(850);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var d={props:{problems:Array,showID:{type:Boolean,default:!1},showFilter:{type:Boolean,default:!1},showDetail:{type:Boolean,default:!1},showArrow:{type:Boolean,default:!1},showDown:{type:Boolean,default:!1},editProblem:{type:Function,default:null},copyProblem:{type:Function,default:null}},data:function(){return{locales:[{zh:"中文"}],pfields:[],pfilter:null,localeText:{AdminProblem_Playground:"練習廣場",AdminProblem_ProbEdit:"題目編修",AdminProblem_ProbList:"題目清單",Common_Edit:"編輯",Common_Copy:"複製"}}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(l.b)({user:function(e){return e.user},locale:function(e){return e.user.locale},system:function(e){return e.system}})),created:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.system.locales&&e.locale in e.system.locales.support&&(e.localeText=c.a.updateParams(e.system.locales[e.locale],e.localeText),e.locales=[]),e.showID&&e.pfields.push({key:"id",sortable:!0}),e.pfields.push({key:"title",sortable:!0,formatter:e.selectLocaleText}),e.pfields.push({key:"tags",sortable:!0}),(e.showArrow||e.showDetail||e.editProblem||e.copyProblem)&&e.pfields.push({key:"actions",label:"Actions"});case 5:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{selectLocaleText:function(text){return m.a.selectLocaleText(text,this.locale)},moveUp:function(e){if(e>0){var t=JSON.parse(JSON.stringify(this.problems[e]));this.problems.splice(e,1),this.problems.splice(e-1,0,t)}},moveDown:function(e){if(e<this.problems.length-1){var t=JSON.parse(JSON.stringify(this.problems[e+1]));this.problems.splice(e+1,1),this.problems.splice(e,0,t)}},onRowSelected:function(e){this.$emit("rowSelected",e)},showProblem:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.toggleDetails();case 1:case"end":return t.stop()}}),t)})))()}}},h=(r(1009),r(70)),component=Object(h.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.showFilter?r("p",{staticClass:"p-0 mb-2"},[r("span",[e._v("Filter: "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.pfilter,expression:"pfilter"}],domProps:{value:e.pfilter},on:{input:function(t){t.target.composing||(e.pfilter=t.target.value)}}})])]):e._e(),e._v(" "),r("b-table",{attrs:{bordered:"",items:e.problems,selectable:"","select-mode":"multi",fields:e.pfields,filter:e.pfilter},on:{"row-selected":e.onRowSelected},scopedSlots:e._u([e.showDetail||e.editProblem||e.copyProblem||e.showArrow?{key:"cell(actions)",fn:function(t){return[e.showDetail?r("b-link",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(r){return e.showProblem(t)}}},[t.detailsShowing?r("b-icon",{attrs:{icon:"eye-slash"}}):r("b-icon",{attrs:{icon:"eye"}})],1):e._e(),e._v(" "),e.editProblem?r("b-link",{staticClass:"mr-1",on:{click:function(r){return e.editProblem(t.item)}}},[r("b-icon",{attrs:{icon:"pen"}})],1):e._e(),e._v(" "),e.copyProblem?r("b-link",{staticClass:"mr-1",on:{click:function(r){return e.copyProblem(t.item)}}},[r("b-icon",{attrs:{icon:"back"}})],1):e._e(),e._v(" "),e.showArrow?r("b-link",{staticClass:"mr-1",on:{click:function(r){return e.moveUp(t.index)}}},[r("b-icon",{attrs:{icon:"arrow-up"}})],1):e._e(),e._v(" "),e.showArrow?r("b-link",{staticClass:"mr-1",on:{click:function(r){return e.moveDown(t.index)}}},[r("b-icon",{attrs:{icon:"arrow-down"}})],1):e._e()]}}:null,e.showDetail?{key:"row-details",fn:function(t){return[r("b-card",[r("p",[e._v(e._s(t.item.id)+": "+e._s(e.selectLocaleText(t.item.title)))]),e._v(" "),r("p",{domProps:{innerHTML:e._s(e.$md.render(e.selectLocaleText(t.item.description)))}}),e._v(" "),r("p",[e._v("TAGS: "+e._s(t.item.tags))])])]}}:null],null,!0)})],1)}),[],!1,null,"1436f093",null);t.default=component.exports},888:function(e,t,r){var content=r(1010);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(60).default)("7a72bcfb",content,!0,{sourceMap:!1})},889:function(e,t,r){var content=r(1012);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(60).default)("af468642",content,!0,{sourceMap:!1})},890:function(e,t,r){var content=r(1014);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(60).default)("8774744c",content,!0,{sourceMap:!1})},905:function(e,t,r){"use strict";r.r(t);r(156),r(54);var o=r(14),n=r(0),l=r(79),c=r(226),m=r(861);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var d={props:{oriProblems:Array,selProblems:Array,selText:{type:String,Default:""},OKText:{type:String,Default:"OK"},OK:Function},components:{ProblemTable:m.default},data:function(){return{selSelected:null,oriSelected:null,leftProblems:[],localeText:{AdminProblem_Playground:"練習廣場",AdminProblem_ProbEdit:"題目編修",AdminProblem_ProbList:"題目清單",Common_Edit:"編輯",Common_Copy:"複製"}}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(l.b)({user:function(e){return e.user},locale:function(e){return e.user.locale},system:function(e){return e.system}})),created:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,r,o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.system.locales&&e.locale in e.system.locales.support&&(e.localeText=c.a.updateParams(e.system.locales[e.locale],e.localeText)),i=0;case 2:if(!(i<e.oriProblems.length)){t.next=17;break}r=e.oriProblems[i],o=!1,n=0;case 6:if(!(n<e.selProblems.length)){t.next=13;break}if(r.id!=e.selProblems[n].id){t.next=10;break}return o=!0,t.abrupt("break",13);case 10:n++,t.next=6;break;case 13:o||e.leftProblems.push(r);case 14:i++,t.next=2;break;case 17:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{selectItems:function(){if(this.oriSelected)for(var i=0;i<this.oriSelected.length;i++){var e=this.oriSelected[i];this.selProblems.push(e);for(var t=0;t<this.leftProblems.length;t++)if(this.leftProblems[t].id==e.id){this.leftProblems.splice(t,1);break}}},deSelectItems:function(){if(this.selSelected)for(var i=0;i<this.selSelected.length;i++){var e=this.selSelected[i];this.leftProblems.push(e);for(var t=0;t<this.selProblems.length;t++)if(this.selProblems[t].id==e.id){this.selProblems.splice(t,1);break}}}}},h=(r(1011),r(70)),component=Object(h.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"d-flex justify-content-start align-items-top"},[r("problem-table",{attrs:{problems:e.leftProblems,showID:"",showDetail:"",showFilter:""},on:{rowSelected:function(t){return e.oriSelected=t}}}),e._v(" "),r("div",{staticClass:"mx-5"},[r("b-button",{attrs:{block:"",variant:"success",size:"sm"},on:{click:e.selectItems}},[r("b-icon",{attrs:{icon:"arrow-right"}})],1),e._v(" "),r("b-button",{attrs:{block:"",variant:"success",size:"sm"},on:{click:e.deSelectItems}},[r("b-icon",{attrs:{icon:"arrow-left"}})],1)],1),e._v(" "),r("div",[r("p",{staticClass:"mb-2 p-0",attrs:{align:"right"}},[r("span",{staticClass:"mr-3"},[e._v(e._s(e.selText))]),e._v(" "),r("b-button",{attrs:{size:"sm",variant:"success"},on:{click:e.OK}},[e._v(e._s(e.OKText))])],1),e._v(" "),r("problem-table",{attrs:{problems:e.selProblems,showID:"",showArrow:""},on:{rowSelected:function(t){return e.selSelected=t}}})],1)],1)])}),[],!1,null,"05acfe91",null);t.default=component.exports;installComponents(component,{ProblemTable:r(861).default})}}]);