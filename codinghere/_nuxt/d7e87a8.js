(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1052:function(t,e,r){"use strict";r.r(e);r(9),r(29),r(28),r(41),r(842),r(54);var o=r(14),n=r(0),c=r(79),l=r(226),d=r(46),m=r(843),v=r(840);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var h={components:{ItemList:m.default},data:function(){return{lastCID:0,courses:[],curCourse:null,curCourseAll:null,curUnit:null,showItem:"List",infoAlert:!1,editMode:!1,info:{title:"",message:""},locales:[{zh:"中文"}],courseForm:{name:"",teacher:"",assistant:"",school:"",dept:"",note:""},localeText:{AdminCourse_Title:"課程",Common_Edit:"編輯",Common_Copy:"複製",Common_New:"新增"}}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.b)({user:function(t){return t.user},locale:function(t){return t.user.locale},system:function(t){return t.system}})),created:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.system.locales&&t.locale in t.system.locales.support&&(t.localeText=l.a.updateParams(t.system.locales[t.locale],t.localeText)),e.next=3,d.d.collection("courses").doc("LIST").get();case 3:(r=e.sent).exists&&(t.courses=v.a.obj2arr(r.data()),t.lastCID=t.courses.length);case 5:case"end":return e.stop()}}),e)})))()},methods:{showCourse:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.curCourse=t,r.next=3,d.d.collection("courses").doc(t.id).get();case 3:o=r.sent,e.curCourseAll=o.data(),e.curCourseAll.id=o.id,console.log("CCA",e.curCourseAll),e.showItem="showCourse";case 8:case"end":return r.stop()}}),r)})))()},showUnit:function(){},home:function(){this.showItem="List",this.curCourse=null},courseLabel:function(t){return"".concat(t.name,"  (").concat(t.teacher," / ").concat(t.note,")")},add:function(){this.curCourse||(this.editMode=!1,this.showItem="updateCourse")},updateCourse:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,i,o,n,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.editMode){e.next=21;break}return(r=Object.assign({},t.courseForm)).id&&delete r.id,e.next=5,d.d.collection("courses").doc(t.curCourse.id).update(r);case 5:r.id=t.curCourse.id,i=0;case 7:if(!(i<t.courses.length)){e.next=14;break}if(t.courses[i].id!=r.id){e.next=11;break}return t.courses[i]=r,e.abrupt("break",14);case 11:i++,e.next=7;break;case 14:return o=v.a.arr2obj(t.courses),e.next=17,d.d.collection("courses").doc("LIST").set(o);case 17:t.infoAlert=!0,t.info={title:"Update",message:"OK"},e.next=33;break;case 21:return t.lastCID+=1,n="C"+t.lastCID.toString().padStart(6,"0"),t.courseForm.id&&delete t.courseForm.id,e.next=26,d.d.collection("courses").doc(n).set(t.courseForm);case 26:return c=Object.assign({id:n},t.courseForm),t.courses.push(c),l=v.a.arr2obj(t.courses),e.next=31,d.d.collection("courses").doc("LIST").set(l);case 31:t.infoAlert=!0,t.info={title:"Create",message:"OK"};case 33:case"end":return e.stop()}}),e)})))()},editCourseBasic:function(){this.courseForm=this.curCourse,this.curCourse=this.curCourse,this.editMode=!0,this.showItem="updateCourse"},removeCourse:function(){}}},_=(r(898),r(70)),component=Object(_.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("b-modal",{attrs:{title:t.info.title},model:{value:t.infoAlert,callback:function(e){t.infoAlert=e},expression:"infoAlert"}},[t._v(t._s(t.info.message))]),t._v(" "),r("div",{staticClass:"panel"},[r("b-breadcrumb",[r("b-breadcrumb-item",{on:{click:t.home}},[r("b-icon",{attrs:{icon:"house-fill",scale:"1.25","shift-v":"1.25","aria-hidden":"true"}}),t._v("\n            "+t._s(t.localeText.AdminCourse_Title)+"\n            ")],1),t._v(" "),t.curCourse?r("b-breadcrumb-item",{on:{click:function(e){return t.showCourse(t.curCourse)}}},[t._v(t._s(t.curCourse.name))]):t._e(),t._v(" "),t.curUnit?r("b-breadcrumb-item",{attrs:{active:""},on:{click:t.showUnit}},[t._v(t._s(t.curUnit.name))]):t._e()],1),t._v(" "),t.curCourse?t._e():r("b-button",{staticClass:"newButton",attrs:{size:"sm",variant:"primary"},on:{click:t.add}},[t._v(t._s(t.localeText.Common_New))]),t._v(" "),"List"==t.showItem?r("item-list",{attrs:{items:t.courses,click:t.showCourse,show:t.courseLabel}}):t._e(),t._v(" "),"updateCourse"==t.showItem?r("div",{staticClass:"w-50 mx-auto mt-3"},[r("p",{attrs:{align:"center"}},[t.editMode?r("span",[t._v("Modify Course")]):r("span",[t._v("New Course")])]),t._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Name"},model:{value:t.courseForm.name,callback:function(e){t.$set(t.courseForm,"name",e)},expression:"courseForm.name"}}),t._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Teacher"},model:{value:t.courseForm.teacher,callback:function(e){t.$set(t.courseForm,"teacher",e)},expression:"courseForm.teacher"}}),t._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Assistant"},model:{value:t.courseForm.assistant,callback:function(e){t.$set(t.courseForm,"assistant",e)},expression:"courseForm.assistant"}}),t._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"School"},model:{value:t.courseForm.school,callback:function(e){t.$set(t.courseForm,"school",e)},expression:"courseForm.school"}}),t._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Department"},model:{value:t.courseForm.dept,callback:function(e){t.$set(t.courseForm,"dept",e)},expression:"courseForm.dept"}}),t._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Note"},model:{value:t.courseForm.note,callback:function(e){t.$set(t.courseForm,"note",e)},expression:"courseForm.note"}}),t._v(" "),r("b-button",{staticClass:"mt-4 w-50 mx-auto",attrs:{pill:"",block:"",variant:"success"},on:{click:t.updateCourse}},[t._v("OK")])],1):t._e(),t._v(" "),"showCourse"==t.showItem?r("div",{staticClass:"mt-3"},[r("b-tabs",[r("b-tab",{staticClass:"mt-3",attrs:{title:"Basic"}},[r("p",[t._v("Name: "+t._s(t.curCourse.name))]),t._v(" "),r("p",[t._v("Teacher: "+t._s(t.curCourse.teacher))]),t._v(" "),r("p",[t._v("Assistant: "+t._s(t.curCourse.assistant))]),t._v(" "),r("p",[t._v("School: "+t._s(t.curCourse.school))]),t._v(" "),r("p",[t._v("Dept: "+t._s(t.curCourse.dept))]),t._v(" "),r("p",[t._v("Note: "+t._s(t.curCourse.note))]),t._v(" "),r("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:t.editCourseBasic}},[t._v("Edit")])],1),t._v(" "),r("b-tab",{staticClass:"mt-3",attrs:{title:"News"}}),t._v(" "),r("b-tab",{staticClass:"mt-3",attrs:{title:"Units"}}),t._v(" "),r("b-tab",{staticClass:"mt-3",attrs:{title:"Students"}}),t._v(" "),r("b-tab",{staticClass:"mt-3",attrs:{title:"Scores"}})],1)],1):t._e(),t._v(" "),"newUnit"==t.showItem?r("div",{staticClass:"w-50 mx-auto mt-3"},[r("p",{attrs:{align:"center"}},[t.editMode?r("span",[t._v("Modify Course")]):r("span",[t._v("New Course")])]),t._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Name"},model:{value:t.courseForm.name,callback:function(e){t.$set(t.courseForm,"name",e)},expression:"courseForm.name"}}),t._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Teacher"},model:{value:t.courseForm.teacher,callback:function(e){t.$set(t.courseForm,"teacher",e)},expression:"courseForm.teacher"}}),t._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Assistant"},model:{value:t.courseForm.assistant,callback:function(e){t.$set(t.courseForm,"assistant",e)},expression:"courseForm.assistant"}}),t._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"School"},model:{value:t.courseForm.school,callback:function(e){t.$set(t.courseForm,"school",e)},expression:"courseForm.school"}}),t._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Department"},model:{value:t.courseForm.dept,callback:function(e){t.$set(t.courseForm,"dept",e)},expression:"courseForm.dept"}}),t._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Note"},model:{value:t.courseForm.note,callback:function(e){t.$set(t.courseForm,"note",e)},expression:"courseForm.note"}}),t._v(" "),r("b-button",{staticClass:"mt-4 w-50 mx-auto",attrs:{pill:"",block:"",variant:"success"},on:{click:t.updateCourse}},[t._v("OK")])],1):t._e()],1)],1)}),[],!1,null,"619b0842",null);e.default=component.exports;installComponents(component,{ItemList:r(843).default})},840:function(t,e,r){"use strict";r(9),r(12),r(22),r(87),r(842),r(15);var o={pad:function(t){return("0"+t).slice(-2)},mmss:function(t){var e=Math.floor(t/60);return t%=60,"".concat(this.pad(e),":").concat(this.pad(t))},hhmmss:function(t){var e=Math.floor(t/60);t%=60;var r=Math.floor(e/60);return e%=60,"".concat(this.pad(r),":").concat(this.pad(e),":").concat(this.pad(t))},getToday:function(){var t=new Date,dd=String(t.getDate()).padStart(2,"0"),e=String(t.getMonth()+1).padStart(2,"0");return t.getFullYear()+e+dd},getNow:function(){var t=new Date;return""+t.getFullYear()+this.pad(t.getMonth()+1)+this.pad(t.getDate())+this.pad(t.getHours())+this.pad(t.getMinutes())+this.pad(t.getSeconds())},obj2arr:function(t){var e=[],r=Object.keys(t);return r.sort(),r.forEach((function(r){e.push(Object.assign({id:r},t[r]))})),e},arr2obj:function(t){var e={};return t.forEach((function(t){var r=JSON.parse(JSON.stringify(t)),o=t.id;delete r.id,e[o]=r})),e}};e.a=o},842:function(t,e,r){"use strict";var o=r(8),n=r(845).start;o({target:"String",proto:!0,forced:r(846)},{padStart:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},843:function(t,e,r){"use strict";r.r(e);var o={props:{items:Array,name:{type:String,default:"name"},keyPrefix:{type:String,default:"item"},show:{type:Function,default:null},headVariant:{type:String,default:"dark"},textVariant:{type:String,default:"primary"},editVariant:{type:String,default:"primary"},copyVariant:{type:String,default:"primary"},removeVariant:{type:String,default:"primary"},addVariant:{type:String,default:"primary"},order:{type:Boolean,default:!0},click:{type:Function,default:null},remove:{type:Function,default:null},edit:{type:Function,default:null},copy:{type:Function,default:null},add:{type:Function,default:null},addLabel:{type:String,default:"New"},noEntryLabel:{type:String,default:"No items."}},methods:{itemName:function(t,e){if(this.show)return this.show(t);var r=this.$store.state.user.locale;return r&&t[e]&&t[e][r]?t[e][r]:t[e]}}},n=r(70),component=Object(n.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.add?r("p",{attrs:{align:"right"}},[t.add?r("b-button",{attrs:{size:"sm",variant:t.addVariant},on:{click:function(e){return t.add()}}},[t._v("\n            "+t._s(t.addLabel)+"\n        ")]):t._e()],1):t._e(),t._v(" "),t.items&&t.items.length>0?r("div",t._l(t.items,(function(e,o){return r("div",{key:t.keyPrefix+o,staticClass:"itemList d-flex justify-content-between"},[r("span",[t.order?r("span",{staticClass:"mr-2",class:"text-"+t.headVariant},[t._v(t._s(o+1)+".")]):r("span",{staticClass:"mr-2",class:"text-"+t.headVariant},[t._v("•")]),t._v(" "),r("b-link",{staticClass:"itemBody",class:"text-"+t.textVariant,on:{click:function(r){t.click&&t.click(e)}}},[t._v("\n                    "+t._s(t.itemName(e,t.name))+"\n                ")])],1),t._v(" "),t.remove||t.edit||t.copy?r("span",[t.edit?r("b-link",{class:"text-"+t.editVariant,on:{click:function(r){return t.edit(e)}}},[r("b-icon",{attrs:{icon:"pencil"}})],1):t._e(),t._v(" "),t.copy&&t.edit?r("span",{staticClass:"mr-2"}):t._e(),t._v(" "),t.copy?r("b-link",{class:"text-"+t.editVariant,on:{click:function(r){return t.copy(e)}}},[r("b-icon",{attrs:{icon:"back"}})],1):t._e(),t._v(" "),t.remove&&t.copy?r("span",{staticClass:"mr-2"}):t._e(),t._v(" "),t.remove?r("b-link",{class:"text-"+t.removeVariant,on:{click:function(r){return t.remove(e)}}},[r("b-icon",{attrs:{icon:"trash-fill"}})],1):t._e()],1):t._e()])})),0):r("div",[t._v("\n        "+t._s(t.noEntryLabel)+"\n    ")])])}),[],!1,null,"bace92b4",null);e.default=component.exports},845:function(t,e,r){var o=r(48),n=r(227),c=r(51),l=Math.ceil,d=function(t){return function(e,r,d){var m,v,f=String(c(e)),h=f.length,_=void 0===d?" ":String(d),C=o(r);return C<=h||""==_?f:(m=C-h,(v=n.call(_,l(m/_.length))).length>m&&(v=v.slice(0,m)),t?f+v:v+f)}};t.exports={start:d(!1),end:d(!0)}},846:function(t,e,r){var o=r(127);t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o)},861:function(t,e,r){var content=r(899);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(60).default)("42c7b4b4",content,!0,{sourceMap:!1})},898:function(t,e,r){"use strict";r(861)},899:function(t,e,r){(e=r(59)(!1)).push([t.i,"[data-v-619b0842] .itemList{margin-top:8px}.container-fluid[data-v-619b0842]{margin:30px}.panel[data-v-619b0842]{margin-right:30px;position:relative}.newButton[data-v-619b0842]{position:absolute;top:12px;right:12px}",""]),t.exports=e}}]);