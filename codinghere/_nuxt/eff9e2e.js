(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1111:function(e,t,r){var content=r(1314);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(57).default)("1fafaa22",content,!0,{sourceMap:!1})},1313:function(e,t,r){"use strict";r(1111)},1314:function(e,t,r){(t=r(56)(!1)).push([e.i,'h1[data-v-2f63135a]{color:#00f;font-family:"Arial";font-size:120%;margin:24px 0;padding-bottom:3px;border-bottom:1px solid #000}.clabel[data-v-2f63135a]{padding:6px;display:inline-block;text-align:center;background:var(--teal);color:#fff;border-radius:6px}.clabel[data-v-2f63135a],.ebtn[data-v-2f63135a]{width:120px}',""]),e.exports=t},1423:function(e,t,r){"use strict";r.r(t);r(14),r(18),r(156),r(30),r(86),r(15),r(49);var o=r(7),c=(r(855),{data:function(){return{kind:null,selectUser:!1,lastCID:0,setPSet:!1,course:null,courses:[],courseForm:{name:"",teachers:[],assistants:[],school:"",dept:"",enrollCode:"",problemSets:{},compilers:[],codeExpiredDate:"",codeExpiredTime:"",needApproval:!0,endDate:"",whitelist:"",note:""},localeText:{Course_Teachers:"教師",Course_Assistants:"助教",Course_Name:"課程名稱",Course_EnrollCode:"選課代碼",Course_School:"學校",Course_Department:"科系",Course_ProblemSet:"題庫",Course_EndDate:"結束日期",Course_Compilers:"程式語言",SYS_Edit:"編輯",SYS_Add:"新增",SYS_Cancel:"取消",SYS_Update:"更新"}}},created:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.localeText=e.$updateLocaleText(e.localeText),t.next=3,e.$store.dispatch("getCourse",e.cid);case 3:if(t.t0=t.sent,t.t0){t.next=6;break}t.t0={};case 6:return e.course=t.t0,e.courseForm=e.$copyObject(e.course),e.courseForm.compilers||(e.courseForm.compilers=["c","cpp","py"]),t.next=11,e.$store.dispatch("getCourse","LIST");case 11:(r=t.sent)&&(e.courses=e.$copyObject(r),o=Object.keys(r),e.lastCID=o.length);case 13:case"end":return t.stop()}}),t)})))()},computed:{manager:function(){return"admin"==this.$user("role")||"maintainer"==this.$user("role")},cid:function(){return this.$route.params.cid}},methods:{showSet:function(e){if(!e)return"";var t=[];return Object.keys(e).forEach((function(r){var s=e[r];t.push(s.name+"#"+s.mode)})),t.join(",")},updateCourse:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e.$copyObject(e.courseForm)).id&&delete r.id,t.next=4,e.$store.dispatch("updateCourse",{id:e.cid,value:r});case 4:return e.courses[e.cid]=r,t.next=7,e.$store.dispatch("setCourse",{id:"LIST",value:e.courses});case 7:e.$router.push("/teacher/"+e.cid+"/profile");case 8:case"end":return t.stop()}}),t)})))()},addUser:function(e){this.courseForm[this.kind]?this.courseForm[this.kind].push(e):this.$set(this.courseForm,this.kind,[e]),this.selectUser=!1},removeUser:function(e,t){this.courseForm[e].splice(t,1)},getUser:function(e){this.kind=e,this.selectUser=!0}}}),n=(r(1313),r(55)),component=Object(n.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-modal",{attrs:{size:"lg"},model:{value:e.selectUser,callback:function(t){e.selectUser=t},expression:"selectUser"}},[r("user-selector",{on:{getUser:e.addUser}})],1),e._v(" "),r("b-modal",{attrs:{size:"lg",title:"Problem Set Selector"},model:{value:e.setPSet,callback:function(t){e.setPSet=t},expression:"setPSet"}},[r("problem-set-selector",{model:{value:e.courseForm.problemSets,callback:function(t){e.$set(e.courseForm,"problemSets",t)},expression:"courseForm.problemSets"}})],1),e._v(" "),r("h1",[e._v("Edit Course")]),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("span",{staticClass:"clabel"},[e._v(e._s(e.localeText.Course_Teachers))]),e._v(" "),e.courseForm.teachers&&e.courseForm.teachers.length>0?r("span",{staticClass:"ml-3"},e._l(e.courseForm.teachers,(function(t,o){return r("span",{key:t.id},[e._v("\n                    "+e._s(t.name)+"\n                    "),e.manager?r("b-link",{staticClass:"mr-3",on:{click:function(t){return e.removeUser("teachers",o)}}},[r("b-icon",{attrs:{icon:"x"}})],1):e._e()],1)})),0):e._e()]),e._v(" "),r("div",{staticClass:"col-md-6"},[r("span",{staticClass:"clabel"},[e._v(e._s(e.localeText.Course_Assistants))]),e._v(" "),e.courseForm.assistants&&e.courseForm.assistants.length>0?r("span",e._l(e.courseForm.assistants,(function(t,o){return r("span",{key:t.id},[e._v("\n                    "+e._s(t.name)+"\n                    "),r("b-link",{staticClass:"mr-3",on:{click:function(t){return e.removeUser("assistants",o)}}},[r("b-icon",{attrs:{icon:"x"}})],1)],1)})),0):e._e(),e._v(" "),r("button",{staticClass:"ml-3",on:{click:function(t){return e.getUser("assistants")}}},[e._v(e._s(e.localeText.SYS_Add))])])]),e._v(" "),r("div",{staticClass:"row mt-3"},[r("div",{staticClass:"col-md-6"},[r("span",{staticClass:"clabel"},[e._v(e._s(e.localeText.Course_Name))]),e._v(" "),r("div",{staticClass:"d-inline-block ml-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.courseForm.name,expression:"courseForm.name"}],attrs:{type:"text"},domProps:{value:e.courseForm.name},on:{input:function(t){t.target.composing||e.$set(e.courseForm,"name",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"col-md-6"},[r("span",{staticClass:"clabel"},[e._v(e._s(e.localeText.Course_EnrollCode))]),e._v(" "),r("div",{staticClass:"d-inline-block ml-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.courseForm.enrollCode,expression:"courseForm.enrollCode"}],attrs:{type:"text"},domProps:{value:e.courseForm.enrollCode},on:{input:function(t){t.target.composing||e.$set(e.courseForm,"enrollCode",t.target.value)}}})])])]),e._v(" "),r("div",{staticClass:"row mt-3"},[r("div",{staticClass:"col-md-6"},[r("span",{staticClass:"clabel"},[e._v(e._s(e.localeText.Course_School))]),e._v(" "),r("div",{staticClass:"d-inline-block ml-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.courseForm.school,expression:"courseForm.school"}],attrs:{type:"text"},domProps:{value:e.courseForm.school},on:{input:function(t){t.target.composing||e.$set(e.courseForm,"school",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"col-md-6"},[r("span",{staticClass:"clabel"},[e._v(e._s(e.localeText.Course_Department))]),e._v(" "),r("div",{staticClass:"d-inline-block ml-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.courseForm.dept,expression:"courseForm.dept"}],attrs:{type:"text"},domProps:{value:e.courseForm.dept},on:{input:function(t){t.target.composing||e.$set(e.courseForm,"dept",t.target.value)}}})])])]),e._v(" "),r("div",{staticClass:"row mt-3"},[r("div",{staticClass:"col-md-6"},[r("span",{staticClass:"clabel"},[e._v(e._s(e.localeText.Course_ProblemSet))]),e._v(" "),r("div",{staticClass:"d-inline-block ml-3"},[r("span",[e._v(e._s(e.showSet(e.courseForm.problemSets)))])]),e._v(" "),r("button",{staticClass:"btn btn-primary btn-sm ml-3",attrs:{type:"button"},on:{click:function(t){e.setPSet=!0}}},[e._v(e._s(e.localeText.SYS_Edit))])]),e._v(" "),r("div",{staticClass:"col-md-6"},[r("span",{staticClass:"clabel"},[e._v(e._s(e.localeText.Course_EndDate))]),e._v(" "),r("div",{staticClass:"d-inline-block ml-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.courseForm.endDate,expression:"courseForm.endDate"}],attrs:{type:"date"},domProps:{value:e.courseForm.endDate},on:{input:function(t){t.target.composing||e.$set(e.courseForm,"endDate",t.target.value)}}})])])]),e._v(" "),r("div",{staticClass:"row mt-3"},[r("div",{staticClass:"col"},[r("span",{staticClass:"clabel"},[e._v(e._s(e.localeText.Course_Compilers))]),e._v(" "),r("div",{staticClass:"ml-3 d-inline-block compiler"},[r("div",{staticClass:"d-inline-block compiler"},[r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.courseForm.compilers,expression:"courseForm.compilers"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"compiler_c",value:"c"},domProps:{checked:Array.isArray(e.courseForm.compilers)?e._i(e.courseForm.compilers,"c")>-1:e.courseForm.compilers},on:{change:function(t){var r=e.courseForm.compilers,o=t.target,c=!!o.checked;if(Array.isArray(r)){var n=e._i(r,"c");o.checked?n<0&&e.$set(e.courseForm,"compilers",r.concat(["c"])):n>-1&&e.$set(e.courseForm,"compilers",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.courseForm,"compilers",c)}}}),e._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"compiler_c"}},[e._v("C")])])])]),e._v(" "),r("div",{staticClass:"ml-3 d-inline-block compiler"},[r("div",{staticClass:"d-inline-block compiler"},[r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.courseForm.compilers,expression:"courseForm.compilers"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"compiler_cpp",value:"cpp"},domProps:{checked:Array.isArray(e.courseForm.compilers)?e._i(e.courseForm.compilers,"cpp")>-1:e.courseForm.compilers},on:{change:function(t){var r=e.courseForm.compilers,o=t.target,c=!!o.checked;if(Array.isArray(r)){var n=e._i(r,"cpp");o.checked?n<0&&e.$set(e.courseForm,"compilers",r.concat(["cpp"])):n>-1&&e.$set(e.courseForm,"compilers",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.courseForm,"compilers",c)}}}),e._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"compiler_cpp"}},[e._v("C++")])])])]),e._v(" "),r("div",{staticClass:"ml-3 d-inline-block compiler"},[r("div",{staticClass:"d-inline-block compiler"},[r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.courseForm.compilers,expression:"courseForm.compilers"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"compiler_py",value:"py"},domProps:{checked:Array.isArray(e.courseForm.compilers)?e._i(e.courseForm.compilers,"py")>-1:e.courseForm.compilers},on:{change:function(t){var r=e.courseForm.compilers,o=t.target,c=!!o.checked;if(Array.isArray(r)){var n=e._i(r,"py");o.checked?n<0&&e.$set(e.courseForm,"compilers",r.concat(["py"])):n>-1&&e.$set(e.courseForm,"compilers",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.courseForm,"compilers",c)}}}),e._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"compiler_py"}},[e._v("Python")])])])])]),e._v(" "),r("div",{staticClass:"col"})]),e._v(" "),r("p",{staticClass:"mt-4",attrs:{align:"left"}},[r("b-button",{staticClass:"ebtn",attrs:{size:"sm",variant:"primary",to:"/teacher/"+e.cid+"/profile"}},[e._v(e._s(e.localeText.SYS_Cancel))]),e._v(" "),r("b-button",{staticClass:"ml-3 ebtn",attrs:{size:"sm",variant:"primary"},on:{click:e.updateCourse}},[e._v(e._s(e.localeText.SYS_Update))])],1)],1)}),[],!1,null,"2f63135a",null);t.default=component.exports;installComponents(component,{UserSelector:r(891).default,ProblemSetSelector:r(892).default})},855:function(e,t,r){"use strict";r(10),r(14),r(22),r(86),r(9),r(856),r(29),r(15);var o=r(228),c=r.n(o),n={pad:function(e){return("0"+e).slice(-2)},mmss:function(e){var t=Math.floor(e/60);return e%=60,"".concat(this.pad(t),":").concat(this.pad(e))},hhmmss:function(e){var t=Math.floor(e/60);e%=60;var r=Math.floor(t/60);return t%=60,"".concat(this.pad(r),":").concat(this.pad(t),":").concat(this.pad(e))},getToday:function(){var e=new Date,dd=String(e.getDate()).padStart(2,"0"),t=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+t+dd},getNow:function(){var e=new Date;return""+e.getFullYear()+this.pad(e.getMonth()+1)+this.pad(e.getDate())+this.pad(e.getHours())+this.pad(e.getMinutes())+this.pad(e.getSeconds())},obj2arr:function(e){var t=[],r=Object.keys(e);return r.sort(),r.forEach((function(r){t.push(Object.assign({id:r},e[r]))})),t},arr2obj:function(e){var t={};return e.forEach((function(e){var r=JSON.parse(JSON.stringify(e)),o=e.id;delete r.id,t[o]=r})),t},getOptions:function(e){var t=[];return e.split("#@@#").forEach((function(e){var s=e.split("#@");t.push({text:s[0],value:s[1]})})),t},findIdPos:function(e,t){if(!e)return-1;for(var r=0;r<e.length;r++)if(t==e[r].id)return r;return-1},encode:function(e,t){return new c.a(e).encrypt(t)},decode:function(e,t){return new c.a(e).decrypt(t)}};t.a=n},856:function(e,t,r){"use strict";var o=r(8),c=r(857).start;o({target:"String",proto:!0,forced:r(858)},{padStart:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}})},857:function(e,t,r){var o=r(50),c=r(229),n=r(52),l=Math.ceil,m=function(e){return function(t,r,m){var d,v,f=String(n(t)),_=f.length,h=void 0===m?" ":String(m),C=o(r);return C<=_||""==h?f:(d=C-_,(v=c.call(h,l(d/h.length))).length>d&&(v=v.slice(0,d)),e?f+v:v+f)}};e.exports={start:m(!1),end:m(!0)}},858:function(e,t,r){var o=r(127);e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o)},891:function(e,t,r){"use strict";r.r(t);r(30),r(49);var o=r(7),c=r(26),n={data:function(){return{name:"",candidates:{}}},methods:{selectUser:function(e,t){var r={id:e,name:t.name};this.$emit("getUser",r)},searchUser:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.name.length<2)){t.next=2;break}return t.abrupt("return");case 2:return r={},t.next=5,c.d.collection("users").where("name","==",e.name).get();case 5:if(!(o=t.sent).empty)for(i=0;i<o.docs.length;i++)n=o.docs[i],r[n.id]=n.data();e.candidates=r;case 8:case"end":return t.stop()}}),t)})))()}}},l=r(55),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("p",{attrs:{align:"center"}},[e._v("User name: \n        "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"ml-2",domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),r("button",{attrs:{size:"sm",variant:"success"},on:{click:e.searchUser}},[e._v("Search")])]),e._v(" "),e._l(e.candidates,(function(t,o,c){return r("p",{key:t.id,attrs:{align:"center"}},[e._v("\n        "+e._s(c+1)+". "),r("b-link",{on:{click:function(r){return e.selectUser(o,t)}}},[e._v(e._s(t.name)+" - "+e._s(t.email))])],1)}))],2)}),[],!1,null,null,null);t.default=component.exports},892:function(e,t,r){"use strict";r.r(t);r(49);var o=r(7),c=r(26),n={props:{value:Object},data:function(){return{pset:{},allset:{},newSetName:"",newSetID:""}},created:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.d.collection("problems").get();case 2:if(!(r=t.sent).empty){for(o={},i=0;i<r.docs.length;i++)"STAT"!==(n=r.docs[i]).id&&(o[n.id]=n.data());e.allset=o}e.value&&(e.pset=e.$copyObject(e.value));case 5:case"end":return t.stop()}}),t)})))()},methods:{addSet:function(e,t,r){this.allset;this.$set(this.pset,e,{name:t,mode:r}),this.$emit("input",this.pset)},createSet:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return data={name:e.newSetName},t.next=3,c.d.collection("problems").doc(e.newSetID).set(data);case 3:e.$set(e.allset,e.newSetID,data),e.$set(e.pset,e.newSetID,{name:e.newSetName,mode:"rw"}),e.$emit("input",e.pset);case 6:case"end":return t.stop()}}),t)})))()}}},l=r(55),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v("\n    Current Sets:\n    "),e._l(e.pset,(function(t,o,c){return r("div",{key:"p"+o},[e._v("\n        "+e._s(c+1)+". "+e._s(t.name)+"#"+e._s(t.mode)+"\n    ")])})),e._v(" "),r("hr"),e._v("\n    All Sets:\n    "),e._l(e.allset,(function(t,o,c){return r("div",{key:"a"+o},[e._v("\n        "+e._s(c+1)+". "+e._s(t.name)+" \n        "),r("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:"success"},on:{click:function(r){return e.addSet(o,t.name,"r")}}},[e._v("R")]),e._v(" "),r("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:"success"},on:{click:function(r){return e.addSet(o,t.name,"rw")}}},[e._v("R/W")])],1)})),e._v(" "),r("hr"),e._v("\n    Create Set:\n    "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Set Name"},model:{value:e.newSetName,callback:function(t){e.newSetName=t},expression:"newSetName"}}),e._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Set ID"},model:{value:e.newSetID,callback:function(t){e.newSetID=t},expression:"newSetID"}}),e._v(" "),r("b-button",{attrs:{size:"sm",variant:"success"},on:{click:e.createSet}},[e._v("Create")])],2)}),[],!1,null,null,null);t.default=component.exports}}]);