(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1157:function(e,t,r){"use strict";r(937)},1158:function(e,t,r){(t=r(56)(!1)).push([e.i,'h1[data-v-6bd46b2f]{color:#00f;font-family:"Arial";font-size:120%;margin:24px 0;padding-bottom:3px;border-bottom:1px solid #000}',""]),e.exports=t},1396:function(e,t,r){"use strict";r.r(t);r(14),r(18),r(156),r(30),r(86),r(15),r(49);var n=r(7),o=(r(855),{data:function(){return{kind:null,selectUser:!1,lastCID:0,setPSet:!1,course:null,courses:[],courseForm:{name:"",teachers:[],assistants:[],school:"",dept:"",enrollCode:"",problemSets:{},codeExpiredDate:"",codeExpiredTime:"",needApproval:!0,endDate:"",whitelist:"",note:""}}},created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getCourse",e.$route.params.id);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:return e.course=t.t0,e.courseForm=e.$copyObject(e.course),t.next=9,e.$store.dispatch("getCourse","LIST");case 9:(r=t.sent)&&(e.courses=e.$copyObject(r),n=Object.keys(r),e.lastCID=n.length);case 11:case"end":return t.stop()}}),t)})))()},computed:{manager:function(){return"admin"==this.$user("role")||"maintainer"==this.$user("role")},cid:function(){return this.$route.params.id}},methods:{showSet:function(e){if(!e)return"";var t=[];return Object.keys(e).forEach((function(r){var s=e[r];t.push(s.name+"#"+s.mode)})),t.join(",")},updateCourse:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e.$copyObject(e.courseForm)).id&&delete r.id,t.next=4,e.$store.dispatch("updateCourse",{id:e.cid,value:r});case 4:return e.courses[e.cid]=r,t.next=7,e.$store.dispatch("setCourse",{id:"LIST",value:e.courses});case 7:e.$router.push("/admin/courses");case 8:case"end":return t.stop()}}),t)})))()},addUser:function(e){this.courseForm[this.kind]?this.courseForm[this.kind].push(e):this.$set(this.courseForm,this.kind,[e]),this.selectUser=!1},removeUser:function(e,t){this.courseForm[e].splice(t,1)},getUser:function(e){this.kind=e,this.selectUser=!0}}}),c=(r(1157),r(55)),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-modal",{attrs:{size:"lg"},model:{value:e.selectUser,callback:function(t){e.selectUser=t},expression:"selectUser"}},[r("user-selector",{on:{getUser:e.addUser}})],1),e._v(" "),r("b-modal",{attrs:{size:"lg",title:"Problem Set Selector"},model:{value:e.setPSet,callback:function(t){e.setPSet=t},expression:"setPSet"}},[r("problem-set-selector",{model:{value:e.courseForm.problemSets,callback:function(t){e.$set(e.courseForm,"problemSets",t)},expression:"courseForm.problemSets"}})],1),e._v(" "),r("h1",[e._v("New Course")]),e._v(" "),r("p",{staticClass:"ml-2"},[e._v("\n        Teachers:\n        "),e.courseForm.teachers&&e.courseForm.teachers.length>0?r("span",e._l(e.courseForm.teachers,(function(t,n){return r("span",{key:t.id},[e._v("\n                "+e._s(t.name)+"\n                "),e.manager?r("b-link",{staticClass:"mr-3",on:{click:function(t){return e.removeUser("teachers",n)}}},[r("b-icon",{attrs:{icon:"x"}})],1):e._e()],1)})),0):e._e(),e._v(" "),e.manager?r("button",{staticClass:"ml-3",on:{click:function(t){return e.getUser("teachers")}}},[e._v("\n            Add\n        ")]):e._e()]),e._v(" "),r("p",{staticClass:"ml-2"},[e._v("\n        Assistants:\n        "),e.courseForm.assistants&&e.courseForm.assistants.length>0?r("span",e._l(e.courseForm.assistants,(function(t,n){return r("span",{key:t.id},[e._v("\n                "+e._s(t.name)+"\n                "),r("b-link",{staticClass:"mr-3",on:{click:function(t){return e.removeUser("assistants",n)}}},[r("b-icon",{attrs:{icon:"x"}})],1)],1)})),0):e._e(),e._v(" "),r("button",{staticClass:"ml-3",on:{click:function(t){return e.getUser("assistants")}}},[e._v("Add")])]),e._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Name"},model:{value:e.courseForm.name,callback:function(t){e.$set(e.courseForm,"name",t)},expression:"courseForm.name"}}),e._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"School"},model:{value:e.courseForm.school,callback:function(t){e.$set(e.courseForm,"school",t)},expression:"courseForm.school"}}),e._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Department"},model:{value:e.courseForm.dept,callback:function(t){e.$set(e.courseForm,"dept",t)},expression:"courseForm.dept"}}),e._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"enrollCode"},model:{value:e.courseForm.enrollCode,callback:function(t){e.$set(e.courseForm,"enrollCode",t)},expression:"courseForm.enrollCode"}}),e._v(" "),r("b-form-datepicker",{attrs:{placeholder:"Enroll Code Expired Date",locale:e.$user("locale"),"today-button":"","reset-button":"","close-button":""},model:{value:e.courseForm.codeExpiredDate,callback:function(t){e.$set(e.courseForm,"codeExpiredDate",t)},expression:"courseForm.codeExpiredDate"}}),e._v(" "),r("b-form-timepicker",{attrs:{placeholder:"Enroll Code Expired Time",locale:e.$user("locale"),"show-seconds":"","reset-button":"","close-button":""},model:{value:e.courseForm.codeExpiredTime,callback:function(t){e.$set(e.courseForm,"codeExpiredTime",t)},expression:"courseForm.codeExpiredTime"}}),e._v(" "),r("p",{staticClass:"my-3 ml-2"},[r("b-form-radio-group",{attrs:{options:[{value:!0,text:"Approval needed"},{value:!1,text:"No approval needed"}]},model:{value:e.courseForm.needApproval,callback:function(t){e.$set(e.courseForm,"needApproval",t)},expression:"courseForm.needApproval"}})],1),e._v(" "),r("b-form-datepicker",{attrs:{placeholder:"Course End Date",locale:e.$user("locale"),"today-button":"","reset-button":"","close-button":""},model:{value:e.courseForm.endDate,callback:function(t){e.$set(e.courseForm,"endDate",t)},expression:"courseForm.endDate"}}),e._v(" "),r("b-row",[r("b-col",{attrs:{cols:"9"}},[e._v("\n            ProblemSets = "+e._s(e.showSet(e.courseForm.problemSets))+"\n        ")]),e._v(" "),r("b-col",{attrs:{cols:"3"}},[r("b-button",{attrs:{variant:"light"},on:{click:function(t){e.setPSet=!0}}},[e._v("Modify")])],1)],1),e._v(" "),r("b-textarea",{staticClass:"mb-3",attrs:{placeholder:"White List",rows:"5"},model:{value:e.courseForm.whitelist,callback:function(t){e.$set(e.courseForm,"whitelist",t)},expression:"courseForm.whitelist"}}),e._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Note"},model:{value:e.courseForm.note,callback:function(t){e.$set(e.courseForm,"note",t)},expression:"courseForm.note"}}),e._v(" "),r("b-button",{staticClass:"mr-3",attrs:{size:"sm",variant:"primary",to:"/admin/courses"}},[e._v("Cancel")]),e._v(" "),r("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:e.updateCourse}},[e._v("Update")])],1)}),[],!1,null,"6bd46b2f",null);t.default=component.exports;installComponents(component,{UserSelector:r(890).default,ProblemSetSelector:r(891).default})},855:function(e,t,r){"use strict";r(10),r(14),r(22),r(86),r(9),r(856),r(29),r(15);var n=r(228),o=r.n(n),c={pad:function(e){return("0"+e).slice(-2)},mmss:function(e){var t=Math.floor(e/60);return e%=60,"".concat(this.pad(t),":").concat(this.pad(e))},hhmmss:function(e){var t=Math.floor(e/60);e%=60;var r=Math.floor(t/60);return t%=60,"".concat(this.pad(r),":").concat(this.pad(t),":").concat(this.pad(e))},getToday:function(){var e=new Date,dd=String(e.getDate()).padStart(2,"0"),t=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+t+dd},getNow:function(){var e=new Date;return""+e.getFullYear()+this.pad(e.getMonth()+1)+this.pad(e.getDate())+this.pad(e.getHours())+this.pad(e.getMinutes())+this.pad(e.getSeconds())},obj2arr:function(e){var t=[],r=Object.keys(e);return r.sort(),r.forEach((function(r){t.push(Object.assign({id:r},e[r]))})),t},arr2obj:function(e){var t={};return e.forEach((function(e){var r=JSON.parse(JSON.stringify(e)),n=e.id;delete r.id,t[n]=r})),t},getOptions:function(e){var t=[];return e.split("#@@#").forEach((function(e){var s=e.split("#@");t.push({text:s[0],value:s[1]})})),t},findIdPos:function(e,t){if(!e)return-1;for(var r=0;r<e.length;r++)if(t==e[r].id)return r;return-1},encode:function(e,t){return new o.a(e).encrypt(t)},decode:function(e,t){return new o.a(e).decrypt(t)}};t.a=c},856:function(e,t,r){"use strict";var n=r(8),o=r(857).start;n({target:"String",proto:!0,forced:r(858)},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},857:function(e,t,r){var n=r(50),o=r(229),c=r(52),l=Math.ceil,d=function(e){return function(t,r,d){var m,v,f=String(c(t)),h=f.length,_=void 0===d?" ":String(d),S=n(r);return S<=h||""==_?f:(m=S-h,(v=o.call(_,l(m/_.length))).length>m&&(v=v.slice(0,m)),e?f+v:v+f)}};e.exports={start:d(!1),end:d(!0)}},858:function(e,t,r){var n=r(127);e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},890:function(e,t,r){"use strict";r.r(t);r(30),r(49);var n=r(7),o=r(26),c={data:function(){return{name:"",candidates:{}}},methods:{selectUser:function(e,t){var r={id:e,name:t.name};this.$emit("getUser",r)},searchUser:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,i,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.name.length<2)){t.next=2;break}return t.abrupt("return");case 2:return r={},t.next=5,o.d.collection("users").where("name","==",e.name).get();case 5:if(!(n=t.sent).empty)for(i=0;i<n.docs.length;i++)c=n.docs[i],r[c.id]=c.data();e.candidates=r;case 8:case"end":return t.stop()}}),t)})))()}}},l=r(55),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("p",{attrs:{align:"center"}},[e._v("User name: \n        "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"ml-2",domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),r("button",{attrs:{size:"sm",variant:"success"},on:{click:e.searchUser}},[e._v("Search")])]),e._v(" "),e._l(e.candidates,(function(t,n,o){return r("p",{key:t.id,attrs:{align:"center"}},[e._v("\n        "+e._s(o+1)+". "),r("b-link",{on:{click:function(r){return e.selectUser(n,t)}}},[e._v(e._s(t.name)+" - "+e._s(t.email))])],1)}))],2)}),[],!1,null,null,null);t.default=component.exports},891:function(e,t,r){"use strict";r.r(t);r(49);var n=r(7),o=r(26),c={props:{value:Object},data:function(){return{pset:{},allset:{},newSetName:"",newSetID:""}},created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,i,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.d.collection("problems").get();case 2:if(!(r=t.sent).empty){for(n={},i=0;i<r.docs.length;i++)"STAT"!==(c=r.docs[i]).id&&(n[c.id]=c.data());e.allset=n}e.value&&(e.pset=e.$copyObject(e.value));case 5:case"end":return t.stop()}}),t)})))()},methods:{addSet:function(e,t,r){this.allset;this.$set(this.pset,e,{name:t,mode:r}),this.$emit("input",this.pset)},createSet:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return data={name:e.newSetName},t.next=3,o.d.collection("problems").doc(e.newSetID).set(data);case 3:e.$set(e.allset,e.newSetID,data),e.$set(e.pset,e.newSetID,{name:e.newSetName,mode:"rw"}),e.$emit("input",e.pset);case 6:case"end":return t.stop()}}),t)})))()}}},l=r(55),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v("\n    Current Sets:\n    "),e._l(e.pset,(function(t,n,o){return r("div",{key:"p"+n},[e._v("\n        "+e._s(o+1)+". "+e._s(t.name)+"#"+e._s(t.mode)+"\n    ")])})),e._v(" "),r("hr"),e._v("\n    All Sets:\n    "),e._l(e.allset,(function(t,n,o){return r("div",{key:"a"+n},[e._v("\n        "+e._s(o+1)+". "+e._s(t.name)+" \n        "),r("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:"success"},on:{click:function(r){return e.addSet(n,t.name,"r")}}},[e._v("R")]),e._v(" "),r("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:"success"},on:{click:function(r){return e.addSet(n,t.name,"rw")}}},[e._v("R/W")])],1)})),e._v(" "),r("hr"),e._v("\n    Create Set:\n    "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Set Name"},model:{value:e.newSetName,callback:function(t){e.newSetName=t},expression:"newSetName"}}),e._v(" "),r("b-input",{staticClass:"mb-3",attrs:{placeholder:"Set ID"},model:{value:e.newSetID,callback:function(t){e.newSetID=t},expression:"newSetID"}}),e._v(" "),r("b-button",{attrs:{size:"sm",variant:"success"},on:{click:e.createSet}},[e._v("Create")])],2)}),[],!1,null,null,null);t.default=component.exports},937:function(e,t,r){var content=r(1158);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(57).default)("6c31a4a6",content,!0,{sourceMap:!1})}}]);