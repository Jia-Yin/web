(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{752:function(e,t,o){var content=o(794);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(38).default)("7630b05a",content,!0,{sourceMap:!1})},753:function(e,t,o){var content=o(796);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(38).default)("6a11afea",content,!0,{sourceMap:!1})},754:function(e,t,o){var content=o(798);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(38).default)("12eee0c8",content,!0,{sourceMap:!1})},755:function(e,t,o){var content=o(800);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(38).default)("46f5ef1c",content,!0,{sourceMap:!1})},760:function(e,t,o){"use strict";o(11);var n=o(738),r=o.n(n),c={props:{quiz:Object,shuffle:Boolean,submit:Function,times:Number,skip:Boolean},data:function(){return{shuffledIndex:null,options:null,answered:!1,time:0,ptime:0,timer:null}},watch:{skip:function(e){console.log("RT skip Changed!"),e&&(this.timer&&(console.log("Clear Timer"),clearInterval(this.timer)),console.log("SKIP"),this.answered||(this.answered=!0,this.choose(-1)))},quiz:{immediate:!0,handler:function(e){console.log("Quiz",e),this.timer&&clearInterval(this.timer),this.answered=!1,this.shuffledIndex=r.a.range(e.options.length),this.shuffle&&(this.shuffledIndex=r.a.shuffle(this.shuffledIndex)),this.options=r.a.map(this.shuffledIndex,(function(t){return e.options[t]})),this.time=this.times,this.ptime=this.times,this.startTimer()}}},methods:{choose:function(e){(this.skip||!this.answered&&this.times-this.time>0)&&(console.log("RT choose Called!"),this.answered=!0,clearInterval(this.timer),this.submit({user:e,answer:this.quiz.answer,correct:e==this.quiz.answer}))},startTimer:function(){var e=this;setTimeout((function(){e.ptime--}),10),console.log("Start RT timer"),this.timer=setInterval((function(){e.time--,e.ptime--,0===e.time&&(console.log("RT Timeout"),e.choose(-1))}),1e3)}}},l=(o(793),o(31)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"qpanel"},[o("b-progress",{attrs:{variant:"warning",value:e.ptime,max:e.times}}),e._v(" "),o("div",{staticClass:"my-3 question",domProps:{innerHTML:e._s(e.$md.render(e.quiz.question))}}),e._v(" "),o("hr"),e._v(" "),o("b-list-group",{staticClass:"mb-1"},e._l(e.options,(function(option,t){return o("b-list-group-item",{key:t,staticClass:"mb-2",attrs:{button:""},on:{click:function(o){return e.choose(e.shuffledIndex[t])}}},[e._v(e._s(option))])})),1)],1)}),[],!1,null,"fc66780e",null);t.a=component.exports},761:function(e,t,o){"use strict";o(17),o(11),o(738);var n={props:{quiz:Object,submit:Function,times:Number,skip:Boolean},data:function(){return{answered:!1,time:0,ptime:0,timer:null,uans:null}},watch:{skip:function(e){console.log("RT skip Changed!"),e&&(this.timer&&(console.log("Clear Timer"),clearInterval(this.timer)),console.log("SKIP"),this.answered||(this.answered=!0,this.send()))},quiz:{immediate:!0,handler:function(e){console.log("Quiz",e),this.timer&&clearInterval(this.timer),this.answered=!1,this.time=this.times,this.ptime=this.times,this.startTimer()}}},methods:{checkanswer:function(e,t){if(!e||""===e)return!1;e=e.trim().replace(/\s\s+/g," "),t=t.trim().replace(/\s\s+/g," ");var o=/\s*([^\w])\s*/g;return(e=e.replace(o,"$1"))==(t=t.replace(o,"$1"))},send:function(){(this.skip||!this.answered&&this.times-this.time>0)&&(console.log("RT choose Called!"),this.answered=!0,clearInterval(this.timer),this.submit({user:this.uans,answer:this.quiz.answer,correct:this.checkanswer(this.uans,this.quiz.answer)}))},startTimer:function(){var e=this;setTimeout((function(){e.ptime--}),10),console.log("Start RT timer"),this.timer=setInterval((function(){e.time--,e.ptime--,0===e.time&&(console.log("RT Timeout"),e.send())}),1e3)}}},r=(o(795),o(31)),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"qpanel"},[o("b-progress",{attrs:{variant:"warning",value:e.ptime,max:e.times}}),e._v(" "),o("div",{staticClass:"my-3 question",domProps:{innerHTML:e._s(e.$md.render(e.quiz.question))}}),e._v(" "),o("hr"),e._v(" "),o("b-form-input",{attrs:{placeholder:"Answer"},model:{value:e.uans,callback:function(t){e.uans=t},expression:"uans"}}),e._v(" "),o("b-button",{attrs:{variant:"success"},on:{click:function(t){return e.send()}}},[e._v("提交")])],1)}),[],!1,null,"7f014483",null);t.a=component.exports},762:function(e,t,o){"use strict";o(17),o(59);var n=o(14),r=o(0),c=(o(11),o(738),{props:{quiz:Object,shuffle:Boolean,submit:Function,times:Number,skip:Boolean},data:function(){var e;return e={shuffledIndex:null,options:null,answered:!1,time:0,ptime:0,timer:null,servers:null,protocol:""},Object(r.a)(e,"servers",null),Object(r.a)(e,"maxavail",0),Object(r.a)(e,"result",null),Object(r.a)(e,"showresult",!1),Object(r.a)(e,"cmOption",{tabSize:3,indentUnit:3,styleActiveLine:!0,lineNumbers:!0,readOnly:!1,matchTags:!0,matchBrackets:!0,autoCloseBrackets:!0,indentWithTabs:!0,mode:"text/x-c++src",theme:"mdn-like",problemid:null,problem:{name:"載入中..."},tabidx:0,language:"cpp",code:"",cmstyle:{"font-size":"100%"},cmfontsize:100,info:{RunStatus:"Not Available",StyleCheck:"N/A",ErrorCase:null}}),e},mounted:function(){this.checkServer()},watch:{skip:function(e){console.log("RT skip Changed!"),e&&(this.timer&&(console.log("Clear Timer"),clearInterval(this.timer)),console.log("SKIP"),this.answered||(this.answered=!0,this.choose({correct:!1,uans:this.cmOption.code})))},quiz:{immediate:!0,handler:function(e){console.log("Quiz",e),this.timer&&clearInterval(this.timer),this.answered=!1,this.time=this.times,this.ptime=this.times,this.startTimer()}}},methods:{checkServer:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n,i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e,e.$store.state.servers){t.next=4;break}return t.next=4,e.$store.dispatch("getServers").then((function(e){console.log("Get SERVER RESULT:",e)})).catch((function(e){console.log("Get SERVER ERROR:",e)}));case 4:for(o="ws://","https:"==document.location.protocol?(e.servers=e.$store.state.servers.https,o="wss://"):e.servers=e.$store.state.servers.http,n=e.servers.length,i=0;i<n;i++)r=o+e.servers[i],e.sendMessage(r,"HELLO"+i);case 8:case"end":return t.stop()}}),t)})))()},send:function(){console.log("SEND CALLED"),this.check(),console.log("Submit Code:",this.cmOption.code),console.log("RESULT",this.result),clearInterval(this.timer),"通過"===this.result?this.choose({correct:!0,uans:this.cmOption.code}):this.choose({correct:!1,uans:this.cmOption.code})},check:function(){var code=this.cmOption.code,e=this.quiz.testcode.replace("CODEHERE",code),content=(e.replace(/\"/g,'\\"'),'CODE:{"sourcecode":'+JSON.stringify(e));content+=',"sourcelang":"cpp"',content+=',"testdata":{"style":"RUN","testsets":[{"testcases":[{"input":""}]}]}}',this.sendMessage(this.protocol,content)},parseMessage:function(e){var data=JSON.parse(e.data);if("string"==typeof data&&"HELLO:"===data.substr(0,6)){var t=data.substr(6),o=t.indexOf(":");console.log("SERVER NO = ",t.substr(0,o)),console.log("NUMSTR = ",t.substr(o+1));var n=parseInt(t.substr(o+1),10);console.log("NUM = ",n),n>this.maxavail&&(this.maxavail=n,this.protocol=e.origin,this.status="SRV-"+t.substr(0,o),console.log("Choose Server:",this.protocol))}else try{this.cmOption.info=JSON.parse(e.data);var r=this.cmOption.info.RunStatus;if(console.log("STATUS",r),r.indexOf('["AC"]')>=0)this.result="通過";else if(r.indexOf("Wrong")>=0){var c=r.replace(/\\n/g,"\n");c=(c=c.replace('["',"")).replace('"]',""),this.result=c}else this.result=r;this.showresult=!0,r.indexOf("error")>=0?r="CE":"AC"!=r&&(r="WA",console.log("ERRORCASE",this.cmOption.info.ErrorCase))}catch(e){alert(e)}this.trial=!1},sendMessage:function(e,content){var t=this,o=e+"/submit",n=null;try{n=new WebSocket(o)}catch(e){console.log("Error",e)}n.onopen=function(e){n.send(content)},n.onmessage=function(e){console.log("Receive:",e.data),t.parseMessage(e),t.disabled=!1,n.close()},n.onclose=function(e){console.log("WS closed:",e)},n.onerror=function(e){console.log("Socket ERR:",e),n.close()}},onCmReady:function(e){e.setSize(null,500)},choose:function(e){(this.skip||!this.answered&&this.times-this.time>0)&&(console.log("RT choose Called!"),this.answered=!0,clearInterval(this.timer),this.submit(e))},startTimer:function(){var e=this;setTimeout((function(){e.ptime--}),10),console.log("Start RT timer"),this.timer=setInterval((function(){e.time--,e.ptime--,0===e.time&&(console.log("RT Timeout"),e.choose({correct:!1,uans:e.cmOption.code}))}),1e3)}}}),l=(o(797),o(31)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"qpanel"},[o("b-progress",{attrs:{variant:"warning",value:e.ptime,max:e.times}}),e._v(" "),o("div",{staticClass:"my-3 question",domProps:{innerHTML:e._s(e.$md.render(e.quiz.question))}}),e._v(" "),o("hr"),e._v(" "),o("b-button",{on:{click:function(t){return e.check()}}},[e._v("測試")]),e._v(" "),o("b-button",{on:{click:function(t){return e.send()}}},[e._v("提交")]),e._v(" "),e.showresult?o("div",{staticClass:"result"},[o("pre",[e._v(e._s(e.result))]),e._v(" "),o("br"),e._v(" "),o("b-button",{attrs:{variant:"primary"},on:{click:function(t){e.showresult=!1}}},[e._v("OK")])],1):e._e(),e._v(" "),o("codemirror",{style:e.cmOption.cmstyle,attrs:{options:e.cmOption},on:{ready:e.onCmReady},model:{value:e.cmOption.code,callback:function(t){e.$set(e.cmOption,"code",t)},expression:"cmOption.code"}})],1)}),[],!1,null,"63e85b76",null);t.a=component.exports},763:function(e,t,o){"use strict";o(59);var n=o(14),r=o(0),c=(o(11),o(738),{props:{quiz:Object,shuffle:Boolean,submit:Function,times:Number,skip:Boolean},data:function(){var e;return e={shuffledIndex:null,options:null,answered:!1,time:0,ptime:0,timer:null,servers:null,protocol:""},Object(r.a)(e,"servers",null),Object(r.a)(e,"maxavail",0),Object(r.a)(e,"result",null),Object(r.a)(e,"showresult",!1),Object(r.a)(e,"cmOption",{tabSize:3,indentUnit:3,styleActiveLine:!0,lineNumbers:!0,readOnly:!1,matchTags:!0,matchBrackets:!0,autoCloseBrackets:!0,indentWithTabs:!0,mode:"text/x-c++src",theme:"mdn-like",problemid:null,problem:{name:"載入中..."},tabidx:0,language:"c",code:"",cmstyle:{"font-size":"100%"},cmfontsize:100,info:{RunStatus:"Not Available",StyleCheck:"N/A",ErrorCase:null}}),e},mounted:function(){this.checkServer()},watch:{skip:function(e){console.log("RT skip Changed!"),e&&(this.timer&&(console.log("Clear Timer"),clearInterval(this.timer)),console.log("SKIP"),this.answered||(this.answered=!0,this.choose({correct:!1,uans:this.cmOption.code})))},quiz:{immediate:!0,handler:function(e){console.log("Quiz",e),this.timer&&clearInterval(this.timer),this.answered=!1,this.time=this.times,this.ptime=this.times,this.startTimer()}}},methods:{checkServer:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n,i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e,e.$store.state.servers){t.next=4;break}return t.next=4,e.$store.dispatch("getServers").then((function(e){console.log("Get SERVER RESULT:",e)})).catch((function(e){console.log("Get SERVER ERROR:",e)}));case 4:for(o="ws://","https:"==document.location.protocol?(e.servers=e.$store.state.servers.https,o="wss://"):e.servers=e.$store.state.servers.http,n=e.servers.length,i=0;i<n;i++)r=o+e.servers[i],e.sendMessage(r,"HELLO"+i);case 8:case"end":return t.stop()}}),t)})))()},send:function(){console.log("SEND CALLED"),this.check(),console.log("Submit Code:",this.cmOption.code),console.log("RESULT",this.result),clearInterval(this.timer),"通過"===this.result?this.choose({correct:!0,uans:this.cmOption.code}):this.choose({correct:!1,uans:this.cmOption.code})},check:function(){var e=JSON.parse(JSON.stringify(this.quiz));e.sourceCode=this.cmOption.code,e.SourceLang="cpp";var content=JSON.stringify(e);console.log("Content","CODE:"+content),this.sendMessage(this.protocol,"CODE:"+content)},parseMessage:function(e){var data=JSON.parse(e.data);if("string"==typeof data&&"HELLO:"===data.substr(0,6)){var t=data.substr(6),o=t.indexOf(":");console.log("SERVER NO = ",t.substr(0,o)),console.log("NUMSTR = ",t.substr(o+1));var n=parseInt(t.substr(o+1),10);console.log("NUM = ",n),n>this.maxavail&&(this.maxavail=n,this.protocol=e.origin,this.status="SRV-"+t.substr(0,o),console.log("Choose Server:",this.protocol))}else try{this.cmOption.info=JSON.parse(e.data);var r=this.cmOption.info.RunStatus;if(console.log("STATUS",r),"AC"===r)this.result="通過";else if(r.indexOf("WA")>=0){var c=this.cmOption.info.ErrorCase;this.result="Wrong Case:\n",this.result+="Input:\n"+c.input+"\n",this.result+="Right:\n"+c.right+"\n",this.result+="Wrong:\n"+c.wrong}else this.result=r;this.showresult=!0,r.indexOf("error")>=0?r="CE":"AC"!=r&&(r="WA",console.log("ERRORCASE",this.cmOption.info.ErrorCase))}catch(e){alert(e)}this.trial=!1},sendMessage:function(e,content){console.log("Send Called",e,content);var t=this,o=e+"/submit",n=null;try{n=new WebSocket(o)}catch(e){console.log("Error",e)}n.onopen=function(e){n.send(content)},n.onmessage=function(e){console.log("Receive:",e.data),t.parseMessage(e),t.disabled=!1,n.close()},n.onclose=function(e){console.log("WS closed:",e)},n.onerror=function(e){console.log("Socket ERR:",e),n.close()}},onCmReady:function(e){e.setSize(null,500)},choose:function(e){(this.skip||!this.answered&&this.times-this.time>0)&&(console.log("RT choose Called!"),this.answered=!0,clearInterval(this.timer),this.submit(e))},startTimer:function(){var e=this;setTimeout((function(){e.ptime--}),10),console.log("Start RT timer"),this.timer=setInterval((function(){e.time--,e.ptime--,0===e.time&&(console.log("RT Timeout"),e.choose({correct:!1,uans:e.cmOption.code}))}),1e3)}}}),l=(o(799),o(31)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"qpanel"},[o("b-progress",{attrs:{variant:"warning",value:e.ptime,max:e.times}}),e._v(" "),o("div",{staticClass:"my-3 question",domProps:{innerHTML:e._s(e.$md.render(e.quiz.question))}}),e._v(" "),o("hr"),e._v(" "),o("b-button",{on:{click:function(t){return e.check()}}},[e._v("測試")]),e._v(" "),o("b-button",{on:{click:function(t){return e.send()}}},[e._v("提交")]),e._v(" "),e.showresult?o("div",{staticClass:"result"},[o("pre",[e._v(e._s(e.result))]),e._v(" "),o("br"),e._v(" "),o("b-button",{attrs:{variant:"primary"},on:{click:function(t){e.showresult=!1}}},[e._v("OK")])],1):e._e(),e._v(" "),o("codemirror",{style:e.cmOption.cmstyle,attrs:{options:e.cmOption},on:{ready:e.onCmReady},model:{value:e.cmOption.code,callback:function(t){e.$set(e.cmOption,"code",t)},expression:"cmOption.code"}})],1)}),[],!1,null,"402be764",null);t.a=component.exports},793:function(e,t,o){"use strict";var n=o(752);o.n(n).a},794:function(e,t,o){(t=o(37)(!1)).push([e.i,".qpanel[data-v-fc66780e]{background:#eee;padding:24px}.question[data-v-fc66780e]{color:#00f;font-size:120%}.progress[data-v-fc66780e] .progress-bar{transition:width 1s linear}",""]),e.exports=t},795:function(e,t,o){"use strict";var n=o(753);o.n(n).a},796:function(e,t,o){(t=o(37)(!1)).push([e.i,".qpanel[data-v-7f014483]{background:#eee;padding:24px}.question[data-v-7f014483]{color:#00f;font-size:120%}.progress[data-v-7f014483] .progress-bar{transition:width 1s linear}",""]),e.exports=t},797:function(e,t,o){"use strict";var n=o(754);o.n(n).a},798:function(e,t,o){(t=o(37)(!1)).push([e.i,".qpanel[data-v-63e85b76]{background:#eee;padding:24px}.question[data-v-63e85b76]{color:#00f}.progress[data-v-63e85b76] .progress-bar{transition:width 1s linear}.result[data-v-63e85b76]{position:fixed;left:365px;top:365px;width:50%;height:50%;background:#ddd;z-index:100;padding:24px;border:2px solid green}",""]),e.exports=t},799:function(e,t,o){"use strict";var n=o(755);o.n(n).a},800:function(e,t,o){(t=o(37)(!1)).push([e.i,".qpanel[data-v-402be764]{background:#eee;padding:24px}.question[data-v-402be764]{color:#00f}.progress[data-v-402be764] .progress-bar{transition:width 1s linear}.result[data-v-402be764]{position:fixed;left:365px;top:365px;width:50%;height:50%;background:#ddd;z-index:100;padding:24px;border:2px solid green;overflow-y:scroll}",""]),e.exports=t}}]);