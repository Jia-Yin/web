(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{744:function(t,e,r){"use strict";r(745);var o={pad:function(t){return("0"+t).slice(-2)},mmss:function(t){var e=Math.floor(t/60);return t%=60,"".concat(this.pad(e),":").concat(this.pad(t))},hhmmss:function(t){var e=Math.floor(t/60);t%=60;var r=Math.floor(e/60);return e%=60,"".concat(this.pad(r),":").concat(this.pad(e),":").concat(this.pad(t))},getToday:function(){var t=new Date,dd=String(t.getDate()).padStart(2,"0"),e=String(t.getMonth()+1).padStart(2,"0");return t.getFullYear()+e+dd}};e.a=o},745:function(t,e,r){"use strict";var o=r(23),n=r(746),c=r(285),l=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(c);o(o.P+o.F*l,"String",{padStart:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},746:function(t,e,r){var o=r(50),n=r(286),c=r(52);t.exports=function(t,e,r,l){var m=String(c(t)),f=m.length,d=void 0===r?" ":String(r),h=o(e);if(h<=f||""==d)return m;var v=h-f,y=n.call(d,Math.ceil(v/d.length));return y.length>v&&(y=y.slice(0,v)),l?y+m:m+y}},753:function(t,e,r){"use strict";r(5),r(2),r(3),r(1),r(4);var o=r(0),n=r(100);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var l={data:function(){return{fields:[{key:"type",label:"Type",sortable:!0,sortDirection:"desc"},{key:"title",label:"Title",sortable:!0,sortDirection:"desc"},{key:"question",label:"Question",sortable:!1},{key:"actions",label:"Action",class:"text-center"}],totalRows:1,currentPage:1,perPage:5,pageOptions:[5,10,15],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],todel:null,selected:[]}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(n.b)({user:function(t){return t.user},quizzes:function(t){return t.quizzes}})),mounted:function(){this.totalRows=this.quizzes.length},created:function(){var t=this;this.quizzes&&0===this.quizzes.length&&this.$store.dispatch("getCollection","quizzes").then((function(){t.totalRows=t.quizzes.length}))},methods:{onRowSelected:function(t){this.selected=t,this.$emit("rowSelected",t)},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},editquiz:function(t){this.$store.commit("setObject",{key:"quiz",value:t}),"singlechoice"===t.type?this.$router.push("/admin/scedit"):"functest"===t.type?this.$router.push("/admin/ftedit"):"progtest"===t.type?this.$router.push("/admin/pgedit"):"fillin"===t.type&&this.$router.push("/admin/fiedit")},copyquiz:function(t){var e=this,r=JSON.parse(JSON.stringify(t));delete r.id,r.title+="(COPY)",this.$store.dispatch("addCollectionItem",{collection:"quizzes",item:r}).then((function(){e.$router.push("/admin/quizlist")}))},testquiz:function(t){this.$store.commit("setObject",{key:"quiz",value:t}),this.$router.push("/admin/testquiz")},deletequiz:function(){var t=this;this.$store.dispatch("deleteDoc",{collection:"quizzes",id:this.todel.id}).then((function(){t.$router.push("/admin/quizlist")}))},deleteconfirm:function(t){this.todel=t,this.$bvModal.show("modal-delete")}},watch:{quizzes:function(t){this.totalRows=this.quizzes.length}}},m=r(33),component=Object(m.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"qpanel"},[r("b-row",[r("b-col",{staticClass:"my-1",attrs:{md:"4"}},[r("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"filterInput"}},[r("b-input-group",{attrs:{size:"sm"}},[r("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),r("b-input-group-append",[r("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),t._v(" "),r("b-col",{staticClass:"my-1",attrs:{md:"2"}},[r("b-form-group",{staticClass:"mb-0",attrs:{label:"N","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm","label-for":"perPageSelect"}},[r("b-form-select",{attrs:{id:"perPageSelect",size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),r("b-col",{staticClass:"my-1",attrs:{md:"1"}},[r("b-button",{attrs:{size:"sm",variant:"outline-success",to:"/admin/quizadd"}},[t._v("New")])],1),t._v(" "),r("b-col",{staticClass:"my-1",attrs:{md:"5"}},[r("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1),t._v(" "),r("b-modal",{attrs:{id:"modal-delete",title:"確認刪除"},on:{ok:function(e){return t.deletequiz()}}},[r("p",{staticClass:"my-4"},[t._v(t._s(t.todel&&t.todel.title))])]),t._v(" "),r("b-table",{staticClass:"mt-3",attrs:{"show-empty":"",small:"",stacked:"md",selectable:!0,"select-mode":"range",items:t.quizzes,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,filterIncludedFields:t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered,"row-selected":t.onRowSelected},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[r("b-button-group",[r("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(r){return t.testquiz(e.item)}}},[r("fa",{attrs:{icon:"check"}})],1),t._v(" "),r("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(r){return t.editquiz(e.item)}}},[r("fa",{attrs:{icon:"edit"}})],1),t._v(" "),r("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(r){return t.copyquiz(e.item)}}},[r("fa",{attrs:{icon:"copy"}})],1),t._v(" "),r("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(r){return t.deleteconfirm(e.item)}}},[r("fa",{attrs:{icon:"trash-alt"}})],1)],1)]}}])})],1)}),[],!1,null,null,null);e.a=component.exports},760:function(t,e,r){var content=r(797);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(40).default)("7c8195f5",content,!0,{sourceMap:!1})},796:function(t,e,r){"use strict";var o=r(760);r.n(o).a},797:function(t,e,r){(e=r(39)(!1)).push([t.i,".card[data-v-63490b56]{margin:30px 10px;padding:10px 10px 0}.card-title[data-v-63490b56]{margin-bottom:24px}.btn[data-v-63490b56]{min-width:10%;margin:12px auto 24px}",""]),t.exports=e},898:function(t,e,r){"use strict";r.r(e);r(5),r(2),r(3),r(1),r(4);var o=r(0),n=r(100),c=r(753),l=r(744);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={components:{QuizMan:c.a},data:function(){return{examform:{title:null,timelimit:60,totalscore:0,probs:[]},examprobs:[],examfields:[{key:"type",label:"Type",sortable:!0,sortDirection:"desc"},{key:"title",label:"Title",sortable:!1},{key:"question",label:"Question",sortable:!1},{key:"timelimit",label:"Time Limit",sortable:!0},{key:"score",label:"Score",sortable:!0},{key:"actions",label:"Action",class:"text-center"}],quizselected:[],probselected:[],probconfig:{timelimit:null,score:null},sorttype:"title",tmap:{singlechoice:0,fillin:1,functest:2,progtest:3},cachequiz:{}}},computed:f(f({},Object(n.b)({user:function(t){return t.user}})),{},{examinfo:function(){var t=0,e=0;this.examprobs.forEach((function(r){t+=r.score,e+=r.timelimit}));var r="Total Score = ".concat(t,", Prob Times = ").concat(this.mmss(e));return r+=", Total Times = ".concat(this.examform.timelimit,":00")}}),created:function(){},methods:{quizbyid:function(t){if(this.cachequiz[t])return this.cachequiz[t];for(var i=0;i<this.quizzes.length;i++)if(this.quizzes[i].id===t)return this.cachequiz[t]=this.quizzes[i],this.quizzes[i];return null},addExam:function(){var t=this,e=0,r=[];this.examprobs.forEach((function(o){if(!o.order){var n=t.quizbyid(o.id);o.order=100*t.tmap[n.type]}e+=o.score,r.push({id:o.id,score:o.score,timelimit:o.timelimit,order:o.order})})),this.examform.totalscore=e,this.examform.probs=r,this.$store.dispatch("addCollectionItem",{collection:"exams",item:this.examform}).then((function(){t.$router.push("/admin/examlist")}))},sortCompare:function(t,e,r,o,n,c,l){if("type"===r){var a=this.tmap[t[r]],b=this.tmap[e[r]];return a<b?-1:a>b?1:0}var m=t[r],f=e[r];return"number"==typeof m&&"number"==typeof f?m<f?-1:m>f?1:0:toString(m).localeCompare(toString(f),l,c)},setprobconfig:function(){var t=0,e=0;this.probconfig.timelimit&&""!==this.probconfig.timelimit&&(t=parseInt(this.probconfig.timelimit)),this.probconfig.score&&""!==this.probconfig.score&&(e=parseInt(this.probconfig.score)),this.probselected.forEach((function(r){t>0&&(r.timelimit=t),e>0&&(r.score=e)})),this.probconfig={timelimit:null,score:null}},mmss:function(t){return l.a.mmss(t)},deleteprob:function(t){var e=this;this.pidExist(this.probselected,t.id)||this.probselected.push(t),this.examprobs=this.examprobs.filter((function(t){return!e.pidExist(e.probselected,t.id)}))},pidExist:function(t,e){for(var i=0;i<t.length;i++)if(e===t[i].id)return!0;return!1},probRowSelected:function(t){this.probselected=t},quizRowSelected:function(t){this.quizselected=t},addQuiz:function(){for(var t={singlechoice:[30,2],fillin:[30,2],functest:[360,5],progtest:[600,10]},i=0;i<this.quizselected.length;i++){var e=this.quizselected[i];if(!this.pidExist(this.examprobs,e.id)){var r={id:e.id,type:e.type,title:e.title,question:e.question,timelimit:t[e.type][0],score:t[e.type][1]};this.examprobs.push(r)}}}}},h=(r(796),r(33)),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[r("h1",{staticClass:"mt-4"},[t._v("新增考試")]),t._v(" "),r("b-button",{attrs:{variant:"outline-success",to:"/admin/examlist"}},[t._v("取消")]),t._v(" "),r("b-button",{attrs:{variant:"outline-success"},on:{click:t.addExam}},[t._v("確定")]),t._v(" "),r("b-row",[r("b-col",{attrs:{md:"5"}},[r("b-form-group",{attrs:{"label-cols-md":"4",label:"Title","label-for":"examtitle"}},[r("b-form-input",{attrs:{id:"examtitle",type:"text"},model:{value:t.examform.title,callback:function(e){t.$set(t.examform,"title",e)},expression:"examform.title"}})],1)],1),t._v(" "),r("b-col",{attrs:{"offset-md":"1",md:"5"}},[r("b-form-group",{attrs:{"label-cols-md":"4",label:"限時 (分)","label-for":"examtime"}},[r("b-form-input",{attrs:{id:"examtime",type:"number"},model:{value:t.examform.timelimit,callback:function(e){t.$set(t.examform,"timelimit",e)},expression:"examform.timelimit"}})],1)],1)],1),t._v(" "),r("hr"),t._v(" "),r("p",[t._v(t._s(t.examinfo))]),t._v(" "),r("b-form",{attrs:{inline:""}},[r("b-form-input",{attrs:{id:"probtime",type:"text",placeholder:"Prob Time Limit"},model:{value:t.probconfig.timelimit,callback:function(e){t.$set(t.probconfig,"timelimit",e)},expression:"probconfig.timelimit"}}),t._v(" "),r("b-form-input",{attrs:{id:"probscore",type:"text",placeholder:"Prob Score"},model:{value:t.probconfig.score,callback:function(e){t.$set(t.probconfig,"score",e)},expression:"probconfig.score"}}),t._v(" "),r("b-button",{attrs:{variant:"outline-success"},on:{click:t.setprobconfig}},[t._v("設定問題參數")])],1),t._v(" "),r("b-table",{staticClass:"mt-3",attrs:{"show-empty":"",small:"",stacked:"md",selectable:!0,"select-mode":"range",items:t.examprobs,fields:t.examfields,"sort-by":t.sorttype,"sort-compare":t.sortCompare},on:{"update:sortBy":function(e){t.sorttype=e},"update:sort-by":function(e){t.sorttype=e},"row-selected":t.probRowSelected},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[r("b-button-group",[r("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(r){return t.testprob(e.item)}}},[r("fa",{attrs:{icon:"check"}})],1),t._v(" "),r("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(r){return t.editprob(e.item)}}},[r("fa",{attrs:{icon:"edit"}})],1),t._v(" "),r("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(r){return t.deleteprob(e.item)}}},[r("fa",{attrs:{icon:"trash-alt"}})],1)],1)]}}])}),t._v(" "),r("b-button",{attrs:{variant:"outline-success"},on:{click:t.addQuiz}},[t._v("添加到考試")]),t._v(" "),r("QuizMan",{on:{rowSelected:t.quizRowSelected}})],1)}),[],!1,null,"63490b56",null);e.default=component.exports}}]);