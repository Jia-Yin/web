(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{737:function(t,e,n){"use strict";n(738);var o={pad:function(t){return("0"+t).slice(-2)},mmss:function(t){var e=Math.floor(t/60);return t%=60,"".concat(this.pad(e),":").concat(this.pad(t))},hhmmss:function(t){var e=Math.floor(t/60);t%=60;var n=Math.floor(e/60);return e%=60,"".concat(this.pad(n),":").concat(this.pad(e),":").concat(this.pad(t))},getToday:function(){var t=new Date,dd=String(t.getDate()).padStart(2,"0"),e=String(t.getMonth()+1).padStart(2,"0");return t.getFullYear()+e+dd}};e.a=o},742:function(t,e,n){var content=n(771);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("694ac046",content,!0,{sourceMap:!1})},743:function(t,e,n){"use strict";n(17),n(1);var o=n(780),r=n.n(o),c={checkServer:function(t){return console.log("Servers to Check:",t),new Promise((function(e,n){var o="ws://",c=t.http;"https:"==document.location.protocol&&(c=t.https,o="wss://");var l=c.length,d=0,m=null,h=0,f=!1;window.setTimeout((function(){return f=!0}),2e3);for(var v=[],k=function(i){var t=o+c[i],k=t+"/submit",y=Math.random();console.log("Check:",k);var w=new r.a(k,{packMessage:function(data){return data.content},unpackMessage:function(data){return data},attachRequestId:function(data,t){return Object.assign({id:t},data)},extractRequestId:function(data){return y}});w.open().then((function(){return w.sendRequest({content:"HELLO"+i},{requestId:y})})).then((function(o){var r=o.substr(7);console.log("Response from:",r);var k=r.indexOf(":"),y=parseInt(r.substr(k+1),10);if(v.push({server:c[i],capacity:y}),y>d)d=y,m=t;else if(y===d){Math.random()<.3&&(m=t)}if(h++,f||h===l||3===h)return d>0?void e({best:{channel:m+"/submit",capacity:d},available:v}):void n("Judger not available!")})).catch((function(t){if(h++,f||h===l||3===h)return d>0?void e({best:{channel:m+"/submit",capacity:d},available:v}):void n("Judger not available!")}))},i=0;i<l;i++)k(i)}))},judgeFunctest:function(t,code){var content={sourcecode:code,sourcelang:"cpp",testdata:{style:"RUN",testsets:[{testcases:[{input:""}]}]}};return new Promise((function(e,n){if(t){var o=Math.random(),c=new r.a(t,{packMessage:function(data){return"CODE:"+JSON.stringify(data.content)},unpackMessage:function(data){return data},attachRequestId:function(data,t){return Object.assign({id:t},data)},extractRequestId:function(data){return o}});c.open().then((function(){return c.sendRequest({content:content},{requestId:o})})).then((function(t){try{var o=JSON.parse(t).RunStatus;if(o.indexOf('["AC"]')>=0)return void e("AC");if(o.indexOf("Wrong")>=0){var r=o.replace(/\\n/g,"\n");return r=(r=r.replace('["',"")).replace('"]',""),void e(r)}return void e(o)}catch(t){return console.log("Error:",t),void n(t)}})).catch((function(t){console.log("Error:",t),n(t)}))}else n("Null judger.")}))},judgeProgtest:function(t,e){var n=this,o=Math.random();return new Promise((function(c,l){if(t){var d=new r.a(t,{packMessage:function(data){return"CODE:"+JSON.stringify(data.content)},unpackMessage:function(data){return data},attachRequestId:function(data,t){return Object.assign({id:t},data)},extractRequestId:function(data){return o}});d.open().then((function(){return d.sendRequest({content:e},{requestId:o})})).then((function(t){try{var e=JSON.parse(t),o=e.RunStatus;if("AC"===o)return void c("AC");if("WA"===o||"PE"===o){var r=e.ErrorCase;return n.result=o+"\n\nWrong Case:\n",n.result+="Input:\n"+r.input.replace(/\n/g,"\\n\n")+"\n",n.result+="Right:\n"+r.right.replace(/\n/g,"\\n\n")+"\n",n.result+="Wrong:\n"+r.wrong.replace(/\n/g,"\\n\n"),void c(n.result)}return void c(o)}catch(t){return console.log("Error:",t),void l(t)}})).catch((function(t){console.log("Error:",t),l(t)}))}else l("Null judger.")}))}};e.a=c},746:function(t,e,n){"use strict";n(11);var o=n(744),r=n.n(o),c={props:{quiz:Object,shuffle:Boolean,submit:Function,times:Number,skip:Boolean},data:function(){return{shuffledIndex:null,options:null,answered:!1,time:0,ptime:0,timer:null}},created:function(){var t=this;this.shuffledIndex=r.a.range(this.quiz.options.length),this.shuffle&&(this.shuffledIndex=r.a.shuffle(this.shuffledIndex)),this.options=r.a.map(this.shuffledIndex,(function(e){return t.quiz.options[e]})),this.time=this.times,this.ptime=this.times},mounted:function(){this.startTimer()},watch:{skip:function(t){t&&this.choose(-1)}},methods:{choose:function(t){this.answered||(this.answered=!0,console.log("Clear Inner Timer"),clearInterval(this.timer),this.submit({user:t,answer:this.quiz.answer,correct:t==this.quiz.answer,usetime:this.times-this.time}))},startTimer:function(){var t=this;setTimeout((function(){t.ptime--}),10),console.log("Start Inner Timer"),this.timer=setInterval((function(){t.time--,t.ptime--,0===t.time&&t.choose(-1)}),1e3)}}},l=(n(815),n(31)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qpanel"},[n("b-progress",{attrs:{variant:"warning",value:t.ptime,max:t.times}}),t._v(" "),n("div",{staticClass:"my-3 question",domProps:{innerHTML:t._s(t.$md.render(t.quiz.question))}}),t._v(" "),n("hr"),t._v(" "),n("b-list-group",{staticClass:"mb-1"},t._l(t.options,(function(option,e){return n("b-list-group-item",{key:e,staticClass:"mb-2",attrs:{button:""},on:{click:function(n){return t.choose(t.shuffledIndex[e])}}},[t._v(t._s(option))])})),1)],1)}),[],!1,null,"586221ea",null);e.a=component.exports},747:function(t,e,n){"use strict";n(17),n(11),n(744);var o={props:{quiz:Object,submit:Function,times:Number,skip:Boolean},data:function(){return{answered:!1,time:0,ptime:0,timer:null,uans:null}},created:function(){this.time=this.times,this.ptime=this.times},mounted:function(){this.startTimer()},watch:{skip:function(t){t&&this.send()}},methods:{checkanswer:function(t,e){if(!t||""===t)return!1;t=t.trim().replace(/\s\s+/g," "),e=e.trim().replace(/\s\s+/g," ");var n=/\s*([^\w])\s*/g;return(t=t.replace(n,"$1"))==(e=e.replace(n,"$1"))},send:function(){this.answered||(this.answered=!0,console.log("Clear Inner Timer"),clearInterval(this.timer),this.submit({user:this.uans,answer:this.quiz.answer,correct:this.checkanswer(this.uans,this.quiz.answer),usetime:this.times-this.time}))},startTimer:function(){var t=this;setTimeout((function(){t.ptime--}),10),console.log("Start Inner timer"),this.timer=setInterval((function(){t.time--,t.ptime--,0===t.time&&t.send()}),1e3)}}},r=(n(817),n(31)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qpanel"},[n("b-progress",{attrs:{variant:"warning",value:t.ptime,max:t.times}}),t._v(" "),n("div",{staticClass:"my-3 question",domProps:{innerHTML:t._s(t.$md.render(t.quiz.question))}}),t._v(" "),n("hr"),t._v(" "),n("b-form-input",{staticClass:"my-2",attrs:{placeholder:"Answer"},model:{value:t.uans,callback:function(e){t.uans=e},expression:"uans"}}),t._v(" "),n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.send()}}},[t._v("提交")])],1)}),[],!1,null,"6699340f",null);e.a=component.exports},748:function(t,e,n){"use strict";n(17),n(11);var o=n(749),r=n(743),c=n(737),l={components:{CodePanel:o.a},props:{quiz:Object,submit:Function,times:Number,skip:Boolean},data:function(){return{mycode:"",channel:null,answered:!1,time:0,timer:null,result:null,judging:!1}},mounted:function(){this.time=this.times,this.startTimer()},watch:{skip:function(t){t&&this.send()}},methods:{looked:function(){this.judging=!1},mmss:function(t){return c.a.mmss(t)},servers:function(t){this.channel=t.best.channel,console.log("Available",t.available),console.log("Channel",this.channel)},send:function(){var t=this;if(this.channel&&!this.answered){this.answered=!0,console.log("Clear Inner Timer"),clearInterval(this.timer);var code=this.mycode,e=this.quiz.testcode.replace("CODEHERE",code);r.a.judgeFunctest(this.channel,e).then((function(e){"AC"===e?t.submit({correct:!0,uans:t.mycode,usetime:t.times-t.time}):t.submit({correct:!1,uans:t.mycode,usetime:t.times-t.time})})).catch((function(e){t.submit({correct:!1,uans:t.mycode,usetime:t.times-t.time})}))}},check:function(){var t=this;if(!this.judging&&this.channel){this.judging=!0,this.result="Checking...",this.$bvModal.show("modal-check");var code=this.mycode,e=this.quiz.testcode.replace("CODEHERE",code);r.a.judgeFunctest(this.channel,e).then((function(e){console.log("Status",e),t.result="AC"===e?"通過":e,t.showresult=!0})).catch((function(e){t.judging=!1,t.result=e}))}},startTimer:function(){var t=this;console.log("Start Inner Timer"),this.timer=setInterval((function(){t.time>0&&t.time--,0===t.time&&(console.log("RT Timeout"),t.send())}),1e3)}}},d=(n(838),n(31)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qpanel"},[n("p",{staticClass:"timestatus"},[n("span",{staticClass:"type"},[t._v("《函式題》")]),t._v(" 倒數計時 "+t._s(t.mmss(t.time)))]),t._v(" "),n("div",{staticClass:"my-3 question",domProps:{innerHTML:t._s(t.$md.render(t.quiz.question))}}),t._v(" "),n("b-modal",{attrs:{centered:"",size:"xl",id:"modal-check",title:"檢測結果","ok-title":"OK","ok-only":"","no-close-on-esc":!0,"no-close-on-backdrop":!0},on:{close:t.looked,ok:t.looked}},[n("pre",[t._v(t._s(t.result))])]),t._v(" "),n("CodePanel",{attrs:{judging:t.judging,check:t.check,submit:t.send,height:500},on:{servers:t.servers},model:{value:t.mycode,callback:function(e){t.mycode=e},expression:"mycode"}})],1)}),[],!1,null,"fa15fd74",null);e.a=component.exports},749:function(t,e,n){"use strict";n(5),n(2),n(3),n(1),n(4),n(59);var o=n(14),r=n(0),c=(n(11),n(80)),l=n(743);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var m={props:{value:String,height:Number,ready:Function,check:Function,submit:Function,judging:Boolean},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.b)({sendRemind:function(t){return t.params.sendRemind}})),data:function(){return{status:"INIT",judgable:!1,defaultchannel:"?",connstatus:"light",cmstyle:{"font-size":"100%"},cmfontsize:100,cm:null,cmcode:null,cmOption:{tabSize:3,indentUnit:3,styleActiveLine:!0,lineNumbers:!1,readOnly:!1,matchTags:!0,matchBrackets:!0,autoCloseBrackets:!0,indentWithTabs:!0,mode:"text/x-c++src",theme:"mdn-like"}}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cmcode=t.value,t.$store.state.servers){e.next=4;break}return e.next=4,t.$store.dispatch("getServers");case 4:l.a.checkServer(t.$store.state.servers).then((function(e){t.connstatus="success";var n=e.best.channel.toUpperCase();t.status="READY",t.judgable=!t.judging,"WSS"===n.substr(0,3)?t.defaultchannel=n.substr(6,1):t.defaultchannel=n.substr(5,1),t.$emit("servers",e)})).catch((function(e){t.connstatus="danger",console.log("CP Error",e)}));case 5:case"end":return e.stop()}}),e)})))()},methods:{send:function(){void 0===this.sendRemind||this.sendRemind?this.$bvModal.show("modal-send"):this.submit()},toggleRemind:function(t){this.$store.commit("setObject",{key:"sendRemind",value:!t})},cinput:function(t){this.$emit("input",t)},incfont:function(){this.cmfontsize+=10,this.cmstyle={"font-size":"".concat(this.cmfontsize,"%")}},decfont:function(){this.cmfontsize-=10,this.cmstyle={"font-size":"".concat(this.cmfontsize,"%")}},resetfont:function(){this.cmfontsize=100,this.cmstyle={"font-size":"".concat(this.cmfontsize,"%")}},onCmReady:function(t){this.cm=t,t.setSize(null,this.height)}},watch:{height:function(t){this.cm.setSize(null,t)},judging:function(t){this.judgable=!t&&"READY"===this.status}}},h=(n(770),n(31)),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["light"==t.connstatus?n("div",{staticClass:"text-center"},[t._v("\n    Connecting...\n    "),n("b-spinner",{attrs:{variant:"success",label:"Spinning"}}),t._v(" "),n("b-spinner",{attrs:{variant:"success",label:"Spinning"}}),t._v(" "),n("b-spinner",{attrs:{variant:"success",label:"Spinning"}})],1):n("div",[n("div",{staticClass:"col-container"},[n("div",{staticClass:"toolbar"},[n("div",{staticClass:"bgroup"},[n("b-button",{attrs:{size:"sm",variant:"outline-primary",disabled:!t.judgable},on:{click:t.check}},[t._v("測")]),t._v(" "),n("b-button",{staticClass:"my-2",attrs:{size:"sm",variant:"outline-primary"},on:{click:t.incfont}},[n("fa",{attrs:{icon:"plus"}})],1),t._v(" "),n("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:t.resetfont}},[n("fa",{attrs:{icon:["far","circle"]}})],1),t._v(" "),n("b-button",{staticClass:"my-2",attrs:{size:"sm",variant:"outline-primary"},on:{click:t.decfont}},[n("fa",{attrs:{icon:"minus"}})],1),t._v(" "),n("b-button",{attrs:{size:"sm",variant:"outline-primary",disabled:!t.judgable},on:{click:function(e){return t.send()}}},[t._v("交")])],1),t._v(" "),n("b-button",{staticClass:"connstatus",attrs:{disabled:!0,size:"sm",variant:t.connstatus}},["danger"!=t.connstatus?n("span",[t._v(t._s(t.defaultchannel))]):n("span",[n("fa",{attrs:{icon:["far","times-circle"]}})],1)])],1),t._v(" "),n("codemirror",{staticClass:"coder",style:t.cmstyle,attrs:{options:t.cmOption},on:{ready:t.onCmReady,input:t.cinput},model:{value:t.cmcode,callback:function(e){t.cmcode=e},expression:"cmcode"}})],1),t._v(" "),n("b-modal",{attrs:{centered:!0,id:"modal-send",title:"程式提交","ok-title":"確定","cancel-title":"取消","no-close-on-esc":!0,"no-close-on-backdrop":!0},on:{ok:t.submit}},[n("p",{staticClass:"mt-4 text-danger"},[t._v("提交之後，即進到下一題，無法再回頭修改，確定要提交嗎？")]),t._v(" "),n("b-form-checkbox",{attrs:{id:"checkbox-1",name:"checkbox-1"},on:{change:t.toggleRemind}},[t._v("以後不再提醒")])],1)],1)])}),[],!1,null,"2ddb5d13",null);e.a=component.exports},750:function(t,e,n){"use strict";n(11);var o=n(749),r=n(743),c=n(737),l={components:{CodePanel:o.a},props:{quiz:Object,submit:Function,times:Number,skip:Boolean},data:function(){return{mycode:"",channel:null,answered:!1,time:0,timer:null,result:null,judging:!1}},mounted:function(){this.time=this.times,this.startTimer()},watch:{skip:function(t){t&&this.send()}},methods:{looked:function(){this.judging=!1},mmss:function(t){return c.a.mmss(t)},servers:function(t){this.channel=t.best.channel,console.log("Available",t.available),console.log("Channel",this.channel)},send:function(){var t=this;if(this.channel&&!this.answered){this.answered=!0,console.log("Clear Inner Timer"),clearInterval(this.timer);var e={answercode:this.quiz.answercode,answerlang:this.quiz.answerlang,testdata:this.quiz.testdata,sourceCode:this.mycode,sourceLang:"cpp"};r.a.judgeProgtest(this.channel,e).then((function(e){console.log("Status",e),"AC"===e?t.submit({correct:!0,uans:t.mycode,usetime:t.times-t.time}):t.submit({correct:!1,uans:t.mycode,usetime:t.times-t.time})})).catch((function(e){t.submit({correct:!1,uans:t.mycode,usetime:t.times-t.time})}))}},check:function(){var t=this;if(!this.judging&&this.channel){this.judging=!0,this.result="Checking...",this.$bvModal.show("modal-check");var e={answercode:this.quiz.answercode,answerlang:this.quiz.answerlang,testdata:this.quiz.testdata,sourceCode:this.mycode,sourceLang:"cpp"};r.a.judgeProgtest(this.channel,e).then((function(e){console.log("Status",e),t.result="AC"===e?"通過":e})).catch((function(e){t.judging=!1,t.result=e}))}},startTimer:function(){var t=this;console.log("Start Inner Timer"),this.timer=setInterval((function(){t.time>0&&t.time--,0===t.time&&(console.log("RT Timeout"),t.send())}),1e3)}}},d=(n(840),n(31)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"qpanel"},[n("p",{staticClass:"timestatus"},[n("span",{staticClass:"type"},[t._v("《程式題》")]),t._v(" 倒數計時 "+t._s(t.mmss(t.time)))]),t._v(" "),n("div",{staticClass:"my-3 question",domProps:{innerHTML:t._s(t.$md.render(t.quiz.question))}}),t._v(" "),n("b-modal",{attrs:{centered:"",size:"xl",id:"modal-check",title:"檢測結果","ok-title":"OK","ok-only":"","no-close-on-esc":!0,"no-close-on-backdrop":!0},on:{close:t.looked,ok:t.looked}},[n("pre",[t._v(t._s(t.result))])]),t._v(" "),n("CodePanel",{attrs:{judging:t.judging,check:t.check,submit:t.send,height:500},on:{servers:t.servers},model:{value:t.mycode,callback:function(e){t.mycode=e},expression:"mycode"}})],1)}),[],!1,null,"0be73221",null);e.a=component.exports},767:function(t,e,n){var content=n(816);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("44bcaffa",content,!0,{sourceMap:!1})},768:function(t,e,n){var content=n(818);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("14722577",content,!0,{sourceMap:!1})},770:function(t,e,n){"use strict";var o=n(742);n.n(o).a},771:function(t,e,n){(e=n(37)(!1)).push([t.i,".col-container[data-v-2ddb5d13]{display:flex;width:100%}.toolbar[data-v-2ddb5d13]{display:flex;flex-direction:column;justify-content:space-between;background:#fafad2;padding:12px;border:1px solid #00f;border-right:none}.coder[data-v-2ddb5d13]{flex:1 1 0;padding:12px;border:1px solid #00f}.btn[data-v-2ddb5d13]{display:block;width:40px}",""]),t.exports=e},772:function(t,e,n){var content=n(839);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("7a9dd2fa",content,!0,{sourceMap:!1})},773:function(t,e,n){var content=n(841);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("1a66ee82",content,!0,{sourceMap:!1})},815:function(t,e,n){"use strict";var o=n(767);n.n(o).a},816:function(t,e,n){(e=n(37)(!1)).push([t.i,".list-group-item[data-v-586221ea]:hover{background:#90ee90}.qpanel[data-v-586221ea]{background:#eee;padding:24px}.question[data-v-586221ea]{color:#00f;font-size:120%}.progress[data-v-586221ea] .progress-bar{transition:width 1s linear}",""]),t.exports=e},817:function(t,e,n){"use strict";var o=n(768);n.n(o).a},818:function(t,e,n){(e=n(37)(!1)).push([t.i,".qpanel[data-v-6699340f]{background:#eee;padding:24px}.question[data-v-6699340f]{color:#00f;font-size:120%}.progress[data-v-6699340f] .progress-bar{transition:width 1s linear}",""]),t.exports=e},838:function(t,e,n){"use strict";var o=n(772);n.n(o).a},839:function(t,e,n){(e=n(37)(!1)).push([t.i,".type[data-v-fa15fd74]{color:#ff0}.qpanel[data-v-fa15fd74]{background:#eee;padding:24px}.question[data-v-fa15fd74]{color:#00f}.timestatus[data-v-fa15fd74]{background:#00f;color:#fff;text-align:center}.result[data-v-fa15fd74]{position:fixed;left:25%;top:25%;width:50%;height:50%;background:#ddd;z-index:100;padding:24px;border:2px solid green;overflow-y:scroll}",""]),t.exports=e},840:function(t,e,n){"use strict";var o=n(773);n.n(o).a},841:function(t,e,n){(e=n(37)(!1)).push([t.i,".type[data-v-0be73221]{color:#ff0}.qpanel[data-v-0be73221]{background:#eee;padding:24px}.question[data-v-0be73221]{color:#00f}.timestatus[data-v-0be73221]{background:#00f;color:#fff;text-align:center}.modal-class[data-v-0be73221],.result[data-v-0be73221]{position:fixed;left:25%;top:25%;width:50%;height:50%;background:#ddd;z-index:100;padding:24px;border:2px solid green;overflow-y:scroll}",""]),t.exports=e}}]);