<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>附錄六：從C到C++ | APCS 解題策略 (C語言篇)</title>
    <meta name="description" content="Welcome, our friends!">
    <link rel="icon" href="/apcs-c/favicon.ico">
    
    <link rel="preload" href="/apcs-c/assets/css/0.styles.9c8c0316.css" as="style"><link rel="preload" href="/apcs-c/assets/js/app.51ca9081.js" as="script"><link rel="preload" href="/apcs-c/assets/js/2.6e2f735a.js" as="script"><link rel="preload" href="/apcs-c/assets/js/9.ac9e9820.js" as="script"><link rel="prefetch" href="/apcs-c/assets/js/10.2cc0a844.js"><link rel="prefetch" href="/apcs-c/assets/js/11.3e353e2c.js"><link rel="prefetch" href="/apcs-c/assets/js/12.91bc93b9.js"><link rel="prefetch" href="/apcs-c/assets/js/13.47367240.js"><link rel="prefetch" href="/apcs-c/assets/js/14.95988b86.js"><link rel="prefetch" href="/apcs-c/assets/js/3.b6594849.js"><link rel="prefetch" href="/apcs-c/assets/js/4.71fd85c5.js"><link rel="prefetch" href="/apcs-c/assets/js/5.34e8d7bb.js"><link rel="prefetch" href="/apcs-c/assets/js/6.14b1a0fe.js"><link rel="prefetch" href="/apcs-c/assets/js/7.8860c2ef.js"><link rel="prefetch" href="/apcs-c/assets/js/8.45d4aabf.js">
    <link rel="stylesheet" href="/apcs-c/assets/css/0.styles.9c8c0316.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/apcs-c/" class="home-link router-link-active"><!----> <span class="site-name">APCS 解題策略 (C語言篇)</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="附錄六：從c到c"><a href="#附錄六：從c到c" aria-hidden="true" class="header-anchor">#</a> 附錄六：從C到C++</h1> <p>C++是從C衍生出來的物件化導向程式設計(Object-Oriented Programming)語言，C++幾乎包括了極大部份C語言的指令和語法，因此我們也可以在C++的環境裡使用C語言。我們來做一個簡單的測試，開啟新的Code::Blocks專案，在專案精靈操作過程中，選擇C++而不要選擇C，這樣開出來的專案，預設的程式碼如下：</p> <p><img src="/apcs-c/assets/img/cb-c++.176ef722.png" alt=""></p> <p>這段程式碼一樣是印出「Hello, world!」，不過是使用C++的指令而不是C的指令。另外，我們也可以看到主程式是main.cpp，而不是main.c。基本上，「.c」是C語言檔案預設的副檔名，而「.cpp」或「.cc」則是C++語言檔案預設的副檔名。</p> <p>現在把所有程式碼刪除，換成以下的程式碼：</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Hello world!\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>按編譯和執行，發現沒有任何問題，輸出也都正常。也就是說，我們在C++的檔案裡面，是可以撰寫C語言的。</p> <p>那麼在C++的環境裡面寫C有什麼好處呢？有沒有什麼缺點呢？基本上這邊並不打算深入這個討論主題，而是想要介紹幾個簡單的C++指令用法，這幾個指令用法搭配C語言使用，可能在線上解題的時候，可以省下一些時間和力氣。</p> <p>在往下介紹之前，先介紹C++語言裡面所謂命名空間(Namespace)的概念。基本上不管是變數或函數，都可以放在命名空間裡面。我們可以把命名空間想成是子目錄的概念，不同的子目錄可以放同名的檔案。同樣地，不同的命名空間，也可以有相同的變數或函數名稱，那我們在使用這些變數或函數的時候，要同時標示它的命名空間。例如指令swap，是存放在std的命名空間中，在使用的時候，必須用std::swap的方式。如果覺得每次都要加上「std::」很麻煩，也可以在檔案前面加上以下指令：</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>這表示要使用整個std命名空間裡的東西，那之後使用時，可以直接使用swap，編譯器就會知道它用的是「std::swap」。以下所介紹的指令，都在std命名空間中。</p> <h5 id="swap"><a href="#swap" aria-hidden="true" class="header-anchor">#</a> swap</h5> <p>這個函數用來交換兩個變數的值，不管變數是什麼型態，只要兩個變數的型態相同就可以了。使用swap的時候，要引進<code>&lt;iostream&gt;</code>這個檔頭。參見以下範例：</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span> </span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> b<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">float</span> c<span class="token operator">=</span><span class="token number">1.2</span><span class="token punctuation">,</span> d<span class="token operator">=</span><span class="token number">3.4</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span><span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span><span class="token function">swap</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;a=%d, b=%d\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;c=%f, d=%f\n&quot;</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>執行結果：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>a=5, b=3
c=3.400000, d=1.200000
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注意使用swap的時候，直接給變數名稱，前面不用加「&amp;」。在C語言裡面，傳進函數的變數，如果前面不加「&amp;」取地址，那麼呼叫函數之後，變數的值是不可能改變的。但在C++裡面，有所謂變數別名的概念，可以達成這種效果。另外可以觀察，a和b都是整數型態，而c和d都是浮點數型態，基本上swap可以針對任意的同型態的兩個變數進行交換。還有一點，有很多編譯器，例如GCC，在引入<code>&lt;iostream&gt;</code>檔頭的時候，會連帶引入C語言裡面的輸入輸出函數，這種情況下，第2行其實也可以省略。</p> <h5 id="sort"><a href="#sort" aria-hidden="true" class="header-anchor">#</a> sort</h5> <p>這個函數可以用來幫陣列排序，而且使用的是很快的排序演算法，使用時，要引入<code>&lt;algorithm&gt;</code>。先看範例，再做說明：</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span> </span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a<span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>第6行宣告a陣列有5個元素，依次為3、4、5、2、1。第7行使用sort排序函數，第一個參數是陣列變數名稱，表示陣列的開始地址，第二個參數是變數名稱加長度n，表示陣列開始地址再往後移n個元素的地址，也就是陣列最後元素的地址的下一個地址。排序完之後，陣列資料會從小到大排好，所以這個程式的輸出會變成<code>1 2 3 4 5</code>。</p> <p>上面的範例是針對整數陣列做排序，實際上sort函數也和swap函數一樣，可以針對任意型態的陣列進行排序，不過要排序的型態必須能夠比較大小。如果是自訂的型態，例如結構，則必須自己定義比較大小的運算規則，這部份較複雜，有興趣的讀者可自行查閱其他資料。</p> <h5 id="reverse"><a href="#reverse" aria-hidden="true" class="header-anchor">#</a> reverse</h5> <p>這個函數可以用來把陣列元素顛倒過來，使用時，要引入<code>&lt;algorithm&gt;</code>。例如上一個範例，如果我們希望將陣列從大排到小，我們可以先用sort做排序，然後再把reverse把陣列反過來，程式碼如下：</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span> </span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a<span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span><span class="token function">reverse</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a<span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d &quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>使用reverse的方式和sort的方式是相同的，本程式的輸出為<code>5 4 3 2 1</code>。和sort一樣，reverse也可以針對不同型態的陣列進行操作。在APCS的實作題中，有很多會用到排序的功能，如果讀者可以熟悉這兩個指令，可以省下許多寫排序函數的時間。</p> <h5 id="vector"><a href="#vector" aria-hidden="true" class="header-anchor">#</a> vector</h5> <p>向量和陣列類似，不過它比較有彈性，可以隨時擴充大小，也可以直接把其中任一個元素刪除，還可以隨時獲取向量目前的長度，不過使用上比之前的幾個指令還要複雜一些。以下就以「10510 實作題 － 定時K彈」那題為例，之前我們曾用陣列和遞迴方式都分別解過，但使用陣列的話，沒辦法通過所有測資。下面使用vector來處理，則可以通過所有的測資。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> k<span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">&quot;%d%d%d&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">,</span> <span class="token operator">&amp;</span>m<span class="token punctuation">,</span> <span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">v</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 宣告長度為n的整數vector</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 儲存啟始數字</span>
    <span class="token keyword">int</span> idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>k<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 引爆K次</span>
        idx <span class="token operator">=</span> <span class="token punctuation">(</span>idx <span class="token operator">+</span> m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 計算引爆點</span>
        v<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> idx<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 刪除引爆位置</span>
    <span class="token punctuation">}</span>
    idx <span class="token operator">=</span> idx <span class="token operator">%</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// v個數已減1，要重新計算位置</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 輸出</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>這邊第8行宣告一個長度為n的整數向量。第9行給予向量元素初始值。第12行，使用v.size()取得目前向量的長度，用來計算下一次的引爆點。第13行，直接將引爆點所在的數字從向量中刪除。對照原先的題目，應該不難了解這個演算法。我們也可以看到，這個題目使用向量來處理，比用陣列要容易和有效得多。</p> <p>以上所介紹的幾個C++指令，還有更多的功能和用法，例如我們也可以用sort函數來幫vector排序，不過用法稍有不同，但這些都已經超出本書所要討論的範圍。有興趣的讀者，可以在C語言的基礎之上，繼續學習其他書籍或資料，了解C++語言和它的應用。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/apcs-c/assets/js/app.51ca9081.js" defer></script><script src="/apcs-c/assets/js/2.6e2f735a.js" defer></script><script src="/apcs-c/assets/js/9.ac9e9820.js" defer></script>
  </body>
</html>
