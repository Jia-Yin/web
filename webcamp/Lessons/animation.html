<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Animation | Web Programming Camp</title>
    <meta name="description" content="Welcome, our friends!">
    <link rel="icon" href="/webcamp/favicon.ico">
    
    <link rel="preload" href="/webcamp/assets/css/0.styles.57014adf.css" as="style"><link rel="preload" href="/webcamp/assets/js/app.2e85b320.js" as="script"><link rel="preload" href="/webcamp/assets/js/2.1cb3ef6f.js" as="script"><link rel="preload" href="/webcamp/assets/js/6.57533a27.js" as="script"><link rel="prefetch" href="/webcamp/assets/js/10.f60da148.js"><link rel="prefetch" href="/webcamp/assets/js/11.1aa9963b.js"><link rel="prefetch" href="/webcamp/assets/js/12.1fdc3ae6.js"><link rel="prefetch" href="/webcamp/assets/js/13.b353fd31.js"><link rel="prefetch" href="/webcamp/assets/js/14.3b3e1253.js"><link rel="prefetch" href="/webcamp/assets/js/15.6c451889.js"><link rel="prefetch" href="/webcamp/assets/js/16.5e0480be.js"><link rel="prefetch" href="/webcamp/assets/js/17.4d4a0b99.js"><link rel="prefetch" href="/webcamp/assets/js/18.80cb3121.js"><link rel="prefetch" href="/webcamp/assets/js/19.d1bb4878.js"><link rel="prefetch" href="/webcamp/assets/js/20.94078a6e.js"><link rel="prefetch" href="/webcamp/assets/js/21.e5a82a60.js"><link rel="prefetch" href="/webcamp/assets/js/22.38c1e10d.js"><link rel="prefetch" href="/webcamp/assets/js/23.d7588084.js"><link rel="prefetch" href="/webcamp/assets/js/24.bcb91cc3.js"><link rel="prefetch" href="/webcamp/assets/js/25.4cbac781.js"><link rel="prefetch" href="/webcamp/assets/js/26.8b27a458.js"><link rel="prefetch" href="/webcamp/assets/js/27.4ea3ecee.js"><link rel="prefetch" href="/webcamp/assets/js/28.a9d7c791.js"><link rel="prefetch" href="/webcamp/assets/js/29.3f37f78a.js"><link rel="prefetch" href="/webcamp/assets/js/3.f3cb8970.js"><link rel="prefetch" href="/webcamp/assets/js/4.bff76360.js"><link rel="prefetch" href="/webcamp/assets/js/5.5f88f2df.js"><link rel="prefetch" href="/webcamp/assets/js/7.679103d3.js"><link rel="prefetch" href="/webcamp/assets/js/8.b7b72302.js"><link rel="prefetch" href="/webcamp/assets/js/9.0f2f3cfd.js">
    <link rel="stylesheet" href="/webcamp/assets/css/0.styles.57014adf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/webcamp/" class="home-link router-link-active"><!----> <span class="site-name">Web Programming Camp</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/webcamp/Lessons/" class="sidebar-link">Web Designing Basics</a></li><li><a href="/webcamp/Lessons/apply-jsbin.html" class="sidebar-link">Apply for a jsbin account</a></li><li><a href="/webcamp/Lessons/hello-html.html" class="sidebar-link">Hello World of HTML</a></li><li><a href="/webcamp/Lessons/hello-css.html" class="sidebar-link">CSS stylesheet</a></li><li><a href="/webcamp/Lessons/more-html.html" class="sidebar-link">More HTML</a></li><li><a href="/webcamp/Lessons/more-css.html" class="sidebar-link">More CSS</a></li><li><a href="/webcamp/Lessons/simple-design.html" class="sidebar-link">A Simple Page Design</a></li><li><a href="/webcamp/Lessons/basic-layout.html" class="sidebar-link">Basic Layout</a></li><li><a href="/webcamp/Lessons/extended-study.html" class="sidebar-link">Extended Study</a></li><li><a href="/webcamp/Lessons/some-examples.html" class="sidebar-link">Several Examples</a></li><li><a href="/webcamp/Lessons/js-basic.html" class="sidebar-link">JavaScript</a></li><li><a href="/webcamp/Lessons/konva.html" class="sidebar-link">Konva</a></li><li><a href="/webcamp/Lessons/basic-shapes.html" class="sidebar-link">Basic Shapes</a></li><li><a href="/webcamp/Lessons/animation.html" class="active sidebar-link">Animation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webcamp/Lessons/animation.html#konva-animation" class="sidebar-link">Konva.Animation</a></li><li class="sidebar-sub-header"><a href="/webcamp/Lessons/animation.html#moving" class="sidebar-link">Moving</a></li><li class="sidebar-sub-header"><a href="/webcamp/Lessons/animation.html#rotation" class="sidebar-link">Rotation</a></li></ul></li><li><a href="/webcamp/Lessons/webduino.html" class="sidebar-link">Webduino</a></li><li><a href="/webcamp/Lessons/bit-coding.html" class="sidebar-link">Bit Coding</a></li><li><a href="/webcamp/Lessons/konva-bit.html" class="sidebar-link">Combined Web and Bit Design</a></li><li><a href="/webcamp/Lessons/game-design.html" class="sidebar-link">Game Design</a></li><li><a href="/webcamp/Lessons/thanks.html" class="sidebar-link">Thank You</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default" data-v-336f54a7 data-v-336f54a7><h1 id="animation" data-v-336f54a7><a href="#animation" aria-hidden="true" class="header-anchor" data-v-336f54a7>#</a> Animation</h1> <h2 id="konva-animation" data-v-336f54a7><a href="#konva-animation" aria-hidden="true" class="header-anchor" data-v-336f54a7>#</a> Konva.Animation</h2> <p data-v-336f54a7>In Konva, use <strong data-v-336f54a7>Konva.Animation</strong> constructor to make an animation. The constructor takes two arguments:</p> <ul data-v-336f54a7><li data-v-336f54a7>an update function</li> <li data-v-336f54a7>an optional layer, or array of layers</li></ul> <p data-v-336f54a7>The update function will be called in each animation frame, and Konva.Animation will pass it a frame object which contains 3 properties:</p> <ul data-v-336f54a7><li data-v-336f54a7><strong data-v-336f54a7>time</strong> property : the number of milliseconds that the animation has been running</li> <li data-v-336f54a7><strong data-v-336f54a7>timeDiff</strong> property : the number of milliseconds that have passed since the last frame</li> <li data-v-336f54a7><strong data-v-336f54a7>frameRate</strong> property : the current frame rate in frames per second</li></ul> <p data-v-336f54a7>HTML5 Canvas Konva Animation Template:</p> <p align="center" data-v-336f54a7><img src="/webcamp/assets/img/animation.573a89d0.png" data-v-336f54a7></p> <p data-v-336f54a7>The update function should contain logic to update shape properties, such as position, rotation, scale, width, height, radius, colors, etc.</p> <p data-v-336f54a7>Once the animation has been created, we can start it at anytime with the start() method.</p> <h2 id="moving" data-v-336f54a7><a href="#moving" aria-hidden="true" class="header-anchor" data-v-336f54a7>#</a> Moving</h2> <p data-v-336f54a7>In this example, we will make a red ball move forth and back horizontally.</p> <h3 id="html-part" data-v-336f54a7><a href="#html-part" aria-hidden="true" class="header-anchor" data-v-336f54a7>#</a> HTML part</h3> <p data-v-336f54a7>Add the Konva js code and prepare an element with a specific id for Konva drawing.</p> <div class="language-html line-numbers-mode" data-v-336f54a7><pre class="language-html" data-v-336f54a7><code data-v-336f54a7><span class="token tag" data-v-336f54a7><span class="token tag" data-v-336f54a7><span class="token punctuation" data-v-336f54a7>&lt;</span>script</span> <span class="token attr-name" data-v-336f54a7>src</span><span class="token attr-value" data-v-336f54a7><span class="token punctuation" data-v-336f54a7>=</span><span class="token punctuation" data-v-336f54a7>&quot;</span>https://unpkg.com/konva@3.4.1/konva.min.js<span class="token punctuation" data-v-336f54a7>&quot;</span></span><span class="token punctuation" data-v-336f54a7>&gt;</span></span><span class="token script" data-v-336f54a7></span><span class="token tag" data-v-336f54a7><span class="token tag" data-v-336f54a7><span class="token punctuation" data-v-336f54a7>&lt;/</span>script</span><span class="token punctuation" data-v-336f54a7>&gt;</span></span>
<span class="token tag" data-v-336f54a7><span class="token tag" data-v-336f54a7><span class="token punctuation" data-v-336f54a7>&lt;</span>div</span> <span class="token attr-name" data-v-336f54a7>id</span><span class="token attr-value" data-v-336f54a7><span class="token punctuation" data-v-336f54a7>=</span><span class="token punctuation" data-v-336f54a7>&quot;</span>container<span class="token punctuation" data-v-336f54a7>&quot;</span></span><span class="token punctuation" data-v-336f54a7>&gt;</span></span><span class="token tag" data-v-336f54a7><span class="token tag" data-v-336f54a7><span class="token punctuation" data-v-336f54a7>&lt;/</span>div</span><span class="token punctuation" data-v-336f54a7>&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper" data-v-336f54a7><span class="line-number" data-v-336f54a7>1</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>2</span><br data-v-336f54a7></div></div><h3 id="js-part" data-v-336f54a7><a href="#js-part" aria-hidden="true" class="header-anchor" data-v-336f54a7>#</a> JS part</h3> <p data-v-336f54a7>Use <code data-v-336f54a7>Shape.move({x:dx, y:dy})</code> function to move the ball,
where (dx, dy) is the moving vector.</p> <div class="language-js line-numbers-mode" data-v-336f54a7><pre class="language-js" data-v-336f54a7><code data-v-336f54a7><span class="token keyword" data-v-336f54a7>var</span> stage <span class="token operator" data-v-336f54a7>=</span> <span class="token keyword" data-v-336f54a7>new</span> <span class="token class-name" data-v-336f54a7>Konva<span class="token punctuation" data-v-336f54a7>.</span>Stage</span><span class="token punctuation" data-v-336f54a7>(</span> <span class="token punctuation" data-v-336f54a7>{</span> <span class="token comment" data-v-336f54a7>// Create a stage</span>
  container<span class="token punctuation" data-v-336f54a7>:</span> <span class="token string" data-v-336f54a7>'container'</span><span class="token punctuation" data-v-336f54a7>,</span> width<span class="token punctuation" data-v-336f54a7>:</span> <span class="token number" data-v-336f54a7>500</span><span class="token punctuation" data-v-336f54a7>,</span> height<span class="token punctuation" data-v-336f54a7>:</span> <span class="token number" data-v-336f54a7>100</span>
<span class="token punctuation" data-v-336f54a7>}</span><span class="token punctuation" data-v-336f54a7>)</span><span class="token punctuation" data-v-336f54a7>;</span>
<span class="token keyword" data-v-336f54a7>var</span> layer <span class="token operator" data-v-336f54a7>=</span> <span class="token keyword" data-v-336f54a7>new</span> <span class="token class-name" data-v-336f54a7>Konva<span class="token punctuation" data-v-336f54a7>.</span>Layer</span><span class="token punctuation" data-v-336f54a7>(</span><span class="token punctuation" data-v-336f54a7>)</span><span class="token punctuation" data-v-336f54a7>;</span> <span class="token comment" data-v-336f54a7>// Create a layer</span>

<span class="token keyword" data-v-336f54a7>var</span> circle <span class="token operator" data-v-336f54a7>=</span> <span class="token keyword" data-v-336f54a7>new</span> <span class="token class-name" data-v-336f54a7>Konva<span class="token punctuation" data-v-336f54a7>.</span>Circle</span><span class="token punctuation" data-v-336f54a7>(</span><span class="token punctuation" data-v-336f54a7>{</span> <span class="token comment" data-v-336f54a7>// Create the red ball</span>
  x<span class="token punctuation" data-v-336f54a7>:</span><span class="token number" data-v-336f54a7>30</span><span class="token punctuation" data-v-336f54a7>,</span> y<span class="token punctuation" data-v-336f54a7>:</span><span class="token number" data-v-336f54a7>50</span><span class="token punctuation" data-v-336f54a7>,</span> radius<span class="token punctuation" data-v-336f54a7>:</span><span class="token number" data-v-336f54a7>10</span><span class="token punctuation" data-v-336f54a7>,</span> fill<span class="token punctuation" data-v-336f54a7>:</span><span class="token string" data-v-336f54a7>'red'</span>
<span class="token punctuation" data-v-336f54a7>}</span><span class="token punctuation" data-v-336f54a7>)</span><span class="token punctuation" data-v-336f54a7>;</span>

layer<span class="token punctuation" data-v-336f54a7>.</span><span class="token function" data-v-336f54a7>add</span><span class="token punctuation" data-v-336f54a7>(</span>circle<span class="token punctuation" data-v-336f54a7>)</span><span class="token punctuation" data-v-336f54a7>;</span> <span class="token comment" data-v-336f54a7>// Add the ball to the layer</span>
stage<span class="token punctuation" data-v-336f54a7>.</span><span class="token function" data-v-336f54a7>add</span><span class="token punctuation" data-v-336f54a7>(</span>layer<span class="token punctuation" data-v-336f54a7>)</span><span class="token punctuation" data-v-336f54a7>;</span>  <span class="token comment" data-v-336f54a7>// Add the layer to the stage</span>

<span class="token keyword" data-v-336f54a7>var</span> speed <span class="token operator" data-v-336f54a7>=</span> <span class="token number" data-v-336f54a7>0.2</span><span class="token punctuation" data-v-336f54a7>;</span> <span class="token comment" data-v-336f54a7>// ball speed: pixels per ms</span>
<span class="token keyword" data-v-336f54a7>var</span> anim <span class="token operator" data-v-336f54a7>=</span> <span class="token keyword" data-v-336f54a7>new</span> <span class="token class-name" data-v-336f54a7>Konva<span class="token punctuation" data-v-336f54a7>.</span>Animation</span><span class="token punctuation" data-v-336f54a7>(</span><span class="token keyword" data-v-336f54a7>function</span><span class="token punctuation" data-v-336f54a7>(</span><span class="token parameter" data-v-336f54a7>frame</span><span class="token punctuation" data-v-336f54a7>)</span>
<span class="token punctuation" data-v-336f54a7>{</span>
  <span class="token comment" data-v-336f54a7>// timeDiff * speed = move distance</span>
  circle<span class="token punctuation" data-v-336f54a7>.</span><span class="token function" data-v-336f54a7>move</span><span class="token punctuation" data-v-336f54a7>(</span><span class="token punctuation" data-v-336f54a7>{</span>x<span class="token punctuation" data-v-336f54a7>:</span> frame<span class="token punctuation" data-v-336f54a7>.</span>timeDiff<span class="token operator" data-v-336f54a7>*</span>speed<span class="token punctuation" data-v-336f54a7>,</span> y<span class="token punctuation" data-v-336f54a7>:</span><span class="token number" data-v-336f54a7>0</span><span class="token punctuation" data-v-336f54a7>}</span><span class="token punctuation" data-v-336f54a7>)</span><span class="token punctuation" data-v-336f54a7>;</span>
  <span class="token comment" data-v-336f54a7>// if move to boundary, then change the speed sign</span>
  <span class="token keyword" data-v-336f54a7>if</span> <span class="token punctuation" data-v-336f54a7>(</span>circle<span class="token punctuation" data-v-336f54a7>.</span><span class="token function" data-v-336f54a7>x</span><span class="token punctuation" data-v-336f54a7>(</span><span class="token punctuation" data-v-336f54a7>)</span><span class="token operator" data-v-336f54a7>&gt;</span><span class="token number" data-v-336f54a7>470</span> <span class="token operator" data-v-336f54a7>||</span> circle<span class="token punctuation" data-v-336f54a7>.</span><span class="token function" data-v-336f54a7>x</span><span class="token punctuation" data-v-336f54a7>(</span><span class="token punctuation" data-v-336f54a7>)</span><span class="token operator" data-v-336f54a7>&lt;</span><span class="token number" data-v-336f54a7>30</span><span class="token punctuation" data-v-336f54a7>)</span> <span class="token punctuation" data-v-336f54a7>{</span>
  	speed <span class="token operator" data-v-336f54a7>=</span> <span class="token operator" data-v-336f54a7>-</span>speed<span class="token punctuation" data-v-336f54a7>;</span>
  <span class="token punctuation" data-v-336f54a7>}</span>
<span class="token punctuation" data-v-336f54a7>}</span><span class="token punctuation" data-v-336f54a7>,</span> layer<span class="token punctuation" data-v-336f54a7>)</span><span class="token punctuation" data-v-336f54a7>;</span>

anim<span class="token punctuation" data-v-336f54a7>.</span><span class="token function" data-v-336f54a7>start</span><span class="token punctuation" data-v-336f54a7>(</span><span class="token punctuation" data-v-336f54a7>)</span> <span class="token comment" data-v-336f54a7>// start the animation</span>
</code></pre> <div class="line-numbers-wrapper" data-v-336f54a7><span class="line-number" data-v-336f54a7>1</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>2</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>3</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>4</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>5</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>6</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>7</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>8</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>9</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>10</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>11</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>12</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>13</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>14</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>15</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>16</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>17</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>18</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>19</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>20</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>21</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>22</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>23</span><br data-v-336f54a7><span class="line-number" data-v-336f54a7>24</span><br data-v-336f54a7></div></div><h3 id="result" data-v-336f54a7><a href="#result" aria-hidden="true" class="header-anchor" data-v-336f54a7>#</a> Result</h3> <p data-v-336f54a7>If the red ball is disappeared, then click HTML/JavaScript tab, and go back to the Result tab.</p> <iframe width="100%" height="200" src="//jsfiddle.net/jywglady/ug4p0cjq/embedded/result,html,js/" allowfullscreen="allowfullscreen" allowpaymentrequest="" frameborder="0" data-v-336f54a7></iframe> <h2 id="rotation" data-v-336f54a7><a href="#rotation" aria-hidden="true" class="header-anchor" data-v-336f54a7>#</a> Rotation</h2> <p data-v-336f54a7>Use <code data-v-336f54a7>Shape.rotation(angle)</code> function to set the shape with rotaion = angle degrees. The rotation center is the Shape's (x, y). You can use the offset property to shift the Shape so that the
rotation center is shifted from the left top point.</p> <iframe width="100%" height="400" src="//jsfiddle.net/jywglady/ezmuon9d/embedded/result,html,js/" allowfullscreen="allowfullscreen" allowpaymentrequest="" frameborder="0" data-v-336f54a7></iframe> <p data-v-336f54a7><br data-v-336f54a7><br data-v-336f54a7></p> <div class="tip custom-block" data-v-336f54a7><p class="custom-block-title" data-v-336f54a7>Exercise</p> <p data-v-336f54a7>Design the following animation.</p> <p data-v-336f54a7><img src="/webcamp/assets/img/rotation.e4143e5e.gif" alt="" data-v-336f54a7></p> <div class="warning custom-block" data-v-336f54a7><p data-v-336f54a7>Here is the <a href="https://hackmd.io/@xHE3rcO1SWC5Gv6etE5SSg/H1YUTTQMr" target="_blank" rel="noopener noreferrer" data-v-336f54a7>Answer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-336f54a7 data-v-336f54a7><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/webcamp/Lessons/basic-shapes.html" class="prev">
          Basic Shapes
        </a></span> <span class="next"><a href="/webcamp/Lessons/webduino.html">
          Webduino
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/webcamp/assets/js/app.2e85b320.js" defer></script><script src="/webcamp/assets/js/2.1cb3ef6f.js" defer></script><script src="/webcamp/assets/js/6.57533a27.js" defer></script>
  </body>
</html>
