<!DOCTYPE html>
<html lang="中文">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>結合網頁和 Bit 板的設計 | 網頁程設營</title>
    <meta name="description" content="歡迎你，朋友！">
    <link rel="icon" href="/webcamp/favicon.ico">
    
    <link rel="preload" href="/webcamp/assets/css/0.styles.0c46ab7d.css" as="style"><link rel="preload" href="/webcamp/assets/js/app.ac9bb0df.js" as="script"><link rel="preload" href="/webcamp/assets/js/2.b04852b2.js" as="script"><link rel="preload" href="/webcamp/assets/js/46.36f49bad.js" as="script"><link rel="prefetch" href="/webcamp/assets/js/10.aa22204c.js"><link rel="prefetch" href="/webcamp/assets/js/11.c6780b79.js"><link rel="prefetch" href="/webcamp/assets/js/12.c024b28f.js"><link rel="prefetch" href="/webcamp/assets/js/13.bea30131.js"><link rel="prefetch" href="/webcamp/assets/js/14.8d85d4df.js"><link rel="prefetch" href="/webcamp/assets/js/15.3ff16177.js"><link rel="prefetch" href="/webcamp/assets/js/16.78a8afc3.js"><link rel="prefetch" href="/webcamp/assets/js/17.d8d75a59.js"><link rel="prefetch" href="/webcamp/assets/js/18.b6cd21fa.js"><link rel="prefetch" href="/webcamp/assets/js/19.7affb429.js"><link rel="prefetch" href="/webcamp/assets/js/20.544c63cf.js"><link rel="prefetch" href="/webcamp/assets/js/21.d61875b9.js"><link rel="prefetch" href="/webcamp/assets/js/22.04f5263c.js"><link rel="prefetch" href="/webcamp/assets/js/23.c8d1cdf1.js"><link rel="prefetch" href="/webcamp/assets/js/24.1ee17b9e.js"><link rel="prefetch" href="/webcamp/assets/js/25.4de66df9.js"><link rel="prefetch" href="/webcamp/assets/js/26.6edf2066.js"><link rel="prefetch" href="/webcamp/assets/js/27.4d48ec1e.js"><link rel="prefetch" href="/webcamp/assets/js/28.b945973f.js"><link rel="prefetch" href="/webcamp/assets/js/29.52b8920f.js"><link rel="prefetch" href="/webcamp/assets/js/3.389f8a53.js"><link rel="prefetch" href="/webcamp/assets/js/30.4c6d2a74.js"><link rel="prefetch" href="/webcamp/assets/js/31.618d94cb.js"><link rel="prefetch" href="/webcamp/assets/js/32.d357c705.js"><link rel="prefetch" href="/webcamp/assets/js/33.c276b411.js"><link rel="prefetch" href="/webcamp/assets/js/34.2903c199.js"><link rel="prefetch" href="/webcamp/assets/js/35.3277a9b8.js"><link rel="prefetch" href="/webcamp/assets/js/36.230ef030.js"><link rel="prefetch" href="/webcamp/assets/js/37.809f2c87.js"><link rel="prefetch" href="/webcamp/assets/js/38.39e71fc5.js"><link rel="prefetch" href="/webcamp/assets/js/39.9819c4bb.js"><link rel="prefetch" href="/webcamp/assets/js/4.25811a96.js"><link rel="prefetch" href="/webcamp/assets/js/40.c5d3ab4e.js"><link rel="prefetch" href="/webcamp/assets/js/41.92e21595.js"><link rel="prefetch" href="/webcamp/assets/js/42.8b4370ce.js"><link rel="prefetch" href="/webcamp/assets/js/43.ab9f02ab.js"><link rel="prefetch" href="/webcamp/assets/js/44.bca42fcc.js"><link rel="prefetch" href="/webcamp/assets/js/45.fa123f21.js"><link rel="prefetch" href="/webcamp/assets/js/47.1367d659.js"><link rel="prefetch" href="/webcamp/assets/js/48.8bad4266.js"><link rel="prefetch" href="/webcamp/assets/js/49.8b5c13fa.js"><link rel="prefetch" href="/webcamp/assets/js/5.998b3087.js"><link rel="prefetch" href="/webcamp/assets/js/50.3c317969.js"><link rel="prefetch" href="/webcamp/assets/js/51.d33f7662.js"><link rel="prefetch" href="/webcamp/assets/js/52.00da6954.js"><link rel="prefetch" href="/webcamp/assets/js/6.cdc47ce0.js"><link rel="prefetch" href="/webcamp/assets/js/7.b9fa1c9d.js"><link rel="prefetch" href="/webcamp/assets/js/8.04f039b0.js"><link rel="prefetch" href="/webcamp/assets/js/9.63e4888a.js">
    <link rel="stylesheet" href="/webcamp/assets/css/0.styles.0c46ab7d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/webcamp/zh-TW/" class="home-link router-link-active"><!----> <span class="site-name">網頁程設營</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/webcamp/zh-TW/" class="nav-link">首頁</a></div><div class="nav-item"><a href="/webcamp/zh-TW/Lessons/" class="nav-link router-link-active">開始</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">語言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webcamp/Lessons/konva-bit.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/webcamp/zh-TW/Lessons/konva-bit.html" class="nav-link router-link-exact-active router-link-active">中文</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/webcamp/zh-TW/" class="nav-link">首頁</a></div><div class="nav-item"><a href="/webcamp/zh-TW/Lessons/" class="nav-link router-link-active">開始</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">語言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webcamp/Lessons/konva-bit.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/webcamp/zh-TW/Lessons/konva-bit.html" class="nav-link router-link-exact-active router-link-active">中文</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/webcamp/zh-TW/Lessons/apply-jsbin.html" class="sidebar-link">申請 jsbin 帳號</a></li><li><a href="/webcamp/zh-TW/Lessons/hello-html.html" class="sidebar-link">Hello, HTML</a></li><li><a href="/webcamp/zh-TW/Lessons/hello-css.html" class="sidebar-link">CSS 樣式表</a></li><li><a href="/webcamp/zh-TW/Lessons/more-html.html" class="sidebar-link">再來一點 HTML</a></li><li><a href="/webcamp/zh-TW/Lessons/more-css.html" class="sidebar-link">再來一點 CSS</a></li><li><a href="/webcamp/zh-TW/Lessons/simple-design.html" class="sidebar-link">一個簡單的頁面設計</a></li><li><a href="/webcamp/zh-TW/Lessons/basic-layout.html" class="sidebar-link">基本的排版</a></li><li><a href="/webcamp/zh-TW/Lessons/extended-study.html" class="sidebar-link">繼續學習</a></li><li><a href="/webcamp/zh-TW/Lessons/some-examples.html" class="sidebar-link">幾個範例</a></li><li><a href="/webcamp/zh-TW/Lessons/js-basic.html" class="sidebar-link">JavaScript</a></li><li><a href="/webcamp/zh-TW/Lessons/konva.html" class="sidebar-link">Konva</a></li><li><a href="/webcamp/zh-TW/Lessons/basic-shapes.html" class="sidebar-link">基本圖形</a></li><li><a href="/webcamp/zh-TW/Lessons/animation.html" class="sidebar-link">動畫</a></li><li><a href="/webcamp/zh-TW/Lessons/webduino.html" class="sidebar-link">Webduino</a></li><li><a href="/webcamp/zh-TW/Lessons/bit-coding.html" class="sidebar-link">Bit 的程式碼</a></li><li><a href="/webcamp/zh-TW/Lessons/konva-bit.html" class="active sidebar-link">結合網頁和 Bit 板的設計</a></li><li><a href="/webcamp/zh-TW/Lessons/level.html" class="sidebar-link">Bit 水平儀</a></li><li><a href="/webcamp/zh-TW/Lessons/game-design.html" class="sidebar-link">遊戲設計</a></li><li><a href="/webcamp/zh-TW/Lessons/thanks.html" class="sidebar-link">感謝</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="結合網頁和-bit-板的設計"><a href="#結合網頁和-bit-板的設計" aria-hidden="true" class="header-anchor">#</a> 結合網頁和 Bit 板的設計</h1> <p>我們要使用 Konva 來開發一個如下圖所示的簡單應用。</p> <p align="center"><img src="data:image/png;base64,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" width="60%"></p> <p>按鈕 <code>To Left</code> 及 <code>To Right</code> 可以控制球往左和往右移動，<code>stop</code> 會讓球停下來。</p> <p>之後我們會增加 Bit 板來控制球的移動。</p> <h2 id="konva-程式"><a href="#konva-程式" aria-hidden="true" class="header-anchor">#</a> Konva 程式</h2> <p>以下我們只說明程式碼中比較關鍵的部份，完整的內容和結果會放 jsFiddle 中，讀者可以詳細觀看。</p> <h3 id="html-部份"><a href="#html-部份" aria-hidden="true" class="header-anchor">#</a> HTML 部份</h3> <ul><li>要先設定一個容器元素給 Konva 使用。</li> <li>放置 3 個按鈕，並綁定每個按鈕的點擊事件給特定的函式 (定義在 JS 程式碼中)。</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>toLeft()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>← To Left<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stopBall()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>stop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>toRight()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>To Right → <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="css-部份"><a href="#css-部份" aria-hidden="true" class="header-anchor">#</a> CSS 部份</h3> <ul><li>設定容器元素的寬度、高度以及邊框。</li> <li>設定容器元素的外距，讓容器元素置中。</li> <li>按鈕屬於行內元素，可以設定 HTML body 的 text-align 屬性為 center，讓這些按鈕也擺放在正中間。</li></ul> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">#container</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> solid blue 1px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="js-部份"><a href="#js-部份" aria-hidden="true" class="header-anchor">#</a> JS 部份</h3> <p>建立舞台 (stage)、圖層 (layer) 和球。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> stage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Konva<span class="token punctuation">.</span>Stage</span><span class="token punctuation">(</span> <span class="token punctuation">{</span>
  container<span class="token punctuation">:</span> <span class="token string">'container'</span><span class="token punctuation">,</span>
  width<span class="token punctuation">:</span> width<span class="token punctuation">,</span>
  height<span class="token punctuation">:</span> height
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> layer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Konva<span class="token punctuation">.</span>Layer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ball <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Konva<span class="token punctuation">.</span>Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  x<span class="token punctuation">:</span> width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>
  y<span class="token punctuation">:</span> height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>
  radius<span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">,</span>
  fill<span class="token punctuation">:</span><span class="token string">'blue'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
layer<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ball<span class="token punctuation">)</span><span class="token punctuation">;</span>
stage<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>建立動畫，這邊我們使用 <strong>dir</strong> 變數來控制球的移動方向，如果為 1 表示往右移，-1 表示往左移，0 表示停止。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> dir <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> speed <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span> <span class="token comment">// pixels per second</span>

<span class="token keyword">var</span> aniBall <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Konva<span class="token punctuation">.</span>Animation</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">frame</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>dir <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// not stop mode</span>
    ball<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span> dir<span class="token operator">*</span>speed<span class="token operator">*</span>frame<span class="token punctuation">.</span>timeDiff<span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// change x</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ball<span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// when the ball reach the right end</span>
      aniBall<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// stop animation</span>
      dir <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token comment">// reset direction</span>
      ball<span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// calibrate ball position</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ball<span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// when the ball reach the left end</span>
      aniBall<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// stop animation</span>
      dir <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token comment">// reset direction</span>
      ball<span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// calibrate ball position</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> layer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>最後，加上按鈕的動作。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">toRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  dir <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>         <span class="token comment">// right direction</span>
  aniBall<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// start animation</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">toLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  dir <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment">// left direction</span>
  aniBall<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// start animation</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">stopBall</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  dir <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>         <span class="token comment">// stop mode</span>
  aniBall<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// stop animation</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="完成結果"><a href="#完成結果" aria-hidden="true" class="header-anchor">#</a> 完成結果</h3> <br> <iframe width="100%" height="300" src="//jsfiddle.net/jywglady/786nzuov/embedded/result,html,css,js/" allowfullscreen="allowfullscreen" allowpaymentrequest="" frameborder="0"></iframe> <h2 id="讓-webduino-bit-參一腳"><a href="#讓-webduino-bit-參一腳" aria-hidden="true" class="header-anchor">#</a> 讓 Webduino Bit 參一腳</h2> <p>現在要加上一些程式碼，讓 Webduino Bit 的按鈕也可以控制球的移動。基本上，只有 HTML 和 JS 的部份需要修改。</p> <h3 id="html-部份-2"><a href="#html-部份-2" aria-hidden="true" class="header-anchor">#</a> HTML 部份</h3> <p>我們需要在 head 區段插入 Webduino Bit 相關的 JS 代碼。將以下這幾行程式碼放入 head 區塊中，可以放在插入 konva.min.js 的代碼前。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://bit.webduino.io/blockly/components/jquery/dist/jquery.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://bit.webduino.io/blockly/dist/lib/webduino-all.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://bit.webduino.io/blockly/dist/MessageTransport.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://bit.webduino.io/blockly/dist/webduino-blockly.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://bit.webduino.io/blockly/dist/lib/firebase.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://bit.webduino.io/blockly/dist/lib/runtime.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://bit.webduino.io/blockly/components/webduino-bit-module-button/BitButton.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://bit.webduino.io/blockly/components/webduino-bit-module-button/BitButton-blockly.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="js-部份-2"><a href="#js-部份-2" aria-hidden="true" class="header-anchor">#</a> JS 部份</h3> <p>將以下的程式碼加入到上面 JS 的部份。這邊 buttonA 按下的事件會呼叫 toLeft(), buttonB 按下的事件會呼叫 toRight()，如果兩個鍵同時按下，則呼叫 stopBall()。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> buttons <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// save button status</span>

<span class="token function">boardReady</span><span class="token punctuation">(</span><span class="token punctuation">{</span>board<span class="token punctuation">:</span> <span class="token string">'Bit'</span><span class="token punctuation">,</span> device<span class="token punctuation">:</span> <span class="token string">'bit77730e'</span><span class="token punctuation">,</span> transport<span class="token punctuation">:</span> <span class="token string">'mqtt'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">board</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  board<span class="token punctuation">.</span>samplingInterval <span class="token operator">=</span> <span class="token number">250</span><span class="token punctuation">;</span>
  btnA <span class="token operator">=</span> <span class="token function">getPullupButton</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btnB <span class="token operator">=</span> <span class="token function">getPullupButton</span><span class="token punctuation">(</span>board<span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btnA<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'pressed'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// press button A</span>
  	buttons <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>                    <span class="token comment">// status +1</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>buttons <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">toLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>  <span class="token comment">// only left button</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token function">stopBall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>             <span class="token comment">// two buttons</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btnB<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'pressed'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// press button B</span>
  	buttons <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>                    <span class="token comment">// status +2</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>buttons <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">toRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">// only right button</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token function">stopBall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>             <span class="token comment">// two buttons</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  btnA<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'released'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> buttons <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// update status</span>
  btnB<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'released'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> buttons <span class="token operator">-=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// update status</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="結果"><a href="#結果" aria-hidden="true" class="header-anchor">#</a> 結果</h3> <p>注意：除了頁面按鈕之外，這個頁面只能使用 <strong>我的 Bit 設備</strong> 來控制。點選開啟 jsFiddle，把設備 ID 改成你的來試看看。
<br> <iframe width="100%" height="300" src="//jsfiddle.net/jywglady/ebo273m4/embedded/result,html,css,js/" allowfullscreen="allowfullscreen" allowpaymentrequest="" frameborder="0"></iframe></p> <p><br><br></p> <div class="tip custom-block"><p class="custom-block-title">練習</p> <p>把上面 Bit 頁面的版本改成你自己的版本，並嘗試修改頁面內容或效果。</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/webcamp/zh-TW/Lessons/bit-coding.html" class="prev">
          Bit 的程式碼
        </a></span> <span class="next"><a href="/webcamp/zh-TW/Lessons/level.html">
          Bit 水平儀
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/webcamp/assets/js/app.ac9bb0df.js" defer></script><script src="/webcamp/assets/js/2.b04852b2.js" defer></script><script src="/webcamp/assets/js/46.36f49bad.js" defer></script>
  </body>
</html>
